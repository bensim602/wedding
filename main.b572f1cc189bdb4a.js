"use strict";var IS=Object.defineProperty,TS=Object.defineProperties,SS=Object.getOwnPropertyDescriptors,qy=Object.getOwnPropertySymbols,AS=Object.prototype.hasOwnProperty,RS=Object.prototype.propertyIsEnumerable,Zy=(ke,me,x)=>me in ke?IS(ke,me,{enumerable:!0,configurable:!0,writable:!0,value:x}):ke[me]=x,qo=(ke,me)=>{for(var x in me||(me={}))AS.call(me,x)&&Zy(ke,x,me[x]);if(qy)for(var x of qy(me))RS.call(me,x)&&Zy(ke,x,me[x]);return ke},Xy=(ke,me)=>TS(ke,SS(me));(self.webpackChunkAngular13FirebaseStorage=self.webpackChunkAngular13FirebaseStorage||[]).push([[179],{2436:(ke,me,x)=>{x.d(me,{hO:()=>Pt,xv:()=>$e,Dh:()=>je,HU:()=>Ve,GT:()=>Le,sI:()=>Re,on:()=>j,ss:()=>xe,pX:()=>be,yq:()=>U});var D=x(2869),I=x(8843);const pe=new class extends I.v{}(class extends D.o{constructor(ye,re){super(ye,re),this.scheduler=ye,this.work=re}schedule(ye,re=0){return re>0?super.schedule(ye,re):(this.delay=re,this.state=ye,this.scheduler.flush(this),this)}execute(ye,re){return re>0||this.closed?super.execute(ye,re):this._execute(ye,re)}requestAsyncId(ye,re,se=0){return null!=se&&se>0||null==se&&this.delay>0?super.requestAsyncId(ye,re,se):ye.flush(this)}});var oe=x(2210),le=x(5044),ue=x(9947),z=x(8889),J=x(4623),fe=x(5222),ae=x(4763),Ce=x(3668),Se=x(7713);function Me(){}ke=x.hmd(ke);class ce{constructor(ye,re=pe){this.zone=ye,this.delegate=re}now(){return this.delegate.now()}schedule(ye,re,se){const Ue=this.zone;return this.delegate.schedule(function(ze){Ue.runGuarded(()=>{ye.apply(this,[ze])})},re,se)}}class Ee{constructor(ye){this.zone=ye,this.task=null}call(ye,re){const se=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Me,{},Me,Me)),re.pipe(function(de,ye,re){const se=(0,le.m)(de)?{next:de,error:undefined,complete:undefined}:de;return se?(0,ue.e)((Ue,Ye)=>{var ze;null===(ze=se.subscribe)||void 0===ze||ze.call(se);let mt=!0;Ue.subscribe(new z.Q(Ye,nt=>{var ot;null===(ot=se.next)||void 0===ot||ot.call(se,nt),Ye.next(nt)},()=>{var nt;mt=!1,null===(nt=se.complete)||void 0===nt||nt.call(se),Ye.complete()},nt=>{var ot;mt=!1,null===(ot=se.error)||void 0===ot||ot.call(se,nt),Ye.error(nt)},()=>{var nt,ot;mt&&(null===(nt=se.unsubscribe)||void 0===nt||nt.call(se)),null===(ot=se.finalize)||void 0===ot||ot.call(se)}))}):J.y}({next:se,complete:se,error:se})).subscribe(ye).add(se)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class Ve{constructor(ye){this.ngZone=ye,this.outsideAngular=ye.runOutsideAngular(()=>new ce(Zone.current)),this.insideAngular=ye.run(()=>new ce(Zone.current,oe.z))}}function xe(de){return function(re){return(re=re.lift(new Ee(de.ngZone))).pipe((0,fe.R)(de.outsideAngular),(0,ae.Q)(de.insideAngular))}}const Te=["ngOnDestroy"],be=(de,ye,re,se={})=>new Proxy(de,{get:(Ue,Ye)=>re.runOutsideAngular(()=>{var ze;if(de[Ye])return(null===(ze=null==se?void 0:se.spy)||void 0===ze?void 0:ze.get)&&se.spy.get(Ye,de[Ye]),de[Ye];if(Te.indexOf(Ye)>-1)return()=>{};const mt=ye.toPromise().then(nt=>{const ot=nt&&nt[Ye];return"function"==typeof ot?ot.bind(nt):ot&&ot.then?ot.then(bn=>re.run(()=>bn)):re.run(()=>ot)});return new Proxy(()=>{},{get:(nt,ot)=>mt[ot],apply:(nt,ot,bn)=>mt.then(Ai=>{var Qn;const Hr=Ai&&Ai(...bn);return(null===(Qn=null==se?void 0:se.spy)||void 0===Qn?void 0:Qn.apply)&&se.spy.apply(Ye,bn,Hr),Hr})})})}),Le=(de,ye)=>{ye.forEach(re=>{Object.getOwnPropertyNames(re.prototype||re).forEach(se=>{Object.defineProperty(de.prototype,se,Object.getOwnPropertyDescriptor(re.prototype||re,se))})})},je=new Ce.OlP("angularfire2.app.options"),$e=new Ce.OlP("angularfire2.app.nameOrConfig"),V=new Ce.GfV("6.1.5");function j(de,ye,re){const Ue="object"==typeof re&&re||{};Ue.name=Ue.name||"string"==typeof re&&re||"[DEFAULT]";const ze=Se.Z.apps.filter(mt=>mt&&mt.name===Ue.name)[0]||ye.runOutsideAngular(()=>Se.Z.initializeApp(de,Ue));try{JSON.stringify(de)!==JSON.stringify(ze.options)&&X("error",`${ze.name} Firebase App already initialized with different options${ke.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(mt){}return ze}const U=()=>{X("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},X=(de,...ye)=>{(0,Ce.X6Q)()&&"undefined"!=typeof console&&console[de](...ye)};function Re(de,ye,re,se,Ue){const[Ye,...ze]=globalThis.\u0275AngularfireInstanceCache.get(de)||[];if(Ye){try{Ue.some((mt,nt)=>{const ot=ze[nt];return mt&&"object"==typeof mt?JSON.stringify(mt)!==JSON.stringify(ot):mt!==ot})&&X("error",`${ye} was already initialized on the ${re.name} Firebase App instance with different settings.${ke.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(mt){}return Ye}{const mt=se();return globalThis.\u0275AngularfireInstanceCache.set(de,[mt,...Ue]),mt}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const He={provide:class{},useFactory:j,deps:[je,Ce.R0b,[new Ce.FiY,$e]]};let Pt=(()=>{class de{constructor(re){Se.Z.registerVersion("angularfire",V.full,re.toString()),Se.Z.registerVersion("angular",Ce.q4F.full)}static initializeApp(re,se){return{ngModule:de,providers:[{provide:je,useValue:re},{provide:$e,useValue:se}]}}}return de.\u0275fac=function(re){return new(re||de)(Ce.LFG(Ce.Lbi))},de.\u0275mod=Ce.oAB({type:de}),de.\u0275inj=Ce.cJS({providers:[He]}),de})()},417:(ke,me,x)=>{x.d(me,{Z:()=>ye});var pe,Te,D=x(4762),ne=x(3923),I=x(8391),G=x(6433),_e=((pe={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",pe["bad-app-name"]="Illegal App name: '{$appName}",pe["duplicate-app"]="Firebase App named '{$appName}' already exists",pe["app-deleted"]="Firebase App named '{$appName}' already deleted",pe["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",pe["invalid-log-argument"]="First argument to `onLog` must be null or a function.",pe),oe=new ne.LL("app","Firebase",_e),le="@firebase/app",be="[DEFAULT]",Le=((Te={})[le]="fire-core",Te["@firebase/analytics"]="fire-analytics",Te["@firebase/app-check"]="fire-app-check",Te["@firebase/auth"]="fire-auth",Te["@firebase/database"]="fire-rtdb",Te["@firebase/functions"]="fire-fn",Te["@firebase/installations"]="fire-iid",Te["@firebase/messaging"]="fire-fcm",Te["@firebase/performance"]="fire-perf",Te["@firebase/remote-config"]="fire-rc",Te["@firebase/storage"]="fire-gcs",Te["@firebase/firestore"]="fire-fst",Te["fire-js"]="fire-js",Te["firebase-wrapper"]="fire-js-all",Te),je=new G.Yd("@firebase/app"),$e=function(){function re(se,Ue,Ye){var ze=this;this.firebase_=Ye,this.isDeleted_=!1,this.name_=Ue.name,this.automaticDataCollectionEnabled_=Ue.automaticDataCollectionEnabled||!1,this.options_=(0,ne.p$)(se),this.container=new I.H0(Ue.name),this._addComponent(new I.wA("app",function(){return ze},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(mt){return ze._addComponent(mt)})}return Object.defineProperty(re.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(se){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=se},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),re.prototype.delete=function(){var se=this;return new Promise(function(Ue){se.checkDestroyed_(),Ue()}).then(function(){return se.firebase_.INTERNAL.removeApp(se.name_),Promise.all(se.container.getProviders().map(function(Ue){return Ue.delete()}))}).then(function(){se.isDeleted_=!0})},re.prototype._getService=function(se,Ue){var Ye;void 0===Ue&&(Ue=be),this.checkDestroyed_();var ze=this.container.getProvider(se);return!ze.isInitialized()&&"EXPLICIT"===(null===(Ye=ze.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&ze.initialize(),ze.getImmediate({identifier:Ue})},re.prototype._removeServiceInstance=function(se,Ue){void 0===Ue&&(Ue=be),this.container.getProvider(se).clearInstance(Ue)},re.prototype._addComponent=function(se){try{this.container.addComponent(se)}catch(Ue){je.debug("Component "+se.name+" failed to register with FirebaseApp "+this.name,Ue)}},re.prototype._addOrOverwriteComponent=function(se){this.container.addOrOverwriteComponent(se)},re.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},re.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw oe.create("app-deleted",{appName:this.name_})},re}();$e.prototype.name&&$e.prototype.options||$e.prototype.delete||console.log("dc");var U=function j(){var re=function(re){var se={},Ue=new Map,Ye={__esModule:!0,initializeApp:function(_t,pt){void 0===pt&&(pt={}),("object"!=typeof pt||null===pt)&&(pt={name:pt});var yn=pt;void 0===yn.name&&(yn.name=be);var Fe=yn.name;if("string"!=typeof Fe||!Fe)throw oe.create("bad-app-name",{appName:String(Fe)});if((0,ne.r3)(se,Fe))throw oe.create("duplicate-app",{appName:Fe});var jt=new re(_t,yn,Ye);return se[Fe]=jt,jt},app:mt,registerVersion:function(_t,pt,vn){var yn,Fe=null!==(yn=Le[_t])&&void 0!==yn?yn:_t;vn&&(Fe+="-"+vn);var jt=Fe.match(/\s|\//),pn=pt.match(/\s|\//);if(jt||pn){var Gt=['Unable to register library "'+Fe+'" with version "'+pt+'":'];return jt&&Gt.push('library name "'+Fe+'" contains illegal characters (whitespace or "/")'),jt&&pn&&Gt.push("and"),pn&&Gt.push('version name "'+pt+'" contains illegal characters (whitespace or "/")'),void je.warn(Gt.join(" "))}bn(new I.wA(Fe+"-version",function(){return{library:Fe,version:pt}},"VERSION"))},setLogLevel:G.Ub,onLog:function(_t,pt){if(null!==_t&&"function"!=typeof _t)throw oe.create("invalid-log-argument");(0,G.Am)(_t,pt)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:bn,removeApp:function(_t){delete se[_t]},components:Ue,useAsService:function(_t,pt){return"serverAuth"===pt?null:pt}}};function mt(_t){if(!(0,ne.r3)(se,_t=_t||be))throw oe.create("no-app",{appName:_t});return se[_t]}function bn(_t){var pt=_t.name;if(Ue.has(pt))return je.debug("There were multiple attempts to register component "+pt+"."),"PUBLIC"===_t.type?Ye[pt]:null;if(Ue.set(pt,_t),"PUBLIC"===_t.type){var vn=function(pn){if(void 0===pn&&(pn=mt()),"function"!=typeof pn[pt])throw oe.create("invalid-app-argument",{appName:pt});return pn[pt]()};void 0!==_t.serviceProps&&(0,ne.ZB)(vn,_t.serviceProps),Ye[pt]=vn,re.prototype[pt]=function(){for(var pn=[],Gt=0;Gt<arguments.length;Gt++)pn[Gt]=arguments[Gt];return this._getService.bind(this,pt).apply(this,_t.multipleInstances?pn:[])}}for(var yn=0,Fe=Object.keys(se);yn<Fe.length;yn++)se[Fe[yn]]._addComponent(_t);return"PUBLIC"===_t.type?Ye[pt]:null}return Ye.default=Ye,Object.defineProperty(Ye,"apps",{get:function(){return Object.keys(se).map(function(_t){return se[_t]})}}),mt.App=re,Ye}($e);return re.INTERNAL=(0,D.pi)((0,D.pi)({},re.INTERNAL),{createFirebaseNamespace:j,extendNamespace:function(Ue){(0,ne.ZB)(re,Ue)},createSubscribe:ne.ne,ErrorFactory:ne.LL,deepExtend:ne.ZB}),re}(),X=function(){function re(se){this.container=se}return re.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(Ue){if(function(re){var se=re.getComponent();return"VERSION"===(null==se?void 0:se.type)}(Ue)){var Ye=Ue.getImmediate();return Ye.library+"/"+Ye.version}return null}).filter(function(Ue){return Ue}).join(" ")},re}();if((0,ne.jU)()&&void 0!==self.firebase){je.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var He=self.firebase.SDK_VERSION;He&&He.indexOf("LITE")>=0&&je.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Pt=U.initializeApp;U.initializeApp=function(){for(var re=[],se=0;se<arguments.length;se++)re[se]=arguments[se];return(0,ne.UG)()&&je.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Pt.apply(void 0,re)};var re,de=U;(re=de).INTERNAL.registerComponent(new I.wA("platform-logger",function(Ue){return new X(Ue)},"PRIVATE")),re.registerVersion(le,"0.6.30",undefined),re.registerVersion("fire-js","");const ye=de},8391:(ke,me,x)=>{x.d(me,{wA:()=>I,H0:()=>le,zt:()=>pe});var D=x(4762),ne=x(3923),I=function(){function ue(z,J,$){this.name=z,this.instanceFactory=J,this.type=$,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ue.prototype.setInstantiationMode=function(z){return this.instantiationMode=z,this},ue.prototype.setMultipleInstances=function(z){return this.multipleInstances=z,this},ue.prototype.setServiceProps=function(z){return this.serviceProps=z,this},ue.prototype.setInstanceCreatedCallback=function(z){return this.onInstanceCreated=z,this},ue}(),G="[DEFAULT]",pe=function(){function ue(z,J){this.name=z,this.container=J,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ue.prototype.get=function(z){var J=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(J)){var $=new ne.BH;if(this.instancesDeferred.set(J,$),this.isInitialized(J)||this.shouldAutoInitialize())try{var fe=this.getOrInitializeService({instanceIdentifier:J});fe&&$.resolve(fe)}catch(ae){}}return this.instancesDeferred.get(J).promise},ue.prototype.getImmediate=function(z){var J,$=this.normalizeInstanceIdentifier(null==z?void 0:z.identifier),fe=null!==(J=null==z?void 0:z.optional)&&void 0!==J&&J;if(!this.isInitialized($)&&!this.shouldAutoInitialize()){if(fe)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:$})}catch(ae){if(fe)return null;throw ae}},ue.prototype.getComponent=function(){return this.component},ue.prototype.setComponent=function(z){var J,$;if(z.name!==this.name)throw Error("Mismatching Component "+z.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=z,this.shouldAutoInitialize()){if(function(ue){return"EAGER"===ue.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:G})}catch(Ve){}try{for(var fe=(0,D.XA)(this.instancesDeferred.entries()),ae=fe.next();!ae.done;ae=fe.next()){var Ce=(0,D.CR)(ae.value,2),Me=Ce[1],ce=this.normalizeInstanceIdentifier(Ce[0]);try{var Ee=this.getOrInitializeService({instanceIdentifier:ce});Me.resolve(Ee)}catch(Ve){}}}catch(Ve){J={error:Ve}}finally{try{ae&&!ae.done&&($=fe.return)&&$.call(fe)}finally{if(J)throw J.error}}}},ue.prototype.clearInstance=function(z){void 0===z&&(z=G),this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)},ue.prototype.delete=function(){return(0,D.mG)(this,void 0,void 0,function(){var z;return(0,D.Jh)(this,function(J){switch(J.label){case 0:return z=Array.from(this.instances.values()),[4,Promise.all((0,D.ev)((0,D.ev)([],(0,D.CR)(z.filter(function($){return"INTERNAL"in $}).map(function($){return $.INTERNAL.delete()}))),(0,D.CR)(z.filter(function($){return"_delete"in $}).map(function($){return $._delete()}))))];case 1:return J.sent(),[2]}})})},ue.prototype.isComponentSet=function(){return null!=this.component},ue.prototype.isInitialized=function(z){return void 0===z&&(z=G),this.instances.has(z)},ue.prototype.getOptions=function(z){return void 0===z&&(z=G),this.instancesOptions.get(z)||{}},ue.prototype.initialize=function(z){var J,$;void 0===z&&(z={});var fe=z.options,ae=void 0===fe?{}:fe,Ce=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(Ce))throw Error(this.name+"("+Ce+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var Se=this.getOrInitializeService({instanceIdentifier:Ce,options:ae});try{for(var Me=(0,D.XA)(this.instancesDeferred.entries()),ce=Me.next();!ce.done;ce=Me.next()){var Ee=(0,D.CR)(ce.value,2),xe=Ee[1];Ce===this.normalizeInstanceIdentifier(Ee[0])&&xe.resolve(Se)}}catch(be){J={error:be}}finally{try{ce&&!ce.done&&($=Me.return)&&$.call(Me)}finally{if(J)throw J.error}}return Se},ue.prototype.onInit=function(z,J){var $,fe=this.normalizeInstanceIdentifier(J),ae=null!==($=this.onInitCallbacks.get(fe))&&void 0!==$?$:new Set;ae.add(z),this.onInitCallbacks.set(fe,ae);var Ce=this.instances.get(fe);return Ce&&z(Ce,fe),function(){ae.delete(z)}},ue.prototype.invokeOnInitCallbacks=function(z,J){var $,fe,ae=this.onInitCallbacks.get(J);if(ae)try{for(var Ce=(0,D.XA)(ae),Se=Ce.next();!Se.done;Se=Ce.next()){var Me=Se.value;try{Me(z,J)}catch(ce){}}}catch(ce){$={error:ce}}finally{try{Se&&!Se.done&&(fe=Ce.return)&&fe.call(Ce)}finally{if($)throw $.error}}},ue.prototype.getOrInitializeService=function(z){var J=z.instanceIdentifier,$=z.options,fe=void 0===$?{}:$,ae=this.instances.get(J);if(!ae&&this.component&&(ae=this.component.instanceFactory(this.container,{instanceIdentifier:_e(J),options:fe}),this.instances.set(J,ae),this.instancesOptions.set(J,fe),this.invokeOnInitCallbacks(ae,J),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,J,ae)}catch(Ce){}return ae||null},ue.prototype.normalizeInstanceIdentifier=function(z){return void 0===z&&(z=G),this.component?this.component.multipleInstances?z:G:z},ue.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},ue}();function _e(ue){return ue===G?void 0:ue}var le=function(){function ue(z){this.name=z,this.providers=new Map}return ue.prototype.addComponent=function(z){var J=this.getProvider(z.name);if(J.isComponentSet())throw new Error("Component "+z.name+" has already been registered with "+this.name);J.setComponent(z)},ue.prototype.addOrOverwriteComponent=function(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)},ue.prototype.getProvider=function(z){if(this.providers.has(z))return this.providers.get(z);var J=new pe(z,this);return this.providers.set(z,J),J},ue.prototype.getProviders=function(){return Array.from(this.providers.values())},ue}()},6522:(ke,me,x)=>{var D=x(417),ne=x(8391),I=x(3923),G=x(4762),pe=x(6433);ke=x.hmd(ke);var le="";function ue(o){le=o}var o,z=function(){function o(i){this.domStorage_=i,this.prefix_="firebase:"}return o.prototype.set=function(i,a){null==a?this.domStorage_.removeItem(this.prefixedName_(i)):this.domStorage_.setItem(this.prefixedName_(i),(0,I.Pz)(a))},o.prototype.get=function(i){var a=this.domStorage_.getItem(this.prefixedName_(i));return null==a?null:(0,I.cI)(a)},o.prototype.remove=function(i){this.domStorage_.removeItem(this.prefixedName_(i))},o.prototype.prefixedName_=function(i){return this.prefix_+i},o.prototype.toString=function(){return this.domStorage_.toString()},o}(),J=function(){function o(){this.cache_={},this.isInMemoryStorage=!0}return o.prototype.set=function(i,a){null==a?delete this.cache_[i]:this.cache_[i]=a},o.prototype.get=function(i){return(0,I.r3)(this.cache_,i)?this.cache_[i]:null},o.prototype.remove=function(i){delete this.cache_[i]},o}(),$=function(o){try{if("undefined"!=typeof window&&void 0!==window[o]){var i=window[o];return i.setItem("firebase:sentinel","cache"),i.removeItem("firebase:sentinel"),new z(i)}}catch(a){}return new J},fe=$("localStorage"),ae=$("sessionStorage"),Ce=new pe.Yd("@firebase/database"),Se=(o=1,function(){return o++}),Me=function(o){var i=(0,I.dS)(o),a=new I.gQ;a.update(i);var c=a.digest();return I.US.encodeByteArray(c)},ce=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];for(var a="",c=0;c<o.length;c++){var g=o[c];Array.isArray(g)||g&&"object"==typeof g&&"number"==typeof g.length?a+=ce.apply(null,g):a+="object"==typeof g?(0,I.Pz)(g):g,a+=" "}return a},Ee=null,Ve=!0,xe=function(o,i){(0,I.hu)(!i||!0===o||!1===o,"Can't turn on custom loggers persistently."),!0===o?(Ce.logLevel=pe.in.VERBOSE,Ee=Ce.log.bind(Ce),i&&ae.set("logging_enabled",!0)):"function"==typeof o?Ee=o:(Ee=null,ae.remove("logging_enabled"))},Te=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];if(!0===Ve&&(Ve=!1,null===Ee&&!0===ae.get("logging_enabled")&&xe(!0)),Ee){var a=ce.apply(null,o);Ee(a)}},be=function(o){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];Te.apply(void 0,(0,G.ev)([o],(0,G.CR)(i)))}},Le=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a="FIREBASE INTERNAL ERROR: "+ce.apply(void 0,(0,G.ev)([],(0,G.CR)(o)));Ce.error(a)},je=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a="FIREBASE FATAL ERROR: "+ce.apply(void 0,(0,G.ev)([],(0,G.CR)(o)));throw Ce.error(a),new Error(a)},$e=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a="FIREBASE WARNING: "+ce.apply(void 0,(0,G.ev)([],(0,G.CR)(o)));Ce.warn(a)},V=function(o){return"number"==typeof o&&(o!=o||o===Number.POSITIVE_INFINITY||o===Number.NEGATIVE_INFINITY)},U="[MIN_NAME]",X="[MAX_NAME]",B=function(o,i){if(o===i)return 0;if(o===U||i===X)return-1;if(i===U||o===X)return 1;var a=ot(o),c=ot(i);return null!==a?null!==c?a-c==0?o.length-i.length:a-c:-1:null!==c?1:o<i?-1:1},Re=function(o,i){return o===i?0:o<i?-1:1},He=function(o,i){if(i&&o in i)return i[o];throw new Error("Missing required key ("+o+") in object: "+(0,I.Pz)(i))},Pt=function(o){if("object"!=typeof o||null===o)return(0,I.Pz)(o);var i=[];for(var a in o)i.push(a);i.sort();for(var c="{",g=0;g<i.length;g++)0!==g&&(c+=","),c+=(0,I.Pz)(i[g]),c+=":",c+=Pt(o[i[g]]);return c+"}"},de=function(o,i){var a=o.length;if(a<=i)return[o];for(var c=[],g=0;g<a;g+=i)c.push(o.substring(g,g+i>a?a:g+i));return c};function ye(o,i){for(var a in o)o.hasOwnProperty(a)&&i(a,o[a])}var re=function(o){(0,I.hu)(!V(o),"Invalid JSON number");var g,v,C,T,A,c=1023;0===o?(v=0,C=0,g=1/o==-1/0?1:0):(g=o<0,(o=Math.abs(o))>=Math.pow(2,1-c)?(v=(T=Math.min(Math.floor(Math.log(o)/Math.LN2),c))+c,C=Math.round(o*Math.pow(2,52-T)-Math.pow(2,52))):(v=0,C=Math.round(o/Math.pow(2,-1074))));var P=[];for(A=52;A;A-=1)P.push(C%2?1:0),C=Math.floor(C/2);for(A=11;A;A-=1)P.push(v%2?1:0),v=Math.floor(v/2);P.push(g?1:0),P.reverse();var O=P.join(""),Z="";for(A=0;A<64;A+=8){var ie=parseInt(O.substr(A,8),2).toString(16);1===ie.length&&(ie="0"+ie),Z+=ie}return Z.toLowerCase()},ze=new RegExp("^-?(0*)\\d{1,10}$"),mt=-2147483648,nt=2147483647,ot=function(o){if(ze.test(o)){var i=Number(o);if(i>=mt&&i<=nt)return i}return null},bn=function(o){try{o()}catch(i){setTimeout(function(){throw $e("Exception was thrown by user callback.",i.stack||""),i},Math.floor(0))}},Qn=function(o,i){var a=setTimeout(o,i);return"object"==typeof a&&a.unref&&a.unref(),a},Hr=function(){function o(i,a){var c=this;this.appName_=i,this.appCheckProvider=a,this.appCheck=null==a?void 0:a.getImmediate({optional:!0}),this.appCheck||null==a||a.get().then(function(g){return c.appCheck=g})}return o.prototype.getToken=function(i){var a=this;return this.appCheck?this.appCheck.getToken(i):new Promise(function(c,g){setTimeout(function(){a.appCheck?a.getToken(i).then(c,g):c(null)},0)})},o.prototype.addTokenChangeListener=function(i){var a;null===(a=this.appCheckProvider)||void 0===a||a.get().then(function(c){return c.addTokenListener(i)})},o.prototype.notifyForInvalidToken=function(){$e('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},o}(),_t=function(){function o(i,a,c){var g=this;this.appName_=i,this.firebaseOptions_=a,this.authProvider_=c,this.auth_=null,this.auth_=c.getImmediate({optional:!0}),this.auth_||c.onInit(function(v){return g.auth_=v})}return o.prototype.getToken=function(i){var a=this;return this.auth_?this.auth_.getToken(i).catch(function(c){return c&&"auth/token-not-initialized"===c.code?(Te("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)}):new Promise(function(c,g){setTimeout(function(){a.auth_?a.getToken(i).then(c,g):c(null)},0)})},o.prototype.addTokenChangeListener=function(i){this.auth_?this.auth_.addAuthTokenListener(i):this.authProvider_.get().then(function(a){return a.addAuthTokenListener(i)})},o.prototype.removeTokenChangeListener=function(i){this.authProvider_.get().then(function(a){return a.removeAuthTokenListener(i)})},o.prototype.notifyForInvalidToken=function(){var i='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';$e(i+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},o}(),pt=function(){function o(i){this.accessToken=i}return o.prototype.getToken=function(i){return Promise.resolve({accessToken:this.accessToken})},o.prototype.addTokenChangeListener=function(i){i(this.accessToken)},o.prototype.removeTokenChangeListener=function(i){},o.prototype.notifyForInvalidToken=function(){},o.OWNER="owner",o}(),Gt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,un="websocket",ka="long_polling",qt=function(){function o(i,a,c,g,v,C,T){void 0===v&&(v=!1),void 0===C&&(C=""),void 0===T&&(T=!1),this.secure=a,this.namespace=c,this.webSocketOnly=g,this.nodeAdmin=v,this.persistenceKey=C,this.includeNamespaceInQueryParams=T,this._host=i.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=fe.get("host:"+i)||this._host}return o.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},o.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(o.prototype,"host",{get:function(){return this._host},set:function(i){i!==this.internalHost&&(this.internalHost=i,this.isCacheableHost()&&fe.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),o.prototype.toString=function(){var i=this.toURLString();return this.persistenceKey&&(i+="<"+this.persistenceKey+">"),i},o.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},o}();function rt(o,i,a){var c;if((0,I.hu)("string"==typeof i,"typeof type must == string"),(0,I.hu)("object"==typeof a,"typeof params must == object"),i===un)c=(o.secure?"wss://":"ws://")+o.internalHost+"/.ws?";else{if(i!==ka)throw new Error("Unknown connection type: "+i);c=(o.secure?"https://":"http://")+o.internalHost+"/.lp?"}(function(o){return o.host!==o.internalHost||o.isCustomHost()||o.includeNamespaceInQueryParams})(o)&&(a.ns=o.namespace);var g=[];return ye(a,function(v,C){g.push(v+"="+C)}),c+g.join("&")}var La=function(){function o(){this.counters_={}}return o.prototype.incrementCounter=function(i,a){void 0===a&&(a=1),(0,I.r3)(this.counters_,i)||(this.counters_[i]=0),this.counters_[i]+=a},o.prototype.get=function(){return(0,I.p$)(this.counters_)},o}(),ai={},er={};function Nt(o){var i=o.toString();return ai[i]||(ai[i]=new La),ai[i]}var ju=function(){function o(i){this.onMessage_=i,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return o.prototype.closeAfter=function(i,a){this.closeAfterResponse=i,this.onClose=a,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},o.prototype.handleResponse=function(i,a){var c=this;this.pendingResponses[i]=a;for(var g=function(){var T=v.pendingResponses[v.currentResponseNum];delete v.pendingResponses[v.currentResponseNum];for(var A=function(O){T[O]&&bn(function(){c.onMessage_(T[O])})},P=0;P<T.length;++P)A(P);if(v.currentResponseNum===v.closeAfterResponse)return v.onClose&&(v.onClose(),v.onClose=null),"break";v.currentResponseNum++},v=this;this.pendingResponses[this.currentResponseNum]&&"break"!==g(););},o}(),L="close",Ws=function(){function o(i,a,c,g,v,C,T){var A=this;this.connId=i,this.repoInfo=a,this.applicationId=c,this.appCheckToken=g,this.authToken=v,this.transportSessionId=C,this.lastSessionId=T,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=be(i),this.stats_=Nt(a),this.urlFn=function(P){return A.appCheckToken&&(P.ac=A.appCheckToken),rt(a,ka,P)}}return o.prototype.open=function(i,a){var c=this;this.curSegmentNum=0,this.onDisconnect_=a,this.myPacketOrderer=new ju(i),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){c.log_("Timed out trying to connect."),c.onClosed_(),c.connectTimeoutTimer_=null},Math.floor(3e4)),function(o){if((0,I.Yr)()||"complete"===document.readyState)o();else{var i=!1,a=function(){document.body?i||(i=!0,o()):setTimeout(a,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&a()}),window.attachEvent("onload",a))}}(function(){if(!c.isClosed_){c.scriptTagHolder=new Va(function(){for(var C=[],T=0;T<arguments.length;T++)C[T]=arguments[T];var A=(0,G.CR)(C,5),P=A[0],O=A[1],Z=A[2];if(c.incrementIncomingBytes_(C),c.scriptTagHolder)if(c.connectTimeoutTimer_&&(clearTimeout(c.connectTimeoutTimer_),c.connectTimeoutTimer_=null),c.everConnected_=!0,"start"===P)c.id=O,c.password=Z;else{if(P!==L)throw new Error("Unrecognized command received: "+P);O?(c.scriptTagHolder.sendNewPolls=!1,c.myPacketOrderer.closeAfter(O,function(){c.onClosed_()})):c.onClosed_()}},function(){for(var C=[],T=0;T<arguments.length;T++)C[T]=arguments[T];var A=(0,G.CR)(C,2),P=A[0],O=A[1];c.incrementIncomingBytes_(C),c.myPacketOrderer.handleResponse(P,O)},function(){c.onClosed_()},c.urlFn);var g={start:"t"};g.ser=Math.floor(1e8*Math.random()),c.scriptTagHolder.uniqueCallbackIdentifier&&(g.cb=c.scriptTagHolder.uniqueCallbackIdentifier),g.v="5",c.transportSessionId&&(g.s=c.transportSessionId),c.lastSessionId&&(g.ls=c.lastSessionId),c.applicationId&&(g.p=c.applicationId),c.appCheckToken&&(g.ac=c.appCheckToken),"undefined"!=typeof location&&location.hostname&&Gt.test(location.hostname)&&(g.r="f");var v=c.urlFn(g);c.log_("Connecting via long-poll to "+v),c.scriptTagHolder.addTag(v,function(){})}})},o.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},o.forceAllow=function(){o.forceAllow_=!0},o.forceDisallow=function(){o.forceDisallow_=!0},o.isAvailable=function(){return!((0,I.Yr)()||!o.forceAllow_&&(o.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},o.prototype.markConnectionHealthy=function(){},o.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},o.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},o.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},o.prototype.send=function(i){var a=(0,I.Pz)(i);this.bytesSent+=a.length,this.stats_.incrementCounter("bytes_sent",a.length);for(var c=(0,I.h$)(a),g=de(c,1840),v=0;v<g.length;v++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,g.length,g[v]),this.curSegmentNum++},o.prototype.addDisconnectPingFrame=function(i,a){if(!(0,I.Yr)()){this.myDisconnFrame=document.createElement("iframe");var c={dframe:"t"};c.id=i,c.pw=a,this.myDisconnFrame.src=this.urlFn(c),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},o.prototype.incrementIncomingBytes_=function(i){var a=(0,I.Pz)(i).length;this.bytesReceived+=a,this.stats_.incrementCounter("bytes_received",a)},o}(),Va=function(){function o(i,a,c,g){if(this.onDisconnect=c,this.urlFn=g,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,I.Yr)())this.commandCB=i,this.onMessageCB=a;else{this.uniqueCallbackIdentifier=Se(),window["pLPCommand"+this.uniqueCallbackIdentifier]=i,window["pRTLPCB"+this.uniqueCallbackIdentifier]=a,this.myIFrame=o.createIFrame_();var v="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(v='<script>document.domain="'+document.domain+'";<\/script>');var T="<html><body>"+v+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(T),this.myIFrame.doc.close()}catch(A){Te("frame writing exception"),A.stack&&Te(A.stack),Te(A)}}}return o.createIFrame_=function(){var i=document.createElement("iframe");if(i.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(i);try{i.contentWindow.document||Te("No IE domain setting required")}catch(g){var c=document.domain;i.src="javascript:void((function(){document.open();document.domain='"+c+"';document.close();})())"}return i.contentDocument?i.doc=i.contentDocument:i.contentWindow?i.doc=i.contentWindow.document:i.document&&(i.doc=i.document),i},o.prototype.close=function(){var i=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==i.myIFrame&&(document.body.removeChild(i.myIFrame),i.myIFrame=null)},Math.floor(0)));var a=this.onDisconnect;a&&(this.onDisconnect=null,a())},o.prototype.startLongPoll=function(i,a){for(this.myID=i,this.myPW=a,this.alive=!0;this.newRequest_(););},o.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var i={};i.id=this.myID,i.pw=this.myPW,i.ser=this.currentSerial;for(var a=this.urlFn(i),c="",g=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+c.length<=1870;){var C=this.pendingSegs.shift();c=c+"&seg"+g+"="+C.seg+"&ts"+g+"="+C.ts+"&d"+g+"="+C.d,g++}return this.addLongPollTag_(a+=c,this.currentSerial),!0}return!1},o.prototype.enqueueSegment=function(i,a,c){this.pendingSegs.push({seg:i,ts:a,d:c}),this.alive&&this.newRequest_()},o.prototype.addLongPollTag_=function(i,a){var c=this;this.outstandingRequests.add(a);var g=function(){c.outstandingRequests.delete(a),c.newRequest_()},v=setTimeout(g,Math.floor(25e3));this.addTag(i,function(){clearTimeout(v),g()})},o.prototype.addTag=function(i,a){var c=this;(0,I.Yr)()?this.doNodeLongPoll(i,a):setTimeout(function(){try{if(!c.sendNewPolls)return;var g=c.myIFrame.doc.createElement("script");g.type="text/javascript",g.async=!0,g.src=i,g.onload=g.onreadystatechange=function(){var v=g.readyState;(!v||"loaded"===v||"complete"===v)&&(g.onload=g.onreadystatechange=null,g.parentNode&&g.parentNode.removeChild(g),a())},g.onerror=function(){Te("Long-poll script failed to load: "+i),c.sendNewPolls=!1,c.close()},c.myIFrame.doc.body.appendChild(g)}catch(v){}},Math.floor(1))},o}(),jn=null;"undefined"!=typeof MozWebSocket?jn=MozWebSocket:"undefined"!=typeof WebSocket&&(jn=WebSocket);var Zt=function(){function o(i,a,c,g,v,C,T){this.connId=i,this.applicationId=c,this.appCheckToken=g,this.authToken=v,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=be(this.connId),this.stats_=Nt(a),this.connURL=o.connectionURL_(a,C,T,g),this.nodeAdmin=a.nodeAdmin}return o.connectionURL_=function(i,a,c,g){var v={v:"5"};return!(0,I.Yr)()&&"undefined"!=typeof location&&location.hostname&&Gt.test(location.hostname)&&(v.r="f"),a&&(v.s=a),c&&(v.ls=c),g&&(v.ac=g),rt(i,un,v)},o.prototype.open=function(i,a){var c=this;this.onDisconnect=a,this.onMessage=i,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fe.set("previous_websocket_failure",!0);try{if((0,I.Yr)()){var v={headers:{"User-Agent":"Firebase/5/"+le+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(v.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(v.headers["X-Firebase-AppCheck"]=this.appCheckToken);var C=process.env,T=0===this.connURL.indexOf("wss://")?C.HTTPS_PROXY||C.https_proxy:C.HTTP_PROXY||C.http_proxy;T&&(v.proxy={origin:T}),this.mySock=new jn(this.connURL,[],v)}else this.mySock=new jn(this.connURL,[],v={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(P){this.log_("Error instantiating WebSocket.");var A=P.message||P.data;return A&&this.log_(A),void this.onClosed_()}this.mySock.onopen=function(){c.log_("Websocket connected."),c.everConnected_=!0},this.mySock.onclose=function(){c.log_("Websocket connection was disconnected."),c.mySock=null,c.onClosed_()},this.mySock.onmessage=function(P){c.handleIncomingFrame(P)},this.mySock.onerror=function(P){c.log_("WebSocket error.  Closing connection.");var O=P.message||P.data;O&&c.log_(O),c.onClosed_()}},o.prototype.start=function(){},o.forceDisallow=function(){o.forceDisallow_=!0},o.isAvailable=function(){var i=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var c=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);c&&c.length>1&&parseFloat(c[1])<4.4&&(i=!0)}return!i&&null!==jn&&!o.forceDisallow_},o.previouslyFailed=function(){return fe.isInMemoryStorage||!0===fe.get("previous_websocket_failure")},o.prototype.markConnectionHealthy=function(){fe.remove("previous_websocket_failure")},o.prototype.appendFrame_=function(i){if(this.frames.push(i),this.frames.length===this.totalFrames){var a=this.frames.join("");this.frames=null;var c=(0,I.cI)(a);this.onMessage(c)}},o.prototype.handleNewFrameCount_=function(i){this.totalFrames=i,this.frames=[]},o.prototype.extractFrameCount_=function(i){if((0,I.hu)(null===this.frames,"We already have a frame buffer"),i.length<=6){var a=Number(i);if(!isNaN(a))return this.handleNewFrameCount_(a),null}return this.handleNewFrameCount_(1),i},o.prototype.handleIncomingFrame=function(i){if(null!==this.mySock){var a=i.data;if(this.bytesReceived+=a.length,this.stats_.incrementCounter("bytes_received",a.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(a);else{var c=this.extractFrameCount_(a);null!==c&&this.appendFrame_(c)}}},o.prototype.send=function(i){this.resetKeepAlive();var a=(0,I.Pz)(i);this.bytesSent+=a.length,this.stats_.incrementCounter("bytes_sent",a.length);var c=de(a,16384);c.length>1&&this.sendString_(String(c.length));for(var g=0;g<c.length;g++)this.sendString_(c[g])},o.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},o.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},o.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},o.prototype.resetKeepAlive=function(){var i=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){i.mySock&&i.sendString_("0"),i.resetKeepAlive()},Math.floor(45e3))},o.prototype.sendString_=function(i){try{this.mySock.send(i)}catch(a){this.log_("Exception thrown from WebSocket.send():",a.message||a.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},o.responsesRequiredToBeHealthy=2,o.healthyTimeout=3e4,o}(),tr=function(){function o(i){this.initTransports_(i)}return Object.defineProperty(o,"ALL_TRANSPORTS",{get:function(){return[Ws,Zt]},enumerable:!1,configurable:!0}),o.prototype.initTransports_=function(i){var a,c,g=Zt&&Zt.isAvailable(),v=g&&!Zt.previouslyFailed();if(i.webSocketOnly&&(g||$e("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),v=!0),v)this.transports_=[Zt];else{var C=this.transports_=[];try{for(var T=(0,G.XA)(o.ALL_TRANSPORTS),A=T.next();!A.done;A=T.next()){var P=A.value;P&&P.isAvailable()&&C.push(P)}}catch(O){a={error:O}}finally{try{A&&!A.done&&(c=T.return)&&c.call(T)}finally{if(a)throw a.error}}}},o.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},o.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},o}(),li=function(){function o(i,a,c,g,v,C,T,A,P,O){this.id=i,this.repoInfo_=a,this.applicationId_=c,this.appCheckToken_=g,this.authToken_=v,this.onMessage_=C,this.onReady_=T,this.onDisconnect_=A,this.onKill_=P,this.lastSessionId=O,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=be("c:"+this.id+":"),this.transportManager_=new tr(a),this.log_("Connection created"),this.start_()}return o.prototype.start_=function(){var i=this,a=this.transportManager_.initialTransport();this.conn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;var c=this.connReceiver_(this.conn_),g=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){i.conn_&&i.conn_.open(c,g)},Math.floor(0));var v=a.healthyTimeout||0;v>0&&(this.healthyTimeout_=Qn(function(){i.healthyTimeout_=null,i.isHealthy_||(i.conn_&&i.conn_.bytesReceived>102400?(i.log_("Connection exceeded healthy timeout but has received "+i.conn_.bytesReceived+" bytes.  Marking connection healthy."),i.isHealthy_=!0,i.conn_.markConnectionHealthy()):i.conn_&&i.conn_.bytesSent>10240?i.log_("Connection exceeded healthy timeout but has sent "+i.conn_.bytesSent+" bytes.  Leaving connection alive."):(i.log_("Closing unhealthy connection after timeout."),i.close()))},Math.floor(v)))},o.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},o.prototype.disconnReceiver_=function(i){var a=this;return function(c){i===a.conn_?a.onConnectionLost_(c):i===a.secondaryConn_?(a.log_("Secondary connection lost."),a.onSecondaryConnectionLost_()):a.log_("closing an old connection")}},o.prototype.connReceiver_=function(i){var a=this;return function(c){2!==a.state_&&(i===a.rx_?a.onPrimaryMessageReceived_(c):i===a.secondaryConn_?a.onSecondaryMessageReceived_(c):a.log_("message on old connection"))}},o.prototype.sendRequest=function(i){this.sendData_({t:"d",d:i})},o.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},o.prototype.onSecondaryControl_=function(i){if("t"in i){var a=i.t;"a"===a?this.upgradeIfSecondaryHealthy_():"r"===a?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===a&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},o.prototype.onSecondaryMessageReceived_=function(i){var a=He("t",i),c=He("d",i);if("c"===a)this.onSecondaryControl_(c);else{if("d"!==a)throw new Error("Unknown protocol layer: "+a);this.pendingDataMessages.push(c)}},o.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},o.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},o.prototype.onPrimaryMessageReceived_=function(i){var a=He("t",i),c=He("d",i);"c"===a?this.onControl_(c):"d"===a&&this.onDataMessage_(c)},o.prototype.onDataMessage_=function(i){this.onPrimaryResponse_(),this.onMessage_(i)},o.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},o.prototype.onControl_=function(i){var a=He("t",i);if("d"in i){var c=i.d;if("h"===a)this.onHandshake_(c);else if("n"===a){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var g=0;g<this.pendingDataMessages.length;++g)this.onDataMessage_(this.pendingDataMessages[g]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===a?this.onConnectionShutdown_(c):"r"===a?this.onReset_(c):"e"===a?Le("Server Error: "+c):"o"===a?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Le("Unknown control packet command: "+a)}},o.prototype.onHandshake_=function(i){var a=i.ts,c=i.v,g=i.h;this.sessionId=i.s,this.repoInfo_.host=g,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,a),"5"!==c&&$e("Protocol version mismatch detected"),this.tryStartUpgrade_())},o.prototype.tryStartUpgrade_=function(){var i=this.transportManager_.upgradeTransport();i&&this.startUpgrade_(i)},o.prototype.startUpgrade_=function(i){var a=this;this.secondaryConn_=new i(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=i.responsesRequiredToBeHealthy||0;var c=this.connReceiver_(this.secondaryConn_),g=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,g),Qn(function(){a.secondaryConn_&&(a.log_("Timed out trying to upgrade."),a.secondaryConn_.close())},Math.floor(6e4))},o.prototype.onReset_=function(i){this.log_("Reset packet received.  New host: "+i),this.repoInfo_.host=i,1===this.state_?this.close():(this.closeConnections_(),this.start_())},o.prototype.onConnectionEstablished_=function(i,a){var c=this;this.log_("Realtime connection established."),this.conn_=i,this.state_=1,this.onReady_&&(this.onReady_(a,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Qn(function(){c.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},o.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},o.prototype.onSecondaryConnectionLost_=function(){var i=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===i||this.rx_===i)&&this.close()},o.prototype.onConnectionLost_=function(i){this.conn_=null,i||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fe.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},o.prototype.onConnectionShutdown_=function(i){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(i),this.onKill_=null),this.onDisconnect_=null,this.close()},o.prototype.sendData_=function(i){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(i)},o.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},o.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},o}(),Pn=function(){function o(){}return o.prototype.put=function(i,a,c,g){},o.prototype.merge=function(i,a,c,g){},o.prototype.refreshAuthToken=function(i){},o.prototype.refreshAppCheckToken=function(i){},o.prototype.onDisconnectPut=function(i,a,c){},o.prototype.onDisconnectMerge=function(i,a,c){},o.prototype.onDisconnectCancel=function(i,a){},o.prototype.reportStats=function(i){},o}(),Jo=function(){function o(i){this.allowedEvents_=i,this.listeners_={},(0,I.hu)(Array.isArray(i)&&i.length>0,"Requires a non-empty array")}return o.prototype.trigger=function(i){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];if(Array.isArray(this.listeners_[i]))for(var g=(0,G.ev)([],(0,G.CR)(this.listeners_[i])),v=0;v<g.length;v++)g[v].callback.apply(g[v].context,a)},o.prototype.on=function(i,a,c){this.validateEventType_(i),this.listeners_[i]=this.listeners_[i]||[],this.listeners_[i].push({callback:a,context:c});var g=this.getInitialEvent(i);g&&a.apply(c,g)},o.prototype.off=function(i,a,c){this.validateEventType_(i);for(var g=this.listeners_[i]||[],v=0;v<g.length;v++)if(g[v].callback===a&&(!c||c===g[v].context))return void g.splice(v,1)},o.prototype.validateEventType_=function(i){(0,I.hu)(this.allowedEvents_.find(function(a){return a===i}),"Unknown event: "+i)},o}(),Ni=function(o){function i(){var a=o.call(this,["online"])||this;return a.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,I.uI)()&&(window.addEventListener("online",function(){a.online_||(a.online_=!0,a.trigger("online",!0))},!1),window.addEventListener("offline",function(){a.online_&&(a.online_=!1,a.trigger("online",!1))},!1)),a}return(0,G.ZT)(i,o),i.getInstance=function(){return new i},i.prototype.getInitialEvent=function(a){return(0,I.hu)("online"===a,"Unknown event type: "+a),[this.online_]},i.prototype.currentlyOnline=function(){return this.online_},i}(Jo),Rt=function(){function o(i,a){if(void 0===a){this.pieces_=i.split("/");for(var c=0,g=0;g<this.pieces_.length;g++)this.pieces_[g].length>0&&(this.pieces_[c]=this.pieces_[g],c++);this.pieces_.length=c,this.pieceNum_=0}else this.pieces_=i,this.pieceNum_=a}return o.prototype.toString=function(){for(var i="",a=this.pieceNum_;a<this.pieces_.length;a++)""!==this.pieces_[a]&&(i+="/"+this.pieces_[a]);return i||"/"},o}();function bt(){return new Rt("")}function st(o){return o.pieceNum_>=o.pieces_.length?null:o.pieces_[o.pieceNum_]}function Or(o){return o.pieces_.length-o.pieceNum_}function wt(o){var i=o.pieceNum_;return i<o.pieces_.length&&i++,new Rt(o.pieces_,i)}function fo(o){return o.pieceNum_<o.pieces_.length?o.pieces_[o.pieces_.length-1]:null}function Jt(o,i){return void 0===i&&(i=0),o.pieces_.slice(o.pieceNum_+i)}function $s(o){if(o.pieceNum_>=o.pieces_.length)return null;for(var i=[],a=o.pieceNum_;a<o.pieces_.length-1;a++)i.push(o.pieces_[a]);return new Rt(i,0)}function Et(o,i){for(var a=[],c=o.pieceNum_;c<o.pieces_.length;c++)a.push(o.pieces_[c]);if(i instanceof Rt)for(c=i.pieceNum_;c<i.pieces_.length;c++)a.push(i.pieces_[c]);else{var g=i.split("/");for(c=0;c<g.length;c++)g[c].length>0&&a.push(g[c])}return new Rt(a,0)}function qe(o){return o.pieceNum_>=o.pieces_.length}function In(o,i){var a=st(o),c=st(i);if(null===a)return i;if(a===c)return In(wt(o),wt(i));throw new Error("INTERNAL ERROR: innerPath ("+i+") is not within outerPath ("+o+")")}function es(o,i){for(var a=Jt(o,0),c=Jt(i,0),g=0;g<a.length&&g<c.length;g++){var v=B(a[g],c[g]);if(0!==v)return v}return a.length===c.length?0:a.length<c.length?-1:1}function ho(o,i){if(Or(o)!==Or(i))return!1;for(var a=o.pieceNum_,c=i.pieceNum_;a<=o.pieces_.length;a++,c++)if(o.pieces_[a]!==i.pieces_[c])return!1;return!0}function zt(o,i){var a=o.pieceNum_,c=i.pieceNum_;if(Or(o)>Or(i))return!1;for(;a<o.pieces_.length;){if(o.pieces_[a]!==i.pieces_[c])return!1;++a,++c}return!0}var yc=function(i,a){this.errorPrefix_=a,this.parts_=Jt(i,0),this.byteLength_=Math.max(1,this.parts_.length);for(var c=0;c<this.parts_.length;c++)this.byteLength_+=(0,I.ug)(this.parts_[c]);Hu(this)};function Hu(o){if(o.byteLength_>768)throw new Error(o.errorPrefix_+"has a key path longer than 768 bytes ("+o.byteLength_+").");if(o.parts_.length>32)throw new Error(o.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+po(o))}function po(o){return 0===o.parts_.length?"":"in property '"+o.parts_.join(".")+"'"}var ja,Ys,Hf=function(o){function i(){var c,g,a=o.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(g="visibilitychange",c="hidden"):void 0!==document.mozHidden?(g="mozvisibilitychange",c="mozHidden"):void 0!==document.msHidden?(g="msvisibilitychange",c="msHidden"):void 0!==document.webkitHidden&&(g="webkitvisibilitychange",c="webkitHidden")),a.visible_=!0,g&&document.addEventListener(g,function(){var v=!document[c];v!==a.visible_&&(a.visible_=v,a.trigger("visible",v))},!1),a}return(0,G.ZT)(i,o),i.getInstance=function(){return new i},i.prototype.getInitialEvent=function(a){return(0,I.hu)("visible"===a,"Unknown event type: "+a),[this.visible_]},i}(Jo),Gs=1e3,go=function(o){function i(a,c,g,v,C,T,A,P){var O=o.call(this)||this;if(O.repoInfo_=a,O.applicationId_=c,O.onDataUpdate_=g,O.onConnectStatus_=v,O.onServerInfoUpdate_=C,O.authTokenProvider_=T,O.appCheckTokenProvider_=A,O.authOverride_=P,O.id=i.nextPersistentConnectionId_++,O.log_=be("p:"+O.id+":"),O.interruptReasons_={},O.listens=new Map,O.outstandingPuts_=[],O.outstandingGets_=[],O.outstandingPutCount_=0,O.outstandingGetCount_=0,O.onDisconnectRequestQueue_=[],O.connected_=!1,O.reconnectDelay_=Gs,O.maxReconnectDelay_=3e5,O.securityDebugCallback_=null,O.lastSessionId=null,O.establishConnectionTimer_=null,O.visible_=!1,O.requestCBHash_={},O.requestNumber_=0,O.realtime_=null,O.authToken_=null,O.appCheckToken_=null,O.forceTokenRefresh_=!1,O.invalidAuthTokenCount_=0,O.invalidAppCheckTokenCount_=0,O.firstConnection_=!0,O.lastConnectionAttemptTime_=null,O.lastConnectionEstablishedTime_=null,P&&!(0,I.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Hf.getInstance().on("visible",O.onVisible_,O),-1===a.host.indexOf("fblocal")&&Ni.getInstance().on("online",O.onOnline_,O),O}return(0,G.ZT)(i,o),i.prototype.sendRequest=function(a,c,g){var v=++this.requestNumber_,C={r:v,a,b:c};this.log_((0,I.Pz)(C)),(0,I.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(C),g&&(this.requestCBHash_[v]=g)},i.prototype.get=function(a){var c=this;this.initConnection_();var g=new I.BH,v={p:a._path.toString(),q:a._queryObject},C={action:"g",request:v,onComplete:function(A){var P=A.d;"ok"===A.s?(c.onDataUpdate_(v.p,P,!1,null),g.resolve(P)):g.reject(P)}};this.outstandingGets_.push(C),this.outstandingGetCount_++;var T=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var A=c.outstandingGets_[T];void 0===A||C!==A||(delete c.outstandingGets_[T],c.outstandingGetCount_--,0===c.outstandingGetCount_&&(c.outstandingGets_=[]),c.log_("get "+T+" timed out on connection"),g.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(T),g.promise},i.prototype.listen=function(a,c,g,v){this.initConnection_();var C=a._queryIdentifier,T=a._path.toString();this.log_("Listen called for "+T+" "+C),this.listens.has(T)||this.listens.set(T,new Map),(0,I.hu)(a._queryParams.isDefault()||!a._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,I.hu)(!this.listens.get(T).has(C),"listen() called twice for same path/queryId.");var A={onComplete:v,hashFn:c,query:a,tag:g};this.listens.get(T).set(C,A),this.connected_&&this.sendListen_(A)},i.prototype.sendGet_=function(a){var c=this,g=this.outstandingGets_[a];this.sendRequest("g",g.request,function(v){delete c.outstandingGets_[a],c.outstandingGetCount_--,0===c.outstandingGetCount_&&(c.outstandingGets_=[]),g.onComplete&&g.onComplete(v)})},i.prototype.sendListen_=function(a){var c=this,g=a.query,v=g._path.toString(),C=g._queryIdentifier;this.log_("Listen on "+v+" for "+C);var T={p:v};a.tag&&(T.q=g._queryObject,T.t=a.tag),T.h=a.hashFn(),this.sendRequest("q",T,function(P){var O=P.d,Z=P.s;i.warnOnListenWarnings_(O,g),(c.listens.get(v)&&c.listens.get(v).get(C))===a&&(c.log_("listen response",P),"ok"!==Z&&c.removeListen_(v,C),a.onComplete&&a.onComplete(Z,O))})},i.warnOnListenWarnings_=function(a,c){if(a&&"object"==typeof a&&(0,I.r3)(a,"w")){var g=(0,I.DV)(a,"w");if(Array.isArray(g)&&~g.indexOf("no_index")){var v='".indexOn": "'+c._queryParams.getIndex().toString()+'"',C=c._path.toString();$e("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+v+" at "+C+" to your security rules for better performance.")}}},i.prototype.refreshAuthToken=function(a){this.authToken_=a,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(a)},i.prototype.reduceReconnectDelayIfAdminCredential_=function(a){(a&&40===a.length||(0,I.GJ)(a))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},i.prototype.refreshAppCheckToken=function(a){this.appCheckToken_=a,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},i.prototype.tryAuth=function(){var a=this;if(this.connected_&&this.authToken_){var c=this.authToken_,g=(0,I.w9)(c)?"auth":"gauth",v={cred:c};null===this.authOverride_?v.noauth=!0:"object"==typeof this.authOverride_&&(v.authvar=this.authOverride_),this.sendRequest(g,v,function(C){var T=C.s,A=C.d||"error";a.authToken_===c&&("ok"===T?a.invalidAuthTokenCount_=0:a.onAuthRevoked_(T,A))})}},i.prototype.tryAppCheck=function(){var a=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(c){var g=c.s,v=c.d||"error";"ok"===g?a.invalidAppCheckTokenCount_=0:a.onAppCheckRevoked_(g,v)})},i.prototype.unlisten=function(a,c){var g=a._path.toString(),v=a._queryIdentifier;this.log_("Unlisten called for "+g+" "+v),(0,I.hu)(a._queryParams.isDefault()||!a._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(g,v)&&this.connected_&&this.sendUnlisten_(g,v,a._queryObject,c)},i.prototype.sendUnlisten_=function(a,c,g,v){this.log_("Unlisten on "+a+" for "+c);var C={p:a};v&&(C.q=g,C.t=v),this.sendRequest("n",C)},i.prototype.onDisconnectPut=function(a,c,g){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",a,c,g):this.onDisconnectRequestQueue_.push({pathString:a,action:"o",data:c,onComplete:g})},i.prototype.onDisconnectMerge=function(a,c,g){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",a,c,g):this.onDisconnectRequestQueue_.push({pathString:a,action:"om",data:c,onComplete:g})},i.prototype.onDisconnectCancel=function(a,c){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",a,null,c):this.onDisconnectRequestQueue_.push({pathString:a,action:"oc",data:null,onComplete:c})},i.prototype.sendOnDisconnect_=function(a,c,g,v){var C={p:c,d:g};this.log_("onDisconnect "+a,C),this.sendRequest(a,C,function(T){v&&setTimeout(function(){v(T.s,T.d)},Math.floor(0))})},i.prototype.put=function(a,c,g,v){this.putInternal("p",a,c,g,v)},i.prototype.merge=function(a,c,g,v){this.putInternal("m",a,c,g,v)},i.prototype.putInternal=function(a,c,g,v,C){this.initConnection_();var T={p:c,d:g};void 0!==C&&(T.h=C),this.outstandingPuts_.push({action:a,request:T,onComplete:v}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+c)},i.prototype.sendPut_=function(a){var c=this,g=this.outstandingPuts_[a].action,v=this.outstandingPuts_[a].request,C=this.outstandingPuts_[a].onComplete;this.outstandingPuts_[a].queued=this.connected_,this.sendRequest(g,v,function(T){c.log_(g+" response",T),delete c.outstandingPuts_[a],c.outstandingPutCount_--,0===c.outstandingPutCount_&&(c.outstandingPuts_=[]),C&&C(T.s,T.d)})},i.prototype.reportStats=function(a){var c=this;if(this.connected_){var g={c:a};this.log_("reportStats",g),this.sendRequest("s",g,function(v){"ok"!==v.s&&c.log_("reportStats","Error sending stats: "+v.d)})}},i.prototype.onDataMessage_=function(a){if("r"in a){this.log_("from server: "+(0,I.Pz)(a));var c=a.r,g=this.requestCBHash_[c];g&&(delete this.requestCBHash_[c],g(a.b))}else{if("error"in a)throw"A server-side error has occurred: "+a.error;"a"in a&&this.onDataPush_(a.a,a.b)}},i.prototype.onDataPush_=function(a,c){this.log_("handleServerMessage",a,c),"d"===a?this.onDataUpdate_(c.p,c.d,!1,c.t):"m"===a?this.onDataUpdate_(c.p,c.d,!0,c.t):"c"===a?this.onListenRevoked_(c.p,c.q):"ac"===a?this.onAuthRevoked_(c.s,c.d):"apc"===a?this.onAppCheckRevoked_(c.s,c.d):"sd"===a?this.onSecurityDebugPacket_(c):Le("Unrecognized action received from server: "+(0,I.Pz)(a)+"\nAre you using the latest client?")},i.prototype.onReady_=function(a,c){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(a),this.lastSessionId=c,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},i.prototype.scheduleConnect_=function(a){var c=this;(0,I.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){c.establishConnectionTimer_=null,c.establishConnection_()},Math.floor(a))},i.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},i.prototype.onVisible_=function(a){a&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Gs,this.realtime_||this.scheduleConnect_(0)),this.visible_=a},i.prototype.onOnline_=function(a){a?(this.log_("Browser went online."),this.reconnectDelay_=Gs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},i.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Gs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var c=(new Date).getTime()-this.lastConnectionAttemptTime_,g=Math.max(0,this.reconnectDelay_-c);g=Math.random()*g,this.log_("Trying to reconnect in "+g+"ms"),this.scheduleConnect_(g),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},i.prototype.establishConnection_=function(){return(0,G.mG)(this,void 0,void 0,function(){var a,c,g,v,C,T,A,P,Z,ie,De,Pe,Je,Ge=this;return(0,G.Jh)(this,function(dt){switch(dt.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,a=this.onDataMessage_.bind(this),c=this.onReady_.bind(this),g=this.onRealtimeDisconnect_.bind(this),v=this.id+":"+i.nextConnectionId_++,C=this.lastSessionId,T=!1,A=null,this.realtime_={close:P=function(){A?A.close():(T=!0,g())},sendRequest:function(dn){(0,I.hu)(A,"sendRequest call when we're not connected not allowed."),A.sendRequest(dn)}},Z=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,dt.label=1;case 1:return dt.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(Z),this.appCheckTokenProvider_.getToken(Z)])];case 2:return ie=G.CR.apply(void 0,[dt.sent(),2]),De=ie[0],Pe=ie[1],T?Te("getToken() completed but was canceled"):(Te("getToken() completed. Creating connection."),this.authToken_=De&&De.accessToken,this.appCheckToken_=Pe&&Pe.token,A=new li(v,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,a,c,g,function(dn){$e(dn+" ("+Ge.repoInfo_.toString()+")"),Ge.interrupt("server_kill")},C)),[3,4];case 3:return Je=dt.sent(),this.log_("Failed to get token: "+Je),T||(this.repoInfo_.nodeAdmin&&$e(Je),P()),[3,4];case 4:return[2]}})})},i.prototype.interrupt=function(a){Te("Interrupting connection for reason: "+a),this.interruptReasons_[a]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},i.prototype.resume=function(a){Te("Resuming connection for reason: "+a),delete this.interruptReasons_[a],(0,I.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Gs,this.realtime_||this.scheduleConnect_(0))},i.prototype.handleTimestamp_=function(a){var c=a-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:c})},i.prototype.cancelSentTransactions_=function(){for(var a=0;a<this.outstandingPuts_.length;a++){var c=this.outstandingPuts_[a];c&&"h"in c.request&&c.queued&&(c.onComplete&&c.onComplete("disconnect"),delete this.outstandingPuts_[a],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},i.prototype.onListenRevoked_=function(a,c){var g;g=c?c.map(function(C){return Pt(C)}).join("$"):"default";var v=this.removeListen_(a,g);v&&v.onComplete&&v.onComplete("permission_denied")},i.prototype.removeListen_=function(a,c){var v,g=new Rt(a).toString();if(this.listens.has(g)){var C=this.listens.get(g);v=C.get(c),C.delete(c),0===C.size&&this.listens.delete(g)}else v=void 0;return v},i.prototype.onAuthRevoked_=function(a,c){Te("Auth token revoked: "+a+"/"+c),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===a||"permission_denied"===a)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},i.prototype.onAppCheckRevoked_=function(a,c){Te("App check token revoked: "+a+"/"+c),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===a||"permission_denied"===a)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},i.prototype.onSecurityDebugPacket_=function(a){this.securityDebugCallback_?this.securityDebugCallback_(a):"msg"in a&&console.log("FIREBASE: "+a.msg.replace("\n","\nFIREBASE: "))},i.prototype.restoreState_=function(){var a,c,g,v;this.tryAuth(),this.tryAppCheck();try{for(var C=(0,G.XA)(this.listens.values()),T=C.next();!T.done;T=C.next()){var A=T.value;try{for(var P=(g=void 0,(0,G.XA)(A.values())),O=P.next();!O.done;O=P.next())this.sendListen_(O.value)}catch(Pe){g={error:Pe}}finally{try{O&&!O.done&&(v=P.return)&&v.call(P)}finally{if(g)throw g.error}}}}catch(Pe){a={error:Pe}}finally{try{T&&!T.done&&(c=C.return)&&c.call(C)}finally{if(a)throw a.error}}for(var ie=0;ie<this.outstandingPuts_.length;ie++)this.outstandingPuts_[ie]&&this.sendPut_(ie);for(;this.onDisconnectRequestQueue_.length;){var De=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(De.action,De.pathString,De.data,De.onComplete)}for(ie=0;ie<this.outstandingGets_.length;ie++)this.outstandingGets_[ie]&&this.sendGet_(ie)},i.prototype.sendConnectStats_=function(){var a={},c="js";(0,I.Yr)()&&(c=this.repoInfo_.nodeAdmin?"admin_node":"node"),a["sdk."+c+"."+le.replace(/\./g,"-")]=1,(0,I.uI)()?a["framework.cordova"]=1:(0,I.b$)()&&(a["framework.reactnative"]=1),this.reportStats(a)},i.prototype.shouldReconnect_=function(){var a=Ni.getInstance().currentlyOnline();return(0,I.xb)(this.interruptReasons_)&&a},i.nextPersistentConnectionId_=0,i.nextConnectionId_=0,i}(Pn),vt=function(){function o(i,a){this.name=i,this.node=a}return o.Wrap=function(i,a){return new o(i,a)},o}(),Ba=function(){function o(){}return o.prototype.getCompare=function(){return this.compare.bind(this)},o.prototype.indexedValueChanged=function(i,a){var c=new vt(U,i),g=new vt(U,a);return 0!==this.compare(c,g)},o.prototype.minPost=function(){return vt.MIN},o}(),Ua=function(o){function i(){return null!==o&&o.apply(this,arguments)||this}return(0,G.ZT)(i,o),Object.defineProperty(i,"__EMPTY_NODE",{get:function(){return ja},set:function(a){ja=a},enumerable:!1,configurable:!0}),i.prototype.compare=function(a,c){return B(a.name,c.name)},i.prototype.isDefinedOn=function(a){throw(0,I.g5)("KeyIndex.isDefinedOn not expected to be called.")},i.prototype.indexedValueChanged=function(a,c){return!1},i.prototype.minPost=function(){return vt.MIN},i.prototype.maxPost=function(){return new vt(X,ja)},i.prototype.makePost=function(a,c){return(0,I.hu)("string"==typeof a,"KeyIndex indexValue must always be a string."),new vt(a,ja)},i.prototype.toString=function(){return".key"},i}(Ba),rr=new Ua,zs=function(){function o(i,a,c,g,v){void 0===v&&(v=null),this.isReverse_=g,this.resultGenerator_=v,this.nodeStack_=[];for(var C=1;!i.isEmpty();)if(i=i,C=a?c(i.key,a):1,g&&(C*=-1),C<0)i=this.isReverse_?i.left:i.right;else{if(0===C){this.nodeStack_.push(i);break}this.nodeStack_.push(i),i=this.isReverse_?i.right:i.left}}return o.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var a,i=this.nodeStack_.pop();if(a=this.resultGenerator_?this.resultGenerator_(i.key,i.value):{key:i.key,value:i.value},this.isReverse_)for(i=i.left;!i.isEmpty();)this.nodeStack_.push(i),i=i.right;else for(i=i.right;!i.isEmpty();)this.nodeStack_.push(i),i=i.left;return a},o.prototype.hasNext=function(){return this.nodeStack_.length>0},o.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var i=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(i.key,i.value):{key:i.key,value:i.value}},o}(),Fr=function(){function o(i,a,c,g,v){this.key=i,this.value=a,this.color=null!=c?c:o.RED,this.left=null!=g?g:xn.EMPTY_NODE,this.right=null!=v?v:xn.EMPTY_NODE}return o.prototype.copy=function(i,a,c,g,v){return new o(null!=i?i:this.key,null!=a?a:this.value,null!=c?c:this.color,null!=g?g:this.left,null!=v?v:this.right)},o.prototype.count=function(){return this.left.count()+1+this.right.count()},o.prototype.isEmpty=function(){return!1},o.prototype.inorderTraversal=function(i){return this.left.inorderTraversal(i)||!!i(this.key,this.value)||this.right.inorderTraversal(i)},o.prototype.reverseTraversal=function(i){return this.right.reverseTraversal(i)||i(this.key,this.value)||this.left.reverseTraversal(i)},o.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},o.prototype.minKey=function(){return this.min_().key},o.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},o.prototype.insert=function(i,a,c){var g=this,v=c(i,g.key);return(g=v<0?g.copy(null,null,null,g.left.insert(i,a,c),null):0===v?g.copy(null,a,null,null,null):g.copy(null,null,null,null,g.right.insert(i,a,c))).fixUp_()},o.prototype.removeMin_=function(){if(this.left.isEmpty())return xn.EMPTY_NODE;var i=this;return!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),(i=i.copy(null,null,null,i.left.removeMin_(),null)).fixUp_()},o.prototype.remove=function(i,a){var c,g;if(a(i,(c=this).key)<0)!c.left.isEmpty()&&!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.remove(i,a),null);else{if(c.left.isRed_()&&(c=c.rotateRight_()),!c.right.isEmpty()&&!c.right.isRed_()&&!c.right.left.isRed_()&&(c=c.moveRedRight_()),0===a(i,c.key)){if(c.right.isEmpty())return xn.EMPTY_NODE;g=c.right.min_(),c=c.copy(g.key,g.value,null,null,c.right.removeMin_())}c=c.copy(null,null,null,null,c.right.remove(i,a))}return c.fixUp_()},o.prototype.isRed_=function(){return this.color},o.prototype.fixUp_=function(){var i=this;return i.right.isRed_()&&!i.left.isRed_()&&(i=i.rotateLeft_()),i.left.isRed_()&&i.left.left.isRed_()&&(i=i.rotateRight_()),i.left.isRed_()&&i.right.isRed_()&&(i=i.colorFlip_()),i},o.prototype.moveRedLeft_=function(){var i=this.colorFlip_();return i.right.left.isRed_()&&(i=(i=(i=i.copy(null,null,null,null,i.right.rotateRight_())).rotateLeft_()).colorFlip_()),i},o.prototype.moveRedRight_=function(){var i=this.colorFlip_();return i.left.left.isRed_()&&(i=(i=i.rotateRight_()).colorFlip_()),i},o.prototype.rotateLeft_=function(){var i=this.copy(null,null,o.RED,null,this.right.left);return this.right.copy(null,null,this.color,i,null)},o.prototype.rotateRight_=function(){var i=this.copy(null,null,o.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,i)},o.prototype.colorFlip_=function(){var i=this.left.copy(null,null,!this.left.color,null,null),a=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,i,a)},o.prototype.checkMaxDepth_=function(){var i=this.check_();return Math.pow(2,i)<=this.count()+1},o.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var i=this.left.check_();if(i!==this.right.check_())throw new Error("Black depths differ");return i+(this.isRed_()?0:1)},o.RED=!0,o.BLACK=!1,o}(),Qf=function(){function o(){}return o.prototype.copy=function(i,a,c,g,v){return this},o.prototype.insert=function(i,a,c){return new Fr(i,a,null)},o.prototype.remove=function(i,a){return this},o.prototype.count=function(){return 0},o.prototype.isEmpty=function(){return!0},o.prototype.inorderTraversal=function(i){return!1},o.prototype.reverseTraversal=function(i){return!1},o.prototype.minKey=function(){return null},o.prototype.maxKey=function(){return null},o.prototype.check_=function(){return 0},o.prototype.isRed_=function(){return!1},o}(),xn=function(){function o(i,a){void 0===a&&(a=o.EMPTY_NODE),this.comparator_=i,this.root_=a}return o.prototype.insert=function(i,a){return new o(this.comparator_,this.root_.insert(i,a,this.comparator_).copy(null,null,Fr.BLACK,null,null))},o.prototype.remove=function(i){return new o(this.comparator_,this.root_.remove(i,this.comparator_).copy(null,null,Fr.BLACK,null,null))},o.prototype.get=function(i){for(var a,c=this.root_;!c.isEmpty();){if(0===(a=this.comparator_(i,c.key)))return c.value;a<0?c=c.left:a>0&&(c=c.right)}return null},o.prototype.getPredecessorKey=function(i){for(var a,c=this.root_,g=null;!c.isEmpty();){if(0===(a=this.comparator_(i,c.key))){if(c.left.isEmpty())return g?g.key:null;for(c=c.left;!c.right.isEmpty();)c=c.right;return c.key}a<0?c=c.left:a>0&&(g=c,c=c.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},o.prototype.isEmpty=function(){return this.root_.isEmpty()},o.prototype.count=function(){return this.root_.count()},o.prototype.minKey=function(){return this.root_.minKey()},o.prototype.maxKey=function(){return this.root_.maxKey()},o.prototype.inorderTraversal=function(i){return this.root_.inorderTraversal(i)},o.prototype.reverseTraversal=function(i){return this.root_.reverseTraversal(i)},o.prototype.getIterator=function(i){return new zs(this.root_,null,this.comparator_,!1,i)},o.prototype.getIteratorFrom=function(i,a){return new zs(this.root_,i,this.comparator_,!1,a)},o.prototype.getReverseIteratorFrom=function(i,a){return new zs(this.root_,i,this.comparator_,!0,a)},o.prototype.getReverseIterator=function(i){return new zs(this.root_,null,this.comparator_,!0,i)},o.EMPTY_NODE=new Qf,o}();function Qs(o,i){return B(o.name,i.name)}function Oi(o,i){return B(o,i)}var Ha,qs,bc,Wt,$t,Wu=function(o){return"number"==typeof o?"number:"+re(o):"string:"+o},Ks=function(o){if(o.isLeafNode()){var i=o.val();(0,I.hu)("string"==typeof i||"number"==typeof i||"object"==typeof i&&(0,I.r3)(i,".sv"),"Priority must be a string or number.")}else(0,I.hu)(o===Ys||o.isEmpty(),"priority of unexpected type.");(0,I.hu)(o===Ys||o.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},mo=function(){function o(i,a){void 0===a&&(a=o.__childrenNodeConstructor.EMPTY_NODE),this.value_=i,this.priorityNode_=a,this.lazyHash_=null,(0,I.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ks(this.priorityNode_)}return Object.defineProperty(o,"__childrenNodeConstructor",{get:function(){return Ha},set:function(i){Ha=i},enumerable:!1,configurable:!0}),o.prototype.isLeafNode=function(){return!0},o.prototype.getPriority=function(){return this.priorityNode_},o.prototype.updatePriority=function(i){return new o(this.value_,i)},o.prototype.getImmediateChild=function(i){return".priority"===i?this.priorityNode_:o.__childrenNodeConstructor.EMPTY_NODE},o.prototype.getChild=function(i){return qe(i)?this:".priority"===st(i)?this.priorityNode_:o.__childrenNodeConstructor.EMPTY_NODE},o.prototype.hasChild=function(){return!1},o.prototype.getPredecessorChildName=function(i,a){return null},o.prototype.updateImmediateChild=function(i,a){return".priority"===i?this.updatePriority(a):a.isEmpty()&&".priority"!==i?this:o.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(i,a).updatePriority(this.priorityNode_)},o.prototype.updateChild=function(i,a){var c=st(i);return null===c?a:a.isEmpty()&&".priority"!==c?this:((0,I.hu)(".priority"!==c||1===Or(i),".priority must be the last token in a path"),this.updateImmediateChild(c,o.__childrenNodeConstructor.EMPTY_NODE.updateChild(wt(i),a)))},o.prototype.isEmpty=function(){return!1},o.prototype.numChildren=function(){return 0},o.prototype.forEachChild=function(i,a){return!1},o.prototype.val=function(i){return i&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},o.prototype.hash=function(){if(null===this.lazyHash_){var i="";this.priorityNode_.isEmpty()||(i+="priority:"+Wu(this.priorityNode_.val())+":");var a=typeof this.value_;i+=a+":",i+="number"===a?re(this.value_):this.value_,this.lazyHash_=Me(i)}return this.lazyHash_},o.prototype.getValue=function(){return this.value_},o.prototype.compareTo=function(i){return i===o.__childrenNodeConstructor.EMPTY_NODE?1:i instanceof o.__childrenNodeConstructor?-1:((0,I.hu)(i.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(i))},o.prototype.compareToLeafNode_=function(i){var a=typeof i.value_,c=typeof this.value_,g=o.VALUE_TYPE_ORDER.indexOf(a),v=o.VALUE_TYPE_ORDER.indexOf(c);return(0,I.hu)(g>=0,"Unknown leaf type: "+a),(0,I.hu)(v>=0,"Unknown leaf type: "+c),g===v?"object"===c?0:this.value_<i.value_?-1:this.value_===i.value_?0:1:v-g},o.prototype.withIndex=function(){return this},o.prototype.isIndexed=function(){return!0},o.prototype.equals=function(i){return i===this||!!i.isLeafNode()&&(this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_))},o.VALUE_TYPE_ORDER=["object","boolean","number","string"],o}(),Ic=function(o){function i(){return null!==o&&o.apply(this,arguments)||this}return(0,G.ZT)(i,o),i.prototype.compare=function(a,c){var g=a.node.getPriority(),v=c.node.getPriority(),C=g.compareTo(v);return 0===C?B(a.name,c.name):C},i.prototype.isDefinedOn=function(a){return!a.getPriority().isEmpty()},i.prototype.indexedValueChanged=function(a,c){return!a.getPriority().equals(c.getPriority())},i.prototype.minPost=function(){return vt.MIN},i.prototype.maxPost=function(){return new vt(X,new mo("[PRIORITY-POST]",bc))},i.prototype.makePost=function(a,c){var g=qs(a);return new vt(c,new mo("[PRIORITY-POST]",g))},i.prototype.toString=function(){return".priority"},i}(Ba),Vt=new Ic,Kf=Math.log(2),$u=function(){function o(i){this.count=parseInt(Math.log(i+1)/Kf,10),this.current_=this.count-1;var g=parseInt(Array(this.count+1).join("1"),2);this.bits_=i+1&g}return o.prototype.nextBitIsOne=function(){var i=!(this.bits_&1<<this.current_);return this.current_--,i},o}(),Zs=function(o,i,a,c){o.sort(i);var g=function(A,P){var Z,ie,O=P-A;if(0===O)return null;if(1===O)return Z=o[A],ie=a?a(Z):Z,new Fr(ie,Z.node,Fr.BLACK,null,null);var De=parseInt(O/2,10)+A,Pe=g(A,De),Je=g(De+1,P);return Z=o[De],ie=a?a(Z):Z,new Fr(ie,Z.node,Fr.BLACK,Pe,Je)},T=function(A){for(var P=null,O=null,Z=o.length,ie=function(dt,dn){var ii=Z-dt,uf=Z;Z-=dt;var Bl=g(ii+1,uf),lf=o[ii],sd=a?a(lf):lf;De(new Fr(sd,lf.node,dn,null,Bl))},De=function(dt){P?(P.left=dt,P=dt):(O=dt,P=dt)},Pe=0;Pe<A.count;++Pe){var Je=A.nextBitIsOne(),Ge=Math.pow(2,A.count-(Pe+1));Je?ie(Ge,Fr.BLACK):(ie(Ge,Fr.BLACK),ie(Ge,Fr.RED))}return O}(new $u(o.length));return new xn(c||i,T)},_o={},Xs=function(){function o(i,a){this.indexes_=i,this.indexSet_=a}return Object.defineProperty(o,"Default",{get:function(){return(0,I.hu)(_o&&Vt,"ChildrenNode.ts has not been loaded"),Wt=Wt||new o({".priority":_o},{".priority":Vt})},enumerable:!1,configurable:!0}),o.prototype.get=function(i){var a=(0,I.DV)(this.indexes_,i);if(!a)throw new Error("No index defined for "+i);return a instanceof xn?a:null},o.prototype.hasIndex=function(i){return(0,I.r3)(this.indexSet_,i.toString())},o.prototype.addIndex=function(i,a){(0,I.hu)(i!==rr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var c=[],g=!1,v=a.getIterator(vt.Wrap),C=v.getNext();C;)g=g||i.isDefinedOn(C.node),c.push(C),C=v.getNext();var T;T=g?Zs(c,i.getCompare()):_o;var A=i.toString(),P=(0,G.pi)({},this.indexSet_);P[A]=i;var O=(0,G.pi)({},this.indexes_);return O[A]=T,new o(O,P)},o.prototype.addToIndexes=function(i,a){var c=this;return new o((0,I.UI)(this.indexes_,function(v,C){var T=(0,I.DV)(c.indexSet_,C);if((0,I.hu)(T,"Missing index implementation for "+C),v===_o){if(T.isDefinedOn(i.node)){for(var A=[],P=a.getIterator(vt.Wrap),O=P.getNext();O;)O.name!==i.name&&A.push(O),O=P.getNext();return A.push(i),Zs(A,T.getCompare())}return _o}var Z=a.get(i.name),ie=v;return Z&&(ie=ie.remove(new vt(i.name,Z))),ie.insert(i,i.node)}),this.indexSet_)},o.prototype.removeFromIndexes=function(i,a){return new o((0,I.UI)(this.indexes_,function(g){if(g===_o)return g;var v=a.get(i.name);return v?g.remove(new vt(i.name,v)):g}),this.indexSet_)},o}(),et=function(){function o(i,a,c){this.children_=i,this.priorityNode_=a,this.indexMap_=c,this.lazyHash_=null,this.priorityNode_&&Ks(this.priorityNode_),this.children_.isEmpty()&&(0,I.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(o,"EMPTY_NODE",{get:function(){return $t||($t=new o(new xn(Oi),null,Xs.Default))},enumerable:!1,configurable:!0}),o.prototype.isLeafNode=function(){return!1},o.prototype.getPriority=function(){return this.priorityNode_||$t},o.prototype.updatePriority=function(i){return this.children_.isEmpty()?this:new o(this.children_,i,this.indexMap_)},o.prototype.getImmediateChild=function(i){if(".priority"===i)return this.getPriority();var a=this.children_.get(i);return null===a?$t:a},o.prototype.getChild=function(i){var a=st(i);return null===a?this:this.getImmediateChild(a).getChild(wt(i))},o.prototype.hasChild=function(i){return null!==this.children_.get(i)},o.prototype.updateImmediateChild=function(i,a){if((0,I.hu)(a,"We should always be passing snapshot nodes"),".priority"===i)return this.updatePriority(a);var c=new vt(i,a),g=void 0,v=void 0;a.isEmpty()?(g=this.children_.remove(i),v=this.indexMap_.removeFromIndexes(c,this.children_)):(g=this.children_.insert(i,a),v=this.indexMap_.addToIndexes(c,this.children_));var C=g.isEmpty()?$t:this.priorityNode_;return new o(g,C,v)},o.prototype.updateChild=function(i,a){var c=st(i);if(null===c)return a;(0,I.hu)(".priority"!==st(i)||1===Or(i),".priority must be the last token in a path");var g=this.getImmediateChild(c).updateChild(wt(i),a);return this.updateImmediateChild(c,g)},o.prototype.isEmpty=function(){return this.children_.isEmpty()},o.prototype.numChildren=function(){return this.children_.count()},o.prototype.val=function(i){if(this.isEmpty())return null;var a={},c=0,g=0,v=!0;if(this.forEachChild(Vt,function(A,P){a[A]=P.val(i),c++,v&&o.INTEGER_REGEXP_.test(A)?g=Math.max(g,Number(A)):v=!1}),!i&&v&&g<2*c){var C=[];for(var T in a)C[T]=a[T];return C}return i&&!this.getPriority().isEmpty()&&(a[".priority"]=this.getPriority().val()),a},o.prototype.hash=function(){if(null===this.lazyHash_){var i="";this.getPriority().isEmpty()||(i+="priority:"+Wu(this.getPriority().val())+":"),this.forEachChild(Vt,function(a,c){var g=c.hash();""!==g&&(i+=":"+a+":"+g)}),this.lazyHash_=""===i?"":Me(i)}return this.lazyHash_},o.prototype.getPredecessorChildName=function(i,a,c){var g=this.resolveIndex_(c);if(g){var v=g.getPredecessorKey(new vt(i,a));return v?v.name:null}return this.children_.getPredecessorKey(i)},o.prototype.getFirstChildName=function(i){var a=this.resolveIndex_(i);if(a){var c=a.minKey();return c&&c.name}return this.children_.minKey()},o.prototype.getFirstChild=function(i){var a=this.getFirstChildName(i);return a?new vt(a,this.children_.get(a)):null},o.prototype.getLastChildName=function(i){var a=this.resolveIndex_(i);if(a){var c=a.maxKey();return c&&c.name}return this.children_.maxKey()},o.prototype.getLastChild=function(i){var a=this.getLastChildName(i);return a?new vt(a,this.children_.get(a)):null},o.prototype.forEachChild=function(i,a){var c=this.resolveIndex_(i);return c?c.inorderTraversal(function(g){return a(g.name,g.node)}):this.children_.inorderTraversal(a)},o.prototype.getIterator=function(i){return this.getIteratorFrom(i.minPost(),i)},o.prototype.getIteratorFrom=function(i,a){var c=this.resolveIndex_(a);if(c)return c.getIteratorFrom(i,function(C){return C});for(var g=this.children_.getIteratorFrom(i.name,vt.Wrap),v=g.peek();null!=v&&a.compare(v,i)<0;)g.getNext(),v=g.peek();return g},o.prototype.getReverseIterator=function(i){return this.getReverseIteratorFrom(i.maxPost(),i)},o.prototype.getReverseIteratorFrom=function(i,a){var c=this.resolveIndex_(a);if(c)return c.getReverseIteratorFrom(i,function(C){return C});for(var g=this.children_.getReverseIteratorFrom(i.name,vt.Wrap),v=g.peek();null!=v&&a.compare(v,i)>0;)g.getNext(),v=g.peek();return g},o.prototype.compareTo=function(i){return this.isEmpty()?i.isEmpty()?0:-1:i.isLeafNode()||i.isEmpty()?1:i===fi?-1:0},o.prototype.withIndex=function(i){if(i===rr||this.indexMap_.hasIndex(i))return this;var a=this.indexMap_.addIndex(i,this.children_);return new o(this.children_,this.priorityNode_,a)},o.prototype.isIndexed=function(i){return i===rr||this.indexMap_.hasIndex(i)},o.prototype.equals=function(i){if(i===this)return!0;if(i.isLeafNode())return!1;var a=i;if(this.getPriority().equals(a.getPriority())){if(this.children_.count()===a.children_.count()){for(var c=this.getIterator(Vt),g=a.getIterator(Vt),v=c.getNext(),C=g.getNext();v&&C;){if(v.name!==C.name||!v.node.equals(C.node))return!1;v=c.getNext(),C=g.getNext()}return null===v&&null===C}return!1}return!1},o.prototype.resolveIndex_=function(i){return i===rr?null:this.indexMap_.get(i.toString())},o.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,o}(),Js=function(o){function i(){return o.call(this,new xn(Oi),et.EMPTY_NODE,Xs.Default)||this}return(0,G.ZT)(i,o),i.prototype.compareTo=function(a){return a===this?0:1},i.prototype.equals=function(a){return a===this},i.prototype.getPriority=function(){return this},i.prototype.getImmediateChild=function(a){return et.EMPTY_NODE},i.prototype.isEmpty=function(){return!1},i}(et),fi=new Js;function Qt(o,i){if(void 0===i&&(i=null),null===o)return et.EMPTY_NODE;if("object"==typeof o&&".priority"in o&&(i=o[".priority"]),(0,I.hu)(null===i||"string"==typeof i||"number"==typeof i||"object"==typeof i&&".sv"in i,"Invalid priority type found: "+typeof i),"object"==typeof o&&".value"in o&&null!==o[".value"]&&(o=o[".value"]),"object"!=typeof o||".sv"in o)return new mo(o,Qt(i));if(o instanceof Array){var A=et.EMPTY_NODE;return ye(o,function(P,O){if((0,I.r3)(o,P)&&"."!==P.substring(0,1)){var Z=Qt(O);(Z.isLeafNode()||!Z.isEmpty())&&(A=A.updateImmediateChild(P,Z))}}),A.updatePriority(Qt(i))}var c=[],g=!1;if(ye(o,function(P,O){if("."!==P.substring(0,1)){var Z=Qt(O);Z.isEmpty()||(g=g||!Z.getPriority().isEmpty(),c.push(new vt(P,Z)))}}),0===c.length)return et.EMPTY_NODE;var C=Zs(c,Qs,function(P){return P.name},Oi);if(g){var T=Zs(c,Vt.getCompare());return new et(C,Qt(i),new Xs({".priority":T},{".priority":Vt}))}return new et(C,Qt(i),Xs.Default)}Object.defineProperties(vt,{MIN:{value:new vt(U,et.EMPTY_NODE)},MAX:{value:new vt(X,fi)}}),Ua.__EMPTY_NODE=et.EMPTY_NODE,mo.__childrenNodeConstructor=et,function(o){Ys=o}(fi),function(o){bc=o}(fi),function(o){qs=o}(Qt);var vo=function(o){function i(a){var c=o.call(this)||this;return c.indexPath_=a,(0,I.hu)(!qe(a)&&".priority"!==st(a),"Can't create PathIndex with empty path or .priority key"),c}return(0,G.ZT)(i,o),i.prototype.extractChild=function(a){return a.getChild(this.indexPath_)},i.prototype.isDefinedOn=function(a){return!a.getChild(this.indexPath_).isEmpty()},i.prototype.compare=function(a,c){var g=this.extractChild(a.node),v=this.extractChild(c.node),C=g.compareTo(v);return 0===C?B(a.name,c.name):C},i.prototype.makePost=function(a,c){var g=Qt(a),v=et.EMPTY_NODE.updateChild(this.indexPath_,g);return new vt(c,v)},i.prototype.maxPost=function(){var a=et.EMPTY_NODE.updateChild(this.indexPath_,fi);return new vt(X,a)},i.prototype.toString=function(){return Jt(this.indexPath_,0).join("/")},i}(Ba),yo=function(o){function i(){return null!==o&&o.apply(this,arguments)||this}return(0,G.ZT)(i,o),i.prototype.compare=function(a,c){var g=a.node.compareTo(c.node);return 0===g?B(a.name,c.name):g},i.prototype.isDefinedOn=function(a){return!0},i.prototype.indexedValueChanged=function(a,c){return!a.equals(c)},i.prototype.minPost=function(){return vt.MIN},i.prototype.maxPost=function(){return vt.MAX},i.prototype.makePost=function(a,c){var g=Qt(a);return new vt(c,g)},i.prototype.toString=function(){return".value"},i}(Ba),On=new yo,Gr="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Tc=function(){var o=0,i=[];return function(a){var c=a===o;o=a;var g,v=new Array(8);for(g=7;g>=0;g--)v[g]=Gr.charAt(a%64),a=Math.floor(a/64);(0,I.hu)(0===a,"Cannot push at time == 0");var C=v.join("");if(c){for(g=11;g>=0&&63===i[g];g--)i[g]=0;i[g]++}else for(g=0;g<12;g++)i[g]=Math.floor(64*Math.random());for(g=0;g<12;g++)C+=Gr.charAt(i[g]);return(0,I.hu)(20===C.length,"nextPushId: Length should be 20."),C}}(),Wa=function(o){if(o===""+nt)return"-";var i=ot(o);if(null!=i)return""+(i+1);for(var a=new Array(o.length),c=0;c<a.length;c++)a[c]=o.charAt(c);if(a.length<786)return a.push("-"),a.join("");for(var g=a.length-1;g>=0&&"z"===a[g];)g--;if(-1===g)return X;var C=Gr.charAt(Gr.indexOf(a[g])+1);return a[g]=C,a.slice(0,g+1).join("")},Ke=function(o){if(o===""+mt)return U;var i=ot(o);if(null!=i)return""+(i-1);for(var a=new Array(o.length),c=0;c<a.length;c++)a[c]=o.charAt(c);return"-"===a[a.length-1]?1===a.length?""+nt:(delete a[a.length-1],a.join("")):(a[a.length-1]=Gr.charAt(Gr.indexOf(a[a.length-1])-1),a.join("")+"z".repeat(786-a.length))};function Sc(o){return{type:"value",snapshotNode:o}}function Eo(o,i){return{type:"child_added",snapshotNode:i,childName:o}}function ns(o,i){return{type:"child_removed",snapshotNode:i,childName:o}}function Co(o,i,a){return{type:"child_changed",snapshotNode:i,childName:o,oldSnap:a}}var $a=function(){function o(i){this.index_=i}return o.prototype.updateChild=function(i,a,c,g,v,C){(0,I.hu)(i.isIndexed(this.index_),"A node must be indexed if only a child is updated");var T=i.getImmediateChild(a);return T.getChild(g).equals(c.getChild(g))&&T.isEmpty()===c.isEmpty()||(null!=C&&(c.isEmpty()?i.hasChild(a)?C.trackChildChange(ns(a,T)):(0,I.hu)(i.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):T.isEmpty()?C.trackChildChange(Eo(a,c)):C.trackChildChange(Co(a,c,T))),i.isLeafNode()&&c.isEmpty())?i:i.updateImmediateChild(a,c).withIndex(this.index_)},o.prototype.updateFullNode=function(i,a,c){return null!=c&&(i.isLeafNode()||i.forEachChild(Vt,function(g,v){a.hasChild(g)||c.trackChildChange(ns(g,v))}),a.isLeafNode()||a.forEachChild(Vt,function(g,v){if(i.hasChild(g)){var C=i.getImmediateChild(g);C.equals(v)||c.trackChildChange(Co(g,v,C))}else c.trackChildChange(Eo(g,v))})),a.withIndex(this.index_)},o.prototype.updatePriority=function(i,a){return i.isEmpty()?et.EMPTY_NODE:i.updatePriority(a)},o.prototype.filtersNodes=function(){return!1},o.prototype.getIndexedFilter=function(){return this},o.prototype.getIndex=function(){return this.index_},o}(),Qu=function(){function o(i){this.indexedFilter_=new $a(i.getIndex()),this.index_=i.getIndex(),this.startPost_=o.getStartPost_(i),this.endPost_=o.getEndPost_(i)}return o.prototype.getStartPost=function(){return this.startPost_},o.prototype.getEndPost=function(){return this.endPost_},o.prototype.matches=function(i){return this.index_.compare(this.getStartPost(),i)<=0&&this.index_.compare(i,this.getEndPost())<=0},o.prototype.updateChild=function(i,a,c,g,v,C){return this.matches(new vt(a,c))||(c=et.EMPTY_NODE),this.indexedFilter_.updateChild(i,a,c,g,v,C)},o.prototype.updateFullNode=function(i,a,c){a.isLeafNode()&&(a=et.EMPTY_NODE);var g=a.withIndex(this.index_);g=g.updatePriority(et.EMPTY_NODE);var v=this;return a.forEachChild(Vt,function(C,T){v.matches(new vt(C,T))||(g=g.updateImmediateChild(C,et.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(i,g,c)},o.prototype.updatePriority=function(i,a){return i},o.prototype.filtersNodes=function(){return!0},o.prototype.getIndexedFilter=function(){return this.indexedFilter_},o.prototype.getIndex=function(){return this.index_},o.getStartPost_=function(i){if(i.hasStart()){var a=i.getIndexStartName();return i.getIndex().makePost(i.getIndexStartValue(),a)}return i.getIndex().minPost()},o.getEndPost_=function(i){if(i.hasEnd()){var a=i.getIndexEndName();return i.getIndex().makePost(i.getIndexEndValue(),a)}return i.getIndex().maxPost()},o}(),ve=function(){function o(i){this.rangedFilter_=new Qu(i),this.index_=i.getIndex(),this.limit_=i.getLimit(),this.reverse_=!i.isViewFromLeft()}return o.prototype.updateChild=function(i,a,c,g,v,C){return this.rangedFilter_.matches(new vt(a,c))||(c=et.EMPTY_NODE),i.getImmediateChild(a).equals(c)?i:i.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(i,a,c,g,v,C):this.fullLimitUpdateChild_(i,a,c,v,C)},o.prototype.updateFullNode=function(i,a,c){var g;if(a.isLeafNode()||a.isEmpty())g=et.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<a.numChildren()&&a.isIndexed(this.index_)){g=et.EMPTY_NODE.withIndex(this.index_);var v=void 0;v=this.reverse_?a.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var C=0;v.hasNext()&&C<this.limit_;){var T=v.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),T)<=0:this.index_.compare(T,this.rangedFilter_.getEndPost())<=0))break;g=g.updateImmediateChild(T.name,T.node),C++}}else{g=(g=a.withIndex(this.index_)).updatePriority(et.EMPTY_NODE);var P=void 0,O=void 0,Z=void 0;if(v=void 0,this.reverse_){v=g.getReverseIterator(this.index_),P=this.rangedFilter_.getEndPost(),O=this.rangedFilter_.getStartPost();var ie=this.index_.getCompare();Z=function(Ge,dt){return ie(dt,Ge)}}else v=g.getIterator(this.index_),P=this.rangedFilter_.getStartPost(),O=this.rangedFilter_.getEndPost(),Z=this.index_.getCompare();C=0;for(var De=!1;v.hasNext();)T=v.getNext(),!De&&Z(P,T)<=0&&(De=!0),De&&C<this.limit_&&Z(T,O)<=0?C++:g=g.updateImmediateChild(T.name,et.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(i,g,c)},o.prototype.updatePriority=function(i,a){return i},o.prototype.filtersNodes=function(){return!0},o.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},o.prototype.getIndex=function(){return this.index_},o.prototype.fullLimitUpdateChild_=function(i,a,c,g,v){var C;if(this.reverse_){var T=this.index_.getCompare();C=function(dn,ii){return T(ii,dn)}}else C=this.index_.getCompare();var A=i;(0,I.hu)(A.numChildren()===this.limit_,"");var P=new vt(a,c),O=this.reverse_?A.getFirstChild(this.index_):A.getLastChild(this.index_),Z=this.rangedFilter_.matches(P);if(A.hasChild(a)){for(var ie=A.getImmediateChild(a),De=g.getChildAfterChild(this.index_,O,this.reverse_);null!=De&&(De.name===a||A.hasChild(De.name));)De=g.getChildAfterChild(this.index_,De,this.reverse_);var Pe=null==De?1:C(De,P);if(Z&&!c.isEmpty()&&Pe>=0)return null!=v&&v.trackChildChange(Co(a,c,ie)),A.updateImmediateChild(a,c);null!=v&&v.trackChildChange(ns(a,ie));var Ge=A.updateImmediateChild(a,et.EMPTY_NODE);return null!=De&&this.rangedFilter_.matches(De)?(null!=v&&v.trackChildChange(Eo(De.name,De.node)),Ge.updateImmediateChild(De.name,De.node)):Ge}return c.isEmpty()?i:Z&&C(O,P)>=0?(null!=v&&(v.trackChildChange(ns(O.name,O.node)),v.trackChildChange(Eo(a,c))),A.updateImmediateChild(a,c).updateImmediateChild(O.name,et.EMPTY_NODE)):i},o}(),yt=function(){function o(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Vt}return o.prototype.hasStart=function(){return this.startSet_},o.prototype.hasStartAfter=function(){return this.startAfterSet_},o.prototype.hasEndBefore=function(){return this.endBeforeSet_},o.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},o.prototype.getIndexStartValue=function(){return(0,I.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},o.prototype.getIndexStartName=function(){return(0,I.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:U},o.prototype.hasEnd=function(){return this.endSet_},o.prototype.getIndexEndValue=function(){return(0,I.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},o.prototype.getIndexEndName=function(){return(0,I.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:X},o.prototype.hasLimit=function(){return this.limitSet_},o.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},o.prototype.getLimit=function(){return(0,I.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},o.prototype.getIndex=function(){return this.index_},o.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},o.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Vt},o.prototype.copy=function(){var i=new o;return i.limitSet_=this.limitSet_,i.limit_=this.limit_,i.startSet_=this.startSet_,i.indexStartValue_=this.indexStartValue_,i.startNameSet_=this.startNameSet_,i.indexStartName_=this.indexStartName_,i.endSet_=this.endSet_,i.indexEndValue_=this.indexEndValue_,i.endNameSet_=this.endNameSet_,i.indexEndName_=this.indexEndName_,i.index_=this.index_,i.viewFrom_=this.viewFrom_,i},o}();function di(o,i,a){var c=o.copy();return c.startSet_=!0,void 0===i&&(i=null),c.indexStartValue_=i,null!=a?(c.startNameSet_=!0,c.indexStartName_=a):(c.startNameSet_=!1,c.indexStartName_=""),c}function Do(o,i,a){var c=o.copy();return c.endSet_=!0,void 0===i&&(i=null),c.indexEndValue_=i,void 0!==a?(c.endNameSet_=!0,c.indexEndName_=a):(c.endNameSet_=!1,c.indexEndName_=""),c}function os(o,i){var a=o.copy();return a.index_=i,a}function Ga(o){var a,i={};return o.isDefault()||(o.index_===Vt?a="$priority":o.index_===On?a="$value":o.index_===rr?a="$key":((0,I.hu)(o.index_ instanceof vo,"Unrecognized index type!"),a=o.index_.toString()),i.orderBy=(0,I.Pz)(a),o.startSet_&&(i.startAt=(0,I.Pz)(o.indexStartValue_),o.startNameSet_&&(i.startAt+=","+(0,I.Pz)(o.indexStartName_))),o.endSet_&&(i.endAt=(0,I.Pz)(o.indexEndValue_),o.endNameSet_&&(i.endAt+=","+(0,I.Pz)(o.indexEndName_))),o.limitSet_&&(o.isViewFromLeft()?i.limitToFirst=o.limit_:i.limitToLast=o.limit_)),i}function bo(o){var i={};if(o.startSet_&&(i.sp=o.indexStartValue_,o.startNameSet_&&(i.sn=o.indexStartName_)),o.endSet_&&(i.ep=o.indexEndValue_,o.endNameSet_&&(i.en=o.indexEndName_)),o.limitSet_){i.l=o.limit_;var a=o.viewFrom_;""===a&&(a=o.isViewFromLeft()?"l":"r"),i.vf=a}return o.index_!==Vt&&(i.i=o.index_.toString()),i}var ta=function(o){function i(a,c,g,v){var C=o.call(this)||this;return C.repoInfo_=a,C.onDataUpdate_=c,C.authTokenProvider_=g,C.appCheckTokenProvider_=v,C.log_=be("p:rest:"),C.listens_={},C}return(0,G.ZT)(i,o),i.prototype.reportStats=function(a){throw new Error("Method not implemented.")},i.getListenId_=function(a,c){return void 0!==c?"tag$"+c:((0,I.hu)(a._queryParams.isDefault(),"should have a tag if it's not a default query."),a._path.toString())},i.prototype.listen=function(a,c,g,v){var C=this,T=a._path.toString();this.log_("Listen called for "+T+" "+a._queryIdentifier);var A=i.getListenId_(a,g),P={};this.listens_[A]=P;var O=Ga(a._queryParams);this.restRequest_(T+".json",O,function(Z,ie){var De=ie;404===Z&&(De=null,Z=null),null===Z&&C.onDataUpdate_(T,De,!1,g),(0,I.DV)(C.listens_,A)===P&&v(Z?401===Z?"permission_denied":"rest_error:"+Z:"ok",null)})},i.prototype.unlisten=function(a,c){var g=i.getListenId_(a,c);delete this.listens_[g]},i.prototype.get=function(a){var c=this,g=Ga(a._queryParams),v=a._path.toString(),C=new I.BH;return this.restRequest_(v+".json",g,function(T,A){var P=A;404===T&&(P=null,T=null),null===T?(c.onDataUpdate_(v,P,!1,null),C.resolve(P)):C.reject(new Error(P))}),C.promise},i.prototype.refreshAuthToken=function(a){},i.prototype.restRequest_=function(a,c,g){var v=this;return void 0===c&&(c={}),c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(C){var T=(0,G.CR)(C,2),A=T[0],P=T[1];A&&A.accessToken&&(c.auth=A.accessToken),P&&P.token&&(c.ac=P.token);var O=(v.repoInfo_.secure?"https://":"http://")+v.repoInfo_.host+a+"?ns="+v.repoInfo_.namespace+(0,I.xO)(c);v.log_("Sending REST request for "+O);var Z=new XMLHttpRequest;Z.onreadystatechange=function(){if(g&&4===Z.readyState){v.log_("REST Response for "+O+" received. status:",Z.status,"response:",Z.responseText);var ie=null;if(Z.status>=200&&Z.status<300){try{ie=(0,I.cI)(Z.responseText)}catch(De){$e("Failed to parse JSON response for "+O+": "+Z.responseText)}g(null,ie)}else 401!==Z.status&&404!==Z.status&&$e("Got unsuccessful REST response for "+O+" Status: "+Z.status),g(Z.status);g=null}},Z.open("GET",O,!0),Z.send()})},i}(Pn),Fn=function(){function o(){this.rootNode_=et.EMPTY_NODE}return o.prototype.getNode=function(i){return this.rootNode_.getChild(i)},o.prototype.updateSnapshot=function(i,a){this.rootNode_=this.rootNode_.updateChild(i,a)},o}();function or(){return{value:null,children:new Map}}function Fi(o,i,a){if(qe(i))o.value=a,o.children.clear();else if(null!==o.value)o.value=o.value.updateChild(i,a);else{var c=st(i);o.children.has(c)||o.children.set(c,or()),Fi(o.children.get(c),i=wt(i),a)}}function yr(o,i){if(qe(i))return o.value=null,o.children.clear(),!0;if(null!==o.value){if(o.value.isLeafNode())return!1;var a=o.value;return o.value=null,a.forEachChild(Vt,function(v,C){Fi(o,new Rt(v),C)}),yr(o,i)}if(o.children.size>0){var c=st(i);return i=wt(i),o.children.has(c)&&yr(o.children.get(c),i)&&o.children.delete(c),0===o.children.size}return!0}function sr(o,i,a){null!==o.value?a(i,o.value):function(o,i){o.children.forEach(function(a,c){i(c,a)})}(o,function(c,g){sr(g,new Rt(i.toString()+"/"+c),a)})}var ss=function(){function o(i){this.collection_=i,this.last_=null}return o.prototype.get=function(){var i=this.collection_.get(),a=(0,G.pi)({},i);return this.last_&&ye(this.last_,function(c,g){a[c]=a[c]-g}),this.last_=i,a},o}(),za=function(){function o(i,a){this.server_=a,this.statsToReport_={},this.statsListener_=new ss(i);var c=1e4+2e4*Math.random();Qn(this.reportStats_.bind(this),Math.floor(c))}return o.prototype.reportStats_=function(){var i=this,a=this.statsListener_.get(),c={},g=!1;ye(a,function(v,C){C>0&&(0,I.r3)(i.statsToReport_,v)&&(c[v]=C,g=!0)}),g&&this.server_.reportStats(c),Qn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},o}(),Hn=(()=>(function(o){o[o.OVERWRITE=0]="OVERWRITE",o[o.MERGE=1]="MERGE",o[o.ACK_USER_WRITE=2]="ACK_USER_WRITE",o[o.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Hn||(Hn={})),Hn))();function ki(o){return{fromUser:!1,fromServer:!0,queryId:o,tagged:!0}}var Ku=function(){function o(i,a,c){this.path=i,this.affectedTree=a,this.revert=c,this.type=Hn.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return o.prototype.operationForChild=function(i){if(qe(this.path)){if(null!=this.affectedTree.value)return(0,I.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var a=this.affectedTree.subtree(new Rt(i));return new o(bt(),a,this.revert)}return(0,I.hu)(st(this.path)===i,"operationForChild called for unrelated child."),new o(wt(this.path),this.affectedTree,this.revert)},o}(),Ya=function(){function o(i,a){this.source=i,this.path=a,this.type=Hn.LISTEN_COMPLETE}return o.prototype.operationForChild=function(i){return qe(this.path)?new o(this.source,bt()):new o(this.source,wt(this.path))},o}(),as=function(){function o(i,a,c){this.source=i,this.path=a,this.snap=c,this.type=Hn.OVERWRITE}return o.prototype.operationForChild=function(i){return qe(this.path)?new o(this.source,bt(),this.snap.getImmediateChild(i)):new o(this.source,wt(this.path),this.snap)},o}(),Ka=function(){function o(i,a,c){this.source=i,this.path=a,this.children=c,this.type=Hn.MERGE}return o.prototype.operationForChild=function(i){if(qe(this.path)){var a=this.children.subtree(new Rt(i));return a.isEmpty()?null:a.value?new as(this.source,bt(),a.value):new o(this.source,bt(),a)}return(0,I.hu)(st(this.path)===i,"Can't get a merge for a child not on the path of the operation"),new o(this.source,wt(this.path),this.children)},o.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},o}(),Er=function(){function o(i,a,c){this.node_=i,this.fullyInitialized_=a,this.filtered_=c}return o.prototype.isFullyInitialized=function(){return this.fullyInitialized_},o.prototype.isFiltered=function(){return this.filtered_},o.prototype.isCompleteForPath=function(i){if(qe(i))return this.isFullyInitialized()&&!this.filtered_;var a=st(i);return this.isCompleteForChild(a)},o.prototype.isCompleteForChild=function(i){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(i)},o.prototype.getNode=function(){return this.node_},o}(),Zf=function(i){this.query_=i,this.index_=this.query_._queryParams.getIndex()};function cn(o,i,a,c,g,v){var C=c.filter(function(T){return T.type===a});C.sort(function(T,A){return function(o,i,a){if(null==i.childName||null==a.childName)throw(0,I.g5)("Should only compare child_ events.");var c=new vt(i.childName,i.snapshotNode),g=new vt(a.childName,a.snapshotNode);return o.index_.compare(c,g)}(o,T,A)}),C.forEach(function(T){var A=function(o,i,a){return"value"===i.type||"child_removed"===i.type||(i.prevName=a.getPredecessorChildName(i.childName,i.snapshotNode,o.index_)),i}(o,T,v);g.forEach(function(P){P.respondsTo(T.type)&&i.push(P.createEvent(A,o.query_))})})}function ia(o,i){return{eventCache:o,serverCache:i}}function us(o,i,a,c){return ia(new Er(i,a,c),o.serverCache)}function Zu(o,i,a,c){return ia(o.eventCache,new Er(i,a,c))}function Io(o){return o.eventCache.isFullyInitialized()?o.eventCache.getNode():null}function Li(o){return o.serverCache.isFullyInitialized()?o.serverCache.getNode():null}var ls,Tn=function(){function o(i,a){void 0===a&&(ls||(ls=new xn(Re)),a=ls),this.value=i,this.children=a}return o.fromObject=function(i){var a=new o(null);return ye(i,function(c,g){a=a.set(new Rt(c),g)}),a},o.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},o.prototype.findRootMostMatchingPathAndValue=function(i,a){if(null!=this.value&&a(this.value))return{path:bt(),value:this.value};if(qe(i))return null;var c=st(i),g=this.children.get(c);if(null!==g){var v=g.findRootMostMatchingPathAndValue(wt(i),a);return null!=v?{path:Et(new Rt(c),v.path),value:v.value}:null}return null},o.prototype.findRootMostValueAndPath=function(i){return this.findRootMostMatchingPathAndValue(i,function(){return!0})},o.prototype.subtree=function(i){if(qe(i))return this;var a=st(i),c=this.children.get(a);return null!==c?c.subtree(wt(i)):new o(null)},o.prototype.set=function(i,a){if(qe(i))return new o(a,this.children);var c=st(i),v=(this.children.get(c)||new o(null)).set(wt(i),a),C=this.children.insert(c,v);return new o(this.value,C)},o.prototype.remove=function(i){if(qe(i))return this.children.isEmpty()?new o(null):new o(null,this.children);var a=st(i),c=this.children.get(a);if(c){var g=c.remove(wt(i)),v=void 0;return v=g.isEmpty()?this.children.remove(a):this.children.insert(a,g),null===this.value&&v.isEmpty()?new o(null):new o(this.value,v)}return this},o.prototype.get=function(i){if(qe(i))return this.value;var a=st(i),c=this.children.get(a);return c?c.get(wt(i)):null},o.prototype.setTree=function(i,a){if(qe(i))return a;var C,c=st(i),v=(this.children.get(c)||new o(null)).setTree(wt(i),a);return C=v.isEmpty()?this.children.remove(c):this.children.insert(c,v),new o(this.value,C)},o.prototype.fold=function(i){return this.fold_(bt(),i)},o.prototype.fold_=function(i,a){var c={};return this.children.inorderTraversal(function(g,v){c[g]=v.fold_(Et(i,g),a)}),a(i,this.value,c)},o.prototype.findOnPath=function(i,a){return this.findOnPath_(i,bt(),a)},o.prototype.findOnPath_=function(i,a,c){var g=!!this.value&&c(a,this.value);if(g)return g;if(qe(i))return null;var v=st(i),C=this.children.get(v);return C?C.findOnPath_(wt(i),Et(a,v),c):null},o.prototype.foreachOnPath=function(i,a){return this.foreachOnPath_(i,bt(),a)},o.prototype.foreachOnPath_=function(i,a,c){if(qe(i))return this;this.value&&c(a,this.value);var g=st(i),v=this.children.get(g);return v?v.foreachOnPath_(wt(i),Et(a,g),c):new o(null)},o.prototype.foreach=function(i){this.foreach_(bt(),i)},o.prototype.foreach_=function(i,a){this.children.inorderTraversal(function(c,g){g.foreach_(Et(i,c),a)}),this.value&&a(i,this.value)},o.prototype.foreachChild=function(i){this.children.inorderTraversal(function(a,c){c.value&&i(a,c.value)})},o}(),ar=function(){function o(i){this.writeTree_=i}return o.empty=function(){return new o(new Tn(null))},o}();function Vi(o,i,a){if(qe(i))return new ar(new Tn(a));var c=o.writeTree_.findRootMostValueAndPath(i);if(null!=c){var g=c.path,v=c.value,C=In(g,i);return v=v.updateChild(C,a),new ar(o.writeTree_.set(g,v))}var T=new Tn(a),A=o.writeTree_.setTree(i,T);return new ar(A)}function qa(o,i,a){var c=o;return ye(a,function(g,v){c=Vi(c,Et(i,g),v)}),c}function Rc(o,i){if(qe(i))return ar.empty();var a=o.writeTree_.setTree(i,new Tn(null));return new ar(a)}function kr(o,i){return null!=Cr(o,i)}function Cr(o,i){var a=o.writeTree_.findRootMostValueAndPath(i);return null!=a?o.writeTree_.get(a.path).getChild(In(a.path,i)):null}function Xu(o){var i=[],a=o.writeTree_.value;return null!=a?a.isLeafNode()||a.forEachChild(Vt,function(c,g){i.push(new vt(c,g))}):o.writeTree_.children.inorderTraversal(function(c,g){null!=g.value&&i.push(new vt(c,g.value))}),i}function pi(o,i){if(qe(i))return o;var a=Cr(o,i);return new ar(null!=a?new Tn(a):o.writeTree_.subtree(i))}function To(o){return o.writeTree_.isEmpty()}function gi(o,i){return Mc(bt(),o.writeTree_,i)}function Mc(o,i,a){if(null!=i.value)return a.updateChild(o,i.value);var c=null;return i.children.inorderTraversal(function(g,v){".priority"===g?((0,I.hu)(null!==v.value,"Priority writes must always be leaf nodes"),c=v.value):a=Mc(Et(o,g),v,a)}),!a.getChild(o).isEmpty()&&null!==c&&(a=a.updateChild(Et(o,".priority"),c)),a}function Za(o,i){return Dr(i,o)}function cs(o,i){if(o.snap)return zt(o.path,i);for(var a in o.children)if(o.children.hasOwnProperty(a)&&zt(Et(o.path,a),i))return!0;return!1}function Pc(o){return o.visible}function el(o,i,a){for(var c=ar.empty(),g=0;g<o.length;++g){var v=o[g];if(i(v)){var C=v.path,T=void 0;if(v.snap)zt(a,C)?c=Vi(c,T=In(a,C),v.snap):zt(C,a)&&(T=In(C,a),c=Vi(c,bt(),v.snap.getChild(T)));else{if(!v.children)throw(0,I.g5)("WriteRecord should have .snap or .children");if(zt(a,C))c=qa(c,T=In(a,C),v.children);else if(zt(C,a))if(qe(T=In(C,a)))c=qa(c,bt(),v.children);else{var A=(0,I.DV)(v.children,st(T));if(A){var P=A.getChild(wt(T));c=Vi(c,bt(),P)}}}}}return c}function So(o,i,a,c,g){if(c||g){var A=pi(o.visibleWrites,i);return!g&&To(A)?a:g||null!=a||kr(A,bt())?gi(el(o.allWrites,function(ie){return(ie.visible||g)&&(!c||!~c.indexOf(ie.writeId))&&(zt(ie.path,i)||zt(i,ie.path))},i),a||et.EMPTY_NODE):null}var v=Cr(o.visibleWrites,i);if(null!=v)return v;var C=pi(o.visibleWrites,i);return To(C)?a:null!=a||kr(C,bt())?gi(C,a||et.EMPTY_NODE):null}function hs(o,i,a,c){return So(o.writeTree,o.treePath,i,a,c)}function tl(o,i){return function(o,i,a){var c=et.EMPTY_NODE,g=Cr(o.visibleWrites,i);if(g)return g.isLeafNode()||g.forEachChild(Vt,function(T,A){c=c.updateImmediateChild(T,A)}),c;if(a){var v=pi(o.visibleWrites,i);return a.forEachChild(Vt,function(T,A){var P=gi(pi(v,new Rt(T)),A);c=c.updateImmediateChild(T,P)}),Xu(v).forEach(function(T){c=c.updateImmediateChild(T.name,T.node)}),c}return Xu(pi(o.visibleWrites,i)).forEach(function(T){c=c.updateImmediateChild(T.name,T.node)}),c}(o.writeTree,o.treePath,i)}function xt(o,i,a,c){return function(o,i,a,c,g){(0,I.hu)(c||g,"Either existingEventSnap or existingServerSnap must exist");var v=Et(i,a);if(kr(o.visibleWrites,v))return null;var C=pi(o.visibleWrites,v);return To(C)?g.getChild(a):gi(C,g.getChild(a))}(o.writeTree,o.treePath,i,a,c)}function Qr(o,i){return function(o,i){return Cr(o.visibleWrites,i)}(o.writeTree,Et(o.treePath,i))}function Ao(o,i,a){return function(o,i,a,c){var g=Et(i,a),v=Cr(o.visibleWrites,g);return null!=v?v:c.isCompleteForChild(a)?gi(pi(o.visibleWrites,g),c.getNode().getImmediateChild(a)):null}(o.writeTree,o.treePath,i,a)}function Lr(o,i){return Dr(Et(o.treePath,i),o.writeTree)}function Dr(o,i){return{treePath:o,writeTree:i}}var eu=function(){function o(){this.changeMap=new Map}return o.prototype.trackChildChange=function(i){var a=i.type,c=i.childName;(0,I.hu)("child_added"===a||"child_changed"===a||"child_removed"===a,"Only child changes supported for tracking"),(0,I.hu)(".priority"!==c,"Only non-priority child changes can be tracked.");var g=this.changeMap.get(c);if(g){var v=g.type;if("child_added"===a&&"child_removed"===v)this.changeMap.set(c,Co(c,i.snapshotNode,g.snapshotNode));else if("child_removed"===a&&"child_added"===v)this.changeMap.delete(c);else if("child_removed"===a&&"child_changed"===v)this.changeMap.set(c,ns(c,g.oldSnap));else if("child_changed"===a&&"child_added"===v)this.changeMap.set(c,Eo(c,i.snapshotNode));else{if("child_changed"!==a||"child_changed"!==v)throw(0,I.g5)("Illegal combination of changes: "+i+" occurred after "+g);this.changeMap.set(c,Co(c,i.snapshotNode,g.oldSnap))}}else this.changeMap.set(c,i)},o.prototype.getChanges=function(){return Array.from(this.changeMap.values())},o}(),br=function(){function o(){}return o.prototype.getCompleteChild=function(i){return null},o.prototype.getChildAfterChild=function(i,a,c){return null},o}(),aa=new br,gs=function(){function o(i,a,c){void 0===c&&(c=null),this.writes_=i,this.viewCache_=a,this.optCompleteServerCache_=c}return o.prototype.getCompleteChild=function(i){var a=this.viewCache_.eventCache;if(a.isCompleteForChild(i))return a.getNode().getImmediateChild(i);var c=null!=this.optCompleteServerCache_?new Er(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ao(this.writes_,i,c)},o.prototype.getChildAfterChild=function(i,a,c){var g=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Li(this.viewCache_),v=function(o,i,a,c,g,v){return function(o,i,a,c,g,v,C){var T,A=pi(o.visibleWrites,i),P=Cr(A,bt());if(null!=P)T=P;else{if(null==a)return[];T=gi(A,a)}if((T=T.withIndex(C)).isEmpty()||T.isLeafNode())return[];for(var O=[],Z=C.getCompare(),ie=v?T.getReverseIteratorFrom(c,C):T.getIteratorFrom(c,C),De=ie.getNext();De&&O.length<g;)0!==Z(De,c)&&O.push(De),De=ie.getNext();return O}(o.writeTree,o.treePath,i,a,c,g,v)}(this.writes_,g,a,1,c,i);return 0===v.length?null:v[0]},o}();function ji(o,i,a,c,g,v){var C=i.eventCache;if(null!=Qr(c,a))return i;var T=void 0,A=void 0;if(qe(a))if((0,I.hu)(i.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),i.serverCache.isFiltered()){var P=Li(i),Z=tl(c,P instanceof et?P:et.EMPTY_NODE);T=o.filter.updateFullNode(i.eventCache.getNode(),Z,v)}else{var ie=hs(c,Li(i));T=o.filter.updateFullNode(i.eventCache.getNode(),ie,v)}else{var De=st(a);if(".priority"===De){(0,I.hu)(1===Or(a),"Can't have a priority with additional path components");var Pe=C.getNode(),Je=xt(c,a,Pe,A=i.serverCache.getNode());T=null!=Je?o.filter.updatePriority(Pe,Je):C.getNode()}else{var Ge=wt(a),dt=void 0;if(C.isCompleteForChild(De)){A=i.serverCache.getNode();var dn=xt(c,a,C.getNode(),A);dt=null!=dn?C.getNode().getImmediateChild(De).updateChild(Ge,dn):C.getNode().getImmediateChild(De)}else dt=Ao(c,De,i.serverCache);T=null!=dt?o.filter.updateChild(C.getNode(),De,dt,Ge,g,v):C.getNode()}}return us(i,T,C.isFullyInitialized()||qe(a),o.filter.filtersNodes())}function Ro(o,i,a,c,g,v,C,T){var P,A=i.serverCache,O=C?o.filter:o.filter.getIndexedFilter();if(qe(a))P=O.updateFullNode(A.getNode(),c,null);else if(O.filtersNodes()&&!A.isFiltered()){var Z=A.getNode().updateChild(a,c);P=O.updateFullNode(A.getNode(),Z,null)}else{var ie=st(a);if(!A.isCompleteForPath(a)&&Or(a)>1)return i;var De=wt(a),Je=A.getNode().getImmediateChild(ie).updateChild(De,c);P=".priority"===ie?O.updatePriority(A.getNode(),Je):O.updateChild(A.getNode(),ie,Je,De,aa,null)}var Ge=Zu(i,P,A.isFullyInitialized()||qe(a),O.filtersNodes());return ji(o,Ge,a,g,new gs(g,Ge,v),T)}function la(o,i,a,c,g,v,C){var A,P,T=i.eventCache,O=new gs(g,i,v);if(qe(a))P=o.filter.updateFullNode(i.eventCache.getNode(),c,C),A=us(i,P,!0,o.filter.filtersNodes());else{var Z=st(a);if(".priority"===Z)P=o.filter.updatePriority(i.eventCache.getNode(),c),A=us(i,P,T.isFullyInitialized(),T.isFiltered());else{var ie=wt(a),De=T.getNode().getImmediateChild(Z),Pe=void 0;if(qe(ie))Pe=c;else{var Je=O.getCompleteChild(Z);Pe=null!=Je?".priority"===fo(ie)&&Je.getChild($s(ie)).isEmpty()?Je:Je.updateChild(ie,c):et.EMPTY_NODE}A=De.equals(Pe)?i:us(i,o.filter.updateChild(T.getNode(),Z,Pe,ie,O,C),T.isFullyInitialized(),o.filter.filtersNodes())}}return A}function tu(o,i){return o.eventCache.isCompleteForChild(i)}function nl(o,i,a){return a.foreach(function(c,g){i=i.updateChild(c,g)}),i}function ms(o,i,a,c,g,v,C,T){if(i.serverCache.getNode().isEmpty()&&!i.serverCache.isFullyInitialized())return i;var P,A=i;P=qe(a)?c:new Tn(null).setTree(a,c);var O=i.serverCache.getNode();return P.children.inorderTraversal(function(Z,ie){if(O.hasChild(Z)){var Pe=nl(0,i.serverCache.getNode().getImmediateChild(Z),ie);A=Ro(o,A,new Rt(Z),Pe,g,v,C,T)}}),P.children.inorderTraversal(function(Z,ie){var De=!i.serverCache.isCompleteForChild(Z)&&void 0===ie.value;if(!O.hasChild(Z)&&!De){var Je=nl(0,i.serverCache.getNode().getImmediateChild(Z),ie);A=Ro(o,A,new Rt(Z),Je,g,v,C,T)}}),A}var Po=function(){function o(i,a){this.query_=i,this.eventRegistrations_=[];var c=this.query_._queryParams,g=new $a(c.getIndex()),v=function(o){return o.loadsAllData()?new $a(o.getIndex()):o.hasLimit()?new ve(o):new Qu(o)}(c);this.processor_=function(o){return{filter:o}}(v);var C=a.serverCache,T=a.eventCache,A=g.updateFullNode(et.EMPTY_NODE,C.getNode(),null),P=v.updateFullNode(et.EMPTY_NODE,T.getNode(),null),O=new Er(A,C.isFullyInitialized(),g.filtersNodes()),Z=new Er(P,T.isFullyInitialized(),v.filtersNodes());this.viewCache_=ia(Z,O),this.eventGenerator_=new Zf(this.query_)}return Object.defineProperty(o.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),o}();function Hi(o,i){var a=Li(o.viewCache_);return a&&(o.query._queryParams.loadsAllData()||!qe(i)&&!a.getImmediateChild(st(i)).isEmpty())?a.getChild(i):null}function il(o){return 0===o.eventRegistrations_.length}function ol(o,i,a){var c=[];if(a){(0,I.hu)(null==i,"A cancel should cancel all event registrations.");var g=o.query._path;o.eventRegistrations_.forEach(function(A){var P=A.createCancelEvent(a,g);P&&c.push(P)})}if(i){for(var v=[],C=0;C<o.eventRegistrations_.length;++C){var T=o.eventRegistrations_[C];if(T.matches(i)){if(i.hasAnyCallback()){v=v.concat(o.eventRegistrations_.slice(C+1));break}}else v.push(T)}o.eventRegistrations_=v}else o.eventRegistrations_=[];return c}function Fc(o,i,a,c){i.type===Hn.MERGE&&null!==i.source.queryId&&((0,I.hu)(Li(o.viewCache_),"We should always have a full cache before handling merges"),(0,I.hu)(Io(o.viewCache_),"Missing event cache, even though we have a server cache"));var g=o.viewCache_,v=function(o,i,a,c,g){var C,T,v=new eu;if(a.type===Hn.OVERWRITE){var A=a;A.source.fromUser?C=la(o,i,A.path,A.snap,c,g,v):((0,I.hu)(A.source.fromServer,"Unknown source."),T=A.source.tagged||i.serverCache.isFiltered()&&!qe(A.path),C=Ro(o,i,A.path,A.snap,c,g,T,v))}else if(a.type===Hn.MERGE){var P=a;P.source.fromUser?C=function(o,i,a,c,g,v,C){var T=i;return c.foreach(function(A,P){var O=Et(a,A);tu(i,st(O))&&(T=la(o,T,O,P,g,v,C))}),c.foreach(function(A,P){var O=Et(a,A);tu(i,st(O))||(T=la(o,T,O,P,g,v,C))}),T}(o,i,P.path,P.children,c,g,v):((0,I.hu)(P.source.fromServer,"Unknown source."),T=P.source.tagged||i.serverCache.isFiltered(),C=ms(o,i,P.path,P.children,c,g,T,v))}else if(a.type===Hn.ACK_USER_WRITE){var O=a;C=O.revert?function(o,i,a,c,g,v){var C;if(null!=Qr(c,a))return i;var T=new gs(c,i,g),A=i.eventCache.getNode(),P=void 0;if(qe(a)||".priority"===st(a)){var O=void 0;if(i.serverCache.isFullyInitialized())O=hs(c,Li(i));else{var Z=i.serverCache.getNode();(0,I.hu)(Z instanceof et,"serverChildren would be complete if leaf node"),O=tl(c,Z)}P=o.filter.updateFullNode(A,O=O,v)}else{var ie=st(a),De=Ao(c,ie,i.serverCache);null==De&&i.serverCache.isCompleteForChild(ie)&&(De=A.getImmediateChild(ie)),(P=null!=De?o.filter.updateChild(A,ie,De,wt(a),T,v):i.eventCache.getNode().hasChild(ie)?o.filter.updateChild(A,ie,et.EMPTY_NODE,wt(a),T,v):A).isEmpty()&&i.serverCache.isFullyInitialized()&&(C=hs(c,Li(i))).isLeafNode()&&(P=o.filter.updateFullNode(P,C,v))}return C=i.serverCache.isFullyInitialized()||null!=Qr(c,bt()),us(i,P,C,o.filter.filtersNodes())}(o,i,O.path,c,g,v):function(o,i,a,c,g,v,C){if(null!=Qr(g,a))return i;var T=i.serverCache.isFiltered(),A=i.serverCache;if(null!=c.value){if(qe(a)&&A.isFullyInitialized()||A.isCompleteForPath(a))return Ro(o,i,a,A.getNode().getChild(a),g,v,T,C);if(qe(a)){var P=new Tn(null);return A.getNode().forEachChild(rr,function(Z,ie){P=P.set(new Rt(Z),ie)}),ms(o,i,a,P,g,v,T,C)}return i}var O=new Tn(null);return c.foreach(function(Z,ie){var De=Et(a,Z);A.isCompleteForPath(De)&&(O=O.set(Z,A.getNode().getChild(De)))}),ms(o,i,a,O,g,v,T,C)}(o,i,O.path,O.affectedTree,c,g,v)}else{if(a.type!==Hn.LISTEN_COMPLETE)throw(0,I.g5)("Unknown operation type: "+a.type);C=function(o,i,a,c,g){var v=i.serverCache;return ji(o,Zu(i,v.getNode(),v.isFullyInitialized()||qe(a),v.isFiltered()),a,c,aa,g)}(o,i,a.path,c,v)}var Z=v.getChanges();return function(o,i,a){var c=i.eventCache;if(c.isFullyInitialized()){var g=c.getNode().isLeafNode()||c.getNode().isEmpty(),v=Io(o);(a.length>0||!o.eventCache.isFullyInitialized()||g&&!c.getNode().equals(v)||!c.getNode().getPriority().equals(v.getPriority()))&&a.push(Sc(Io(i)))}}(i,C,Z),{viewCache:C,changes:Z}}(o.processor_,g,i,a,c);return function(o,i){(0,I.hu)(i.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),(0,I.hu)(i.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed")}(o.processor_,v.viewCache),(0,I.hu)(v.viewCache.serverCache.isFullyInitialized()||!g.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),o.viewCache_=v.viewCache,Kt(o,v.changes,v.viewCache.eventCache.getNode(),null)}function Kt(o,i,a,c){return function(o,i,a,c){var g=[],v=[];return i.forEach(function(C){"child_changed"===C.type&&o.index_.indexedValueChanged(C.oldSnap,C.snapshotNode)&&v.push(function(o,i){return{type:"child_moved",snapshotNode:i,childName:o}}(C.childName,C.snapshotNode))}),cn(o,g,"child_removed",i,c,a),cn(o,g,"child_added",i,c,a),cn(o,g,"child_moved",v,c,a),cn(o,g,"child_changed",i,c,a),cn(o,g,"value",i,c,a),g}(o.eventGenerator_,i,a,c?[c]:o.eventRegistrations_)}var nu,Kn,Lc=function(){this.views=new Map};function vs(o,i,a,c){var g,v,C=i.source.queryId;if(null!==C){var T=o.views.get(C);return(0,I.hu)(null!=T,"SyncTree gave us an op for an invalid query."),Fc(T,i,a,c)}var A=[];try{for(var P=(0,G.XA)(o.views.values()),O=P.next();!O.done;O=P.next())A=A.concat(Fc(T=O.value,i,a,c))}catch(Z){g={error:Z}}finally{try{O&&!O.done&&(v=P.return)&&v.call(P)}finally{if(g)throw g.error}}return A}function al(o,i,a,c,g){var C=o.views.get(i._queryIdentifier);if(!C){var T=hs(a,g?c:null),A=!1;T?A=!0:c instanceof et?(T=tl(a,c),A=!1):(T=et.EMPTY_NODE,A=!1);var P=ia(new Er(T,A,!1),new Er(c,g,!1));return new Po(i,P)}return C}function rn(o){var i,a,c=[];try{for(var g=(0,G.XA)(o.views.values()),v=g.next();!v.done;v=g.next()){var C=v.value;C.query._queryParams.loadsAllData()||c.push(C)}}catch(T){i={error:T}}finally{try{v&&!v.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return c}function Ar(o,i){var a,c,g=null;try{for(var v=(0,G.XA)(o.views.values()),C=v.next();!C.done;C=v.next())g=g||Hi(C.value,i)}catch(A){a={error:A}}finally{try{C&&!C.done&&(c=v.return)&&c.call(v)}finally{if(a)throw a.error}}return g}function No(o,i){return i._queryParams.loadsAllData()?kn(o):o.views.get(i._queryIdentifier)}function ed(o,i){return null!=No(o,i)}function mi(o){return null!=kn(o)}function kn(o){var i,a;try{for(var c=(0,G.XA)(o.views.values()),g=c.next();!g.done;g=c.next()){var v=g.value;if(v.query._queryParams.loadsAllData())return v}}catch(C){i={error:C}}finally{try{g&&!g.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return null}var Yr=1,fa=function(i){this.listenProvider_=i,this.syncPointTree_=new Tn(null),this.pendingWriteTree_={visibleWrites:ar.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Wi(o,i,a,c,g){return function(o,i,a,c,g){(0,I.hu)(c>o.lastWriteId,"Stacking an older write on top of newer ones"),void 0===g&&(g=!0),o.allWrites.push({path:i,snap:a,writeId:c,visible:g}),g&&(o.visibleWrites=Vi(o.visibleWrites,i,a)),o.lastWriteId=c}(o.pendingWriteTree_,i,a,c,g),g?Oo(o,new as({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},i,a)):[]}function vi(o,i,a){void 0===a&&(a=!1);var c=function(o,i){for(var a=0;a<o.allWrites.length;a++){var c=o.allWrites[a];if(c.writeId===i)return c}return null}(o.pendingWriteTree_,i);if(function(o,i){var a=o.allWrites.findIndex(function(P){return P.writeId===i});(0,I.hu)(a>=0,"removeWrite called with nonexistent writeId.");var c=o.allWrites[a];o.allWrites.splice(a,1);for(var g=c.visible,v=!1,C=o.allWrites.length-1;g&&C>=0;){var T=o.allWrites[C];T.visible&&(C>=a&&cs(T,c.path)?g=!1:zt(c.path,T.path)&&(v=!0)),C--}return!!g&&(v?(function(o){o.visibleWrites=el(o.allWrites,Pc,bt()),o.lastWriteId=o.allWrites.length>0?o.allWrites[o.allWrites.length-1].writeId:-1}(o),!0):(c.snap?o.visibleWrites=Rc(o.visibleWrites,c.path):ye(c.children,function(P){o.visibleWrites=Rc(o.visibleWrites,Et(c.path,P))}),!0))}(o.pendingWriteTree_,i)){var v=new Tn(null);return null!=c.snap?v=v.set(bt(),!0):ye(c.children,function(C){v=v.set(new Rt(C),!0)}),Oo(o,new Ku(c.path,v,a))}return[]}function da(o,i,a){return Oo(o,new as({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i,a))}function Kr(o,i,a,c){var g=i._path,v=o.syncPointTree_.get(g),C=[];if(v&&("default"===i._queryIdentifier||ed(v,i))){var T=function(o,i,a,c){var g,v,C=i._queryIdentifier,T=[],A=[],P=mi(o);if("default"===C)try{for(var O=(0,G.XA)(o.views.entries()),Z=O.next();!Z.done;Z=O.next()){var Pe,ie=(0,G.CR)(Z.value,2),De=ie[0];A=A.concat(ol(Pe=ie[1],a,c)),il(Pe)&&(o.views.delete(De),Pe.query._queryParams.loadsAllData()||T.push(Pe.query))}}catch(Je){g={error:Je}}finally{try{Z&&!Z.done&&(v=O.return)&&v.call(O)}finally{if(g)throw g.error}}else(Pe=o.views.get(C))&&(A=A.concat(ol(Pe,a,c)),il(Pe)&&(o.views.delete(C),Pe.query._queryParams.loadsAllData()||T.push(Pe.query)));return P&&!mi(o)&&T.push(new((0,I.hu)(nu,"Reference.ts has not been loaded"),nu)(i._repo,i._path)),{removed:T,events:A}}(v,i,a,c);(function(o){return 0===o.views.size})(v)&&(o.syncPointTree_=o.syncPointTree_.remove(g));var A=T.removed;C=T.events;var P=-1!==A.findIndex(function(dn){return dn._queryParams.loadsAllData()}),O=o.syncPointTree_.findOnPath(g,function(dn,ii){return mi(ii)});if(P&&!O){var Z=o.syncPointTree_.subtree(g);if(!Z.isEmpty())for(var ie=function(o){return o.fold(function(i,a,c){if(a&&mi(a))return[kn(a)];var v=[];return a&&(v=rn(a)),ye(c,function(C,T){v=v.concat(T)}),v})}(Z),De=0;De<ie.length;++De){var Pe=ie[De],Je=Pe.query,Ge=Cs(o,Pe);o.listenProvider_.startListening($n(Je),yi(o,Je),Ge.hashFn,Ge.onComplete)}}!O&&A.length>0&&!c&&(P?o.listenProvider_.stopListening($n(i),null):A.forEach(function(dn){var ii=o.queryToTagMap.get(pa(dn));o.listenProvider_.stopListening($n(dn),ii)})),function(o,i){for(var a=0;a<i.length;++a){var c=i[a];if(!c._queryParams.loadsAllData()){var g=pa(c),v=o.queryToTagMap.get(g);o.queryToTagMap.delete(g),o.tagToQueryMap.delete(v)}}}(o,A)}return C}function cl(o,i,a){var c=i._path,g=null,v=!1;o.syncPointTree_.foreachOnPath(c,function(Je,Ge){var dt=In(Je,c);g=g||Ar(Ge,dt),v=v||mi(Ge)});var T,C=o.syncPointTree_.get(c);C?(v=v||mi(C),g=g||Ar(C,bt())):(C=new Lc,o.syncPointTree_=o.syncPointTree_.set(c,C)),null!=g?T=!0:(T=!1,g=et.EMPTY_NODE,o.syncPointTree_.subtree(c).foreachChild(function(Je,Ge){var dt=Ar(Ge,bt());dt&&(g=g.updateImmediateChild(Je,dt))}));var P=ed(C,i);if(!P&&!i._queryParams.loadsAllData()){var O=pa(i);(0,I.hu)(!o.queryToTagMap.has(O),"View does not exist, but we have a tag");var Z=Yr++;o.queryToTagMap.set(O,Z),o.tagToQueryMap.set(Z,O)}var De=function(o,i,a,c,g,v){var C=al(o,i,c,g,v);return o.views.has(i._queryIdentifier)||o.views.set(i._queryIdentifier,C),function(o,i){o.eventRegistrations_.push(i)}(C,a),function(o,i){var a=o.viewCache_.eventCache,c=[];return a.getNode().isLeafNode()||a.getNode().forEachChild(Vt,function(v,C){c.push(Eo(v,C))}),a.isFullyInitialized()&&c.push(Sc(a.getNode())),Kt(o,c,a.getNode(),i)}(C,a)}(C,i,a,Za(o.pendingWriteTree_,c),g,T);if(!P&&!v){var Pe=No(C,i);De=De.concat(function(o,i,a){var c=i._path,g=yi(o,i),v=Cs(o,a),C=o.listenProvider_.startListening($n(i),g,v.hashFn,v.onComplete),T=o.syncPointTree_.subtree(c);if(g)(0,I.hu)(!mi(T.value),"If we're adding a query, it shouldn't be shadowed");else for(var A=T.fold(function(Z,ie,De){if(!qe(Z)&&ie&&mi(ie))return[kn(ie).query];var Pe=[];return ie&&(Pe=Pe.concat(rn(ie).map(function(Je){return Je.query}))),ye(De,function(Je,Ge){Pe=Pe.concat(Ge)}),Pe}),P=0;P<A.length;++P){var O=A[P];o.listenProvider_.stopListening($n(O),yi(o,O))}return C}(o,i,Pe))}return De}function Es(o,i,a){var g=o.pendingWriteTree_,v=o.syncPointTree_.findOnPath(i,function(C,T){var P=Ar(T,In(C,i));if(P)return P});return So(g,i,v,a,!0)}function Oo(o,i){return ru(i,o.syncPointTree_,null,Za(o.pendingWriteTree_,bt()))}function ru(o,i,a,c){if(qe(o.path))return Fo(o,i,a,c);var g=i.get(bt());null==a&&null!=g&&(a=Ar(g,bt()));var v=[],C=st(o.path),T=o.operationForChild(C),A=i.children.get(C);if(A&&T){var P=a?a.getImmediateChild(C):null,O=Lr(c,C);v=v.concat(ru(T,A,P,O))}return g&&(v=v.concat(vs(g,o,c,a))),v}function Fo(o,i,a,c){var g=i.get(bt());null==a&&null!=g&&(a=Ar(g,bt()));var v=[];return i.children.inorderTraversal(function(C,T){var A=a?a.getImmediateChild(C):null,P=Lr(c,C),O=o.operationForChild(C);O&&(v=v.concat(Fo(O,T,A,P)))}),g&&(v=v.concat(vs(g,o,c,a))),v}function Cs(o,i){var a=i.query,c=yi(o,a);return{hashFn:function(){var g=function(o){return o.viewCache_.serverCache.getNode()}(i)||et.EMPTY_NODE;return g.hash()},onComplete:function(g){if("ok"===g)return c?function(o,i,a){var c=$i(o,a);if(c){var g=Ds(c),v=g.path,C=g.queryId,T=In(v,i);return qr(o,v,new Ya(ki(C),T))}return[]}(o,a._path,c):function(o,i){return Oo(o,new Ya({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i))}(o,a._path);var v=function(o,i){var a="Unknown Error";"too_big"===o?a="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===o?a="Client doesn't have permission to access the desired data.":"unavailable"===o&&(a="The service is unavailable");var c=new Error(o+" at "+i._path.toString()+": "+a);return c.code=o.toUpperCase(),c}(g,a);return Kr(o,a,null,v)}}}function yi(o,i){var a=pa(i);return o.queryToTagMap.get(a)}function pa(o){return o._path.toString()+"$"+o._queryIdentifier}function $i(o,i){return o.tagToQueryMap.get(i)}function Ds(o){var i=o.indexOf("$");return(0,I.hu)(-1!==i&&i<o.length-1,"Bad queryKey."),{queryId:o.substr(i+1),path:new Rt(o.substr(0,i))}}function qr(o,i,a){var c=o.syncPointTree_.get(i);return(0,I.hu)(c,"Missing sync point for query tag that we're tracking"),vs(c,a,Za(o.pendingWriteTree_,i),null)}function $n(o){return o._queryParams.loadsAllData()&&!o._queryParams.isDefault()?new((0,I.hu)(Kn,"Reference.ts has not been loaded"),Kn)(o._repo,o._path):o}var bs=function(){function o(i){this.node_=i}return o.prototype.getImmediateChild=function(i){return new o(this.node_.getImmediateChild(i))},o.prototype.node=function(){return this.node_},o}(),ko=function(){function o(i,a){this.syncTree_=i,this.path_=a}return o.prototype.getImmediateChild=function(i){var a=Et(this.path_,i);return new o(this.syncTree_,a)},o.prototype.node=function(){return Es(this.syncTree_,this.path_)},o}(),on=function(o,i,a){return o&&"object"==typeof o?((0,I.hu)(".sv"in o,"Unexpected leaf node or priority contents"),"string"==typeof o[".sv"]?_a(o[".sv"],i,a):"object"==typeof o[".sv"]?nd(o[".sv"],i):void(0,I.hu)(!1,"Unexpected server value: "+JSON.stringify(o,null,2))):o},_a=function(o,i,a){if("timestamp"===o)return a.timestamp;(0,I.hu)(!1,"Unexpected server value: "+o)},nd=function(o,i,a){o.hasOwnProperty("increment")||(0,I.hu)(!1,"Unexpected server value: "+JSON.stringify(o,null,2));var c=o.increment;"number"!=typeof c&&(0,I.hu)(!1,"Unexpected increment value: "+c);var g=i.node();if((0,I.hu)(null!=g,"Expected ChildrenNode.EMPTY_NODE for nulls"),!g.isLeafNode())return c;var C=g.getValue();return"number"!=typeof C?c:C+c},Ei=function(o,i,a,c){return iu(i,new ko(a,o),c)},Gi=function(o,i,a){return iu(o,new bs(i),a)};function iu(o,i,a){var v,c=o.getPriority().val(),g=on(c,i.getImmediateChild(".priority"),a);if(o.isLeafNode()){var C=o,T=on(C.getValue(),i,a);return T!==C.getValue()||g!==C.getPriority().val()?new mo(T,Qt(g)):o}var A=o;return v=A,g!==A.getPriority().val()&&(v=v.updatePriority(new mo(g))),A.forEachChild(Vt,function(P,O){var Z=iu(O,i.getImmediateChild(P),a);Z!==O&&(v=v.updateImmediateChild(P,Z))}),v}var va=function(i,a,c){void 0===i&&(i=""),void 0===a&&(a=null),void 0===c&&(c={children:{},childCount:0}),this.name=i,this.parent=a,this.node=c};function ws(o,i){for(var a=i instanceof Rt?i:new Rt(i),c=o,g=st(a);null!==g;){var v=(0,I.DV)(c.node.children,g)||{children:{},childCount:0};c=new va(g,c,v),g=st(a=wt(a))}return c}function ur(o){return o.node.value}function Rr(o,i){o.node.value=i,Ss(o)}function Is(o){return o.node.childCount>0}function Ts(o,i){ye(o.node.children,function(a,c){i(new va(a,o,c))})}function ou(o,i,a,c){a&&!c&&i(o),Ts(o,function(g){ou(g,i,!0,c)}),a&&c&&i(o)}function qn(o){return new Rt(null===o.parent?o.name:qn(o.parent)+"/"+o.name)}function Ss(o){null!==o.parent&&function(o,i,a){var c=function(o){return void 0===ur(o)&&!Is(o)}(a),g=(0,I.r3)(o.node.children,i);c&&g?(delete o.node.children[i],o.node.childCount--,Ss(o)):!c&&!g&&(o.node.children[i]=a.node,o.node.childCount++,Ss(o))}(o.parent,o.name,o)}var As=/[\[\].#$\/\u0000-\u001F\u007F]/,Zr=/[\[\].#$\u0000-\u001F\u007F]/,Qi=10485760,Ln=function(o){return"string"==typeof o&&0!==o.length&&!As.test(o)},au=function(o){return"string"==typeof o&&0!==o.length&&!Zr.test(o)},Lo=function(o){return null===o||"string"==typeof o||"number"==typeof o&&!V(o)||o&&"object"==typeof o&&(0,I.r3)(o,".sv")},Xr=function(o,i,a,c){c&&void 0===i||Vo((0,I.gK)(o,"value"),i,a)},Vo=function(o,i,a){var c=a instanceof Rt?new yc(a,o):a;if(void 0===i)throw new Error(o+"contains undefined "+po(c));if("function"==typeof i)throw new Error(o+"contains a function "+po(c)+" with contents = "+i.toString());if(V(i))throw new Error(o+"contains "+i.toString()+" "+po(c));if("string"==typeof i&&i.length>Qi/3&&(0,I.ug)(i)>Qi)throw new Error(o+"contains a string greater than "+Qi+" utf8 bytes "+po(c)+" ('"+i.substring(0,50)+"...')");if(i&&"object"==typeof i){var g=!1,v=!1;if(ye(i,function(C,T){if(".value"===C)g=!0;else if(".priority"!==C&&".sv"!==C&&(v=!0,!Ln(C)))throw new Error(o+" contains an invalid key ("+C+") "+po(c)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(o,i){o.parts_.length>0&&(o.byteLength_+=1),o.parts_.push(i),o.byteLength_+=(0,I.ug)(i),Hu(o)})(c,C),Vo(o,T,c),function(o){var i=o.parts_.pop();o.byteLength_-=(0,I.ug)(i),o.parts_.length>0&&(o.byteLength_-=1)}(c)}),g&&v)throw new Error(o+' contains ".value" child '+po(c)+" in addition to actual children.")}},hl=function(o,i,a,c){if(!c||void 0!==i){var g=(0,I.gK)(o,"values");if(!i||"object"!=typeof i||Array.isArray(i))throw new Error(g+" must be an object containing the children to replace.");var v=[];ye(i,function(C,T){var A=new Rt(C);if(Vo(g,T,Et(a,A)),".priority"===fo(A)&&!Lo(T))throw new Error(g+"contains an invalid value for '"+A.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");v.push(A)}),function(o,i){var a,c;for(a=0;a<i.length;a++)for(var g=Jt(c=i[a]),v=0;v<g.length;v++)if((".priority"!==g[v]||v!==g.length-1)&&!Ln(g[v]))throw new Error(o+"contains an invalid key ("+g[v]+") in path "+c.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.sort(es);var C=null;for(a=0;a<i.length;a++){if(c=i[a],null!==C&&zt(C,c))throw new Error(o+"contains a path "+C.toString()+" that is ancestor of another path "+c.toString());C=c}}(g,v)}},Bo=function(o,i,a){if(!a||void 0!==i){if(V(i))throw new Error((0,I.gK)(o,"priority")+"is "+i.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Lo(i))throw new Error((0,I.gK)(o,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},lu=function(o,i,a){if(!a||void 0!==i)switch(i){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,I.gK)(o,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Vr=function(o,i,a,c){if(!(c&&void 0===a||Ln(a)))throw new Error((0,I.gK)(o,i)+'was an invalid key = "'+a+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},fn=function(o,i,a,c){if(!(c&&void 0===a||au(a)))throw new Error((0,I.gK)(o,i)+'was an invalid path = "'+a+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},gn=function(o,i){if(".info"===st(i))throw new Error(o+" failed = Can't modify data under /.info/")},Rs=function(o,i){var a=i.path.toString();if("string"!=typeof i.repoInfo.host||0===i.repoInfo.host.length||!Ln(i.repoInfo.namespace)&&"localhost"!==i.repoInfo.host.split(":")[0]||0!==a.length&&!function(o){return o&&(o=o.replace(/^\/*\.info(\/|$)/,"/")),au(o)}(a))throw new Error((0,I.gK)(o,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},fu=function(o,i,a,c){if((!c||void 0!==a)&&"boolean"!=typeof a)throw new Error((0,I.gK)(o,i)+"must be a boolean.")},pl=function(){this.eventLists_=[],this.recursionDepth_=0};function Sn(o,i){for(var a=null,c=0;c<i.length;c++){var g=i[c],v=g.getPath();null!==a&&!ho(v,a.path)&&(o.eventLists_.push(a),a=null),null===a&&(a={events:[],path:v}),a.events.push(g)}a&&o.eventLists_.push(a)}function ya(o,i,a){Sn(o,a),gl(o,function(c){return ho(c,i)})}function mn(o,i,a){Sn(o,a),gl(o,function(c){return zt(c,i)||zt(i,c)})}function gl(o,i){o.recursionDepth_++;for(var a=!0,c=0;c<o.eventLists_.length;c++){var g=o.eventLists_[c];g&&(i(g.path)?(Wc(o.eventLists_[c]),o.eventLists_[c]=null):a=!1)}a&&(o.eventLists_=[]),o.recursionDepth_--}function Wc(o){for(var i=0;i<o.events.length;i++){var a=o.events[i];if(null!==a){o.events[i]=null;var c=a.getEventRunner();Ee&&Te("event: "+a.toString()),bn(c)}}}var ml="repo_interrupt",Ea=function(){function o(i,a,c,g){this.repoInfo_=i,this.forceRestClient_=a,this.authTokenProvider_=c,this.appCheckProvider_=g,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new pl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=or(),this.transactionQueueTree_=new va,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return o.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},o}();function Jr(o){var a=o.infoData_.getNode(new Rt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+a}function Ci(o){return function(o){return(o=o||{}).timestamp=o.timestamp||(new Date).getTime(),o}({timestamp:Jr(o)})}function ei(o,i,a,c,g){o.dataUpdateCount++;var v=new Rt(i);a=o.interceptServerDataCallback_?o.interceptServerDataCallback_(i,a):a;var C=[];if(g)if(c){var T=(0,I.UI)(a,function(ie){return Qt(ie)});C=function(o,i,a,c){var g=$i(o,c);if(g){var v=Ds(g),C=v.path,T=v.queryId,A=In(C,i),P=Tn.fromObject(a);return qr(o,C,new Ka(ki(T),A,P))}return[]}(o.serverSyncTree_,v,T,g)}else{var A=Qt(a);C=function(o,i,a,c){var g=$i(o,c);if(null!=g){var v=Ds(g),C=v.path,T=v.queryId,A=In(C,i);return qr(o,C,new as(ki(T),A,a))}return[]}(o.serverSyncTree_,v,A,g)}else if(c){var P=(0,I.UI)(a,function(ie){return Qt(ie)});C=function(o,i,a){var c=Tn.fromObject(a);return Oo(o,new Ka({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i,c))}(o.serverSyncTree_,v,P)}else{var O=Qt(a);C=da(o.serverSyncTree_,v,O)}var Z=v;C.length>0&&(Z=Zi(o,v)),mn(o.eventQueue_,Z,C)}function vl(o,i){du(o,"connected",i),!1===i&&function(o){Ps(o,"onDisconnectEvents");var i=Ci(o),a=or();sr(o.onDisconnect_,bt(),function(g,v){var C=Ei(g,v,o.serverSyncTree_,i);Fi(a,g,C)});var c=[];sr(a,bt(),function(g,v){c=c.concat(da(o.serverSyncTree_,g,v));var C=Zn(o,g);Zi(o,C)}),o.onDisconnect_=or(),mn(o.eventQueue_,bt(),c)}(o)}function du(o,i,a){var c=new Rt("/.info/"+i),g=Qt(a);o.infoData_.updateSnapshot(c,g);var v=da(o.infoSyncTree_,c,g);mn(o.eventQueue_,c,v)}function Ms(o){return o.nextWriteId_++}function hu(o,i,a,c,g){Ps(o,"set",{path:i.toString(),value:a,priority:c});var v=Ci(o),C=Qt(a,c),T=Es(o.serverSyncTree_,i),A=Gi(C,T,v),P=Ms(o),O=Wi(o.serverSyncTree_,i,A,P,!0);Sn(o.eventQueue_,O),o.server_.put(i.toString(),C.val(!0),function(ie,De){var Pe="ok"===ie;Pe||$e("set at "+i+" failed: "+ie);var Je=vi(o.serverSyncTree_,P,!Pe);mn(o.eventQueue_,i,Je),Ur(0,g,ie,De)});var Z=Zn(o,i);Zi(o,Z),mn(o.eventQueue_,Z,[])}function rd(o,i,a){o.server_.onDisconnectCancel(i.toString(),function(c,g){"ok"===c&&yr(o.onDisconnect_,i),Ur(0,a,c,g)})}function yl(o,i,a,c){var g=Qt(a);o.server_.onDisconnectPut(i.toString(),g.val(!0),function(v,C){"ok"===v&&Fi(o.onDisconnect_,i,g),Ur(0,c,v,C)})}function Ki(o,i,a){var c;c=".info"===st(i._path)?Kr(o.infoSyncTree_,i,a):Kr(o.serverSyncTree_,i,a),ya(o.eventQueue_,i._path,c)}function ba(o){o.persistentConnection_&&o.persistentConnection_.interrupt(ml)}function Ps(o){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];var c="";o.persistentConnection_&&(c=o.persistentConnection_.id+":"),Te.apply(void 0,(0,G.ev)([c],(0,G.CR)(i)))}function Ur(o,i,a,c){i&&bn(function(){if("ok"===a)i(null);else{var g=(a||"error").toUpperCase(),v=g;c&&(v+=": "+c);var C=new Error(v);C.code=g,i(C)}})}function xs(o,i,a){return Es(o.serverSyncTree_,i,a)||et.EMPTY_NODE}function qi(o,i){if(void 0===i&&(i=o.transactionQueueTree_),i||lr(o,i),ur(i)){var a=Cl(o,i);(0,I.hu)(a.length>0,"Sending zero length transaction queue"),a.every(function(g){return 0===g.status})&&function(o,i,a){for(var c=a.map(function(ie){return ie.currentWriteId}),g=xs(o,i,c),v=g,C=g.hash(),T=0;T<a.length;T++){var A=a[T];(0,I.hu)(0===A.status,"tryToSendTransactionQueue_: items in queue should all be run."),A.status=1,A.retryCount++;var P=In(i,A.path);v=v.updateChild(P,A.currentOutputSnapshotRaw)}var O=v.val(!0),Z=i;o.server_.put(Z.toString(),O,function(ie){Ps(o,"transaction put response",{path:Z.toString(),status:ie});var De=[];if("ok"===ie){for(var Pe=[],Je=function(dt){a[dt].status=2,De=De.concat(vi(o.serverSyncTree_,a[dt].currentWriteId)),a[dt].onComplete&&Pe.push(function(){return a[dt].onComplete(null,!0,a[dt].currentOutputSnapshotResolved)}),a[dt].unwatcher()},Ge=0;Ge<a.length;Ge++)Je(Ge);for(lr(o,ws(o.transactionQueueTree_,i)),qi(o,o.transactionQueueTree_),mn(o.eventQueue_,i,De),Ge=0;Ge<Pe.length;Ge++)bn(Pe[Ge])}else{if("datastale"===ie)for(Ge=0;Ge<a.length;Ge++)a[Ge].status=3===a[Ge].status?4:0;else for($e("transaction at "+Z.toString()+" failed: "+ie),Ge=0;Ge<a.length;Ge++)a[Ge].status=4,a[Ge].abortReason=ie;Zi(o,i)}},C)}(o,qn(i),a)}else Is(i)&&Ts(i,function(g){qi(o,g)})}function Zi(o,i){var a=_u(o,i),c=qn(a);return function(o,i,a){if(0!==i.length){for(var c=[],g=[],C=i.filter(function(P){return 0===P.status}).map(function(P){return P.currentWriteId}),T=function(P){var De,O=i[P],Z=In(a,O.path),ie=!1;if((0,I.hu)(null!==Z,"rerunTransactionsUnderNode_: relativePath should not be null."),4===O.status)ie=!0,De=O.abortReason,g=g.concat(vi(o.serverSyncTree_,O.currentWriteId,!0));else if(0===O.status)if(O.retryCount>=25)ie=!0,De="maxretry",g=g.concat(vi(o.serverSyncTree_,O.currentWriteId,!0));else{var Pe=xs(o,O.path,C);O.currentInputSnapshot=Pe;var Je=i[P].update(Pe.val());if(void 0!==Je){Vo("transaction failed: Data returned ",Je,O.path);var Ge=Qt(Je);"object"==typeof Je&&null!=Je&&(0,I.r3)(Je,".priority")||(Ge=Ge.updatePriority(Pe.getPriority()));var dn=O.currentWriteId,ii=Ci(o),uf=Gi(Ge,Pe,ii);O.currentOutputSnapshotRaw=Ge,O.currentOutputSnapshotResolved=uf,O.currentWriteId=Ms(o),C.splice(C.indexOf(dn),1),g=(g=g.concat(Wi(o.serverSyncTree_,O.path,uf,O.currentWriteId,O.applyLocally))).concat(vi(o.serverSyncTree_,dn,!0))}else ie=!0,De="nodata",g=g.concat(vi(o.serverSyncTree_,O.currentWriteId,!0))}mn(o.eventQueue_,a,g),g=[],ie&&(i[P].status=2,setTimeout(i[P].unwatcher,Math.floor(0)),i[P].onComplete&&c.push("nodata"===De?function(){return i[P].onComplete(null,!1,i[P].currentInputSnapshot)}:function(){return i[P].onComplete(new Error(De),!1,null)}))},A=0;A<i.length;A++)T(A);for(lr(o,o.transactionQueueTree_),A=0;A<c.length;A++)bn(c[A]);qi(o,o.transactionQueueTree_)}}(o,Cl(o,a),c),c}function _u(o,i){var a,c=o.transactionQueueTree_;for(a=st(i);null!==a&&void 0===ur(c);)c=ws(c,a),a=st(i=wt(i));return c}function Cl(o,i){var a=[];return Dl(o,i,a),a.sort(function(c,g){return c.order-g.order}),a}function Dl(o,i,a){var c=ur(i);if(c)for(var g=0;g<c.length;g++)a.push(c[g]);Ts(i,function(v){Dl(o,v,a)})}function lr(o,i){var a=ur(i);if(a){for(var c=0,g=0;g<a.length;g++)2!==a[g].status&&(a[c]=a[g],c++);a.length=c,Rr(i,a.length>0?a:void 0)}Ts(i,function(v){lr(o,v)})}function Zn(o,i){var a=qn(_u(o,i)),c=ws(o.transactionQueueTree_,i);return function(o,i,a){for(var c=o.parent;null!==c;){if(i(c))return!0;c=c.parent}}(c,function(g){ti(o,g)}),ti(o,c),ou(c,function(g){ti(o,g)}),a}function ti(o,i){var a=ur(i);if(a){for(var c=[],g=[],v=-1,C=0;C<a.length;C++)3===a[C].status||(1===a[C].status?((0,I.hu)(v===C-1,"All SENT items should be at beginning of queue."),v=C,a[C].status=3,a[C].abortReason="set"):((0,I.hu)(0===a[C].status,"Unexpected transaction status in abort"),a[C].unwatcher(),g=g.concat(vi(o.serverSyncTree_,a[C].currentWriteId,!0)),a[C].onComplete&&c.push(a[C].onComplete.bind(null,new Error("set"),!1,null))));for(-1===v?Rr(i,void 0):a.length=v+1,mn(o.eventQueue_,qn(i),g),C=0;C<c.length;C++)bn(c[C])}}var Di=function(o,i){var a=Ht(o),c=a.namespace;return"firebase.com"===a.domain&&je(a.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!c||"undefined"===c)&&"localhost"!==a.domain&&je("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),a.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&$e("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new qt(a.host,a.secure,c,i,"ws"===a.scheme||"wss"===a.scheme,"",c!==a.subdomain),path:new Rt(a.pathString)}},Ht=function(o){var i="",a="",c="",g="",v="",C=!0,T="https",A=443;if("string"==typeof o){var P=o.indexOf("//");P>=0&&(T=o.substring(0,P-1),o=o.substring(P+2));var O=o.indexOf("/");-1===O&&(O=o.length);var Z=o.indexOf("?");-1===Z&&(Z=o.length),i=o.substring(0,Math.min(O,Z)),O<Z&&(g=function(o){for(var i="",a=o.split("/"),c=0;c<a.length;c++)if(a[c].length>0){var g=a[c];try{g=decodeURIComponent(g.replace(/\+/g," "))}catch(v){}i+="/"+g}return i}(o.substring(O,Z)));var ie=function(o){var i,a,c={};"?"===o.charAt(0)&&(o=o.substring(1));try{for(var g=(0,G.XA)(o.split("&")),v=g.next();!v.done;v=g.next()){var C=v.value;if(0!==C.length){var T=C.split("=");2===T.length?c[decodeURIComponent(T[0])]=decodeURIComponent(T[1]):$e("Invalid query segment '"+C+"' in query '"+o+"'")}}}catch(A){i={error:A}}finally{try{v&&!v.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return c}(o.substring(Math.min(o.length,Z)));(P=i.indexOf(":"))>=0?(C="https"===T||"wss"===T,A=parseInt(i.substring(P+1),10)):P=i.length;var De=i.slice(0,P);if("localhost"===De.toLowerCase())a="localhost";else if(De.split(".").length<=2)a=De;else{var Pe=i.indexOf(".");c=i.substring(0,Pe).toLowerCase(),a=i.substring(Pe+1),v=c}"ns"in ie&&(v=ie.ns)}return{host:i,port:A,domain:a,subdomain:c,secure:C,scheme:T,pathString:g,namespace:v}},yu=function(){function o(i,a,c,g){this.eventType=i,this.eventRegistration=a,this.snapshot=c,this.prevName=g}return o.prototype.getPath=function(){var i=this.snapshot.ref;return"value"===this.eventType?i._path:i.parent._path},o.prototype.getEventType=function(){return this.eventType},o.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},o.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,I.Pz)(this.snapshot.exportVal())},o}(),wl=function(){function o(i,a,c){this.eventRegistration=i,this.error=a,this.path=c}return o.prototype.getPath=function(){return this.path},o.prototype.getEventType=function(){return"cancel"},o.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},o.prototype.toString=function(){return this.path.toString()+":cancel"},o}(),Eu=function(){function o(i,a){this.snapshotCallback=i,this.cancelCallback=a}return o.prototype.onValue=function(i,a){this.snapshotCallback.call(null,i,a)},o.prototype.onCancel=function(i){return(0,I.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,i)},Object.defineProperty(o.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),o.prototype.matches=function(i){return this.snapshotCallback===i.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===i.snapshotCallback.userCallback&&this.snapshotCallback.context===i.snapshotCallback.context},o}(),Il=function(){function o(i,a){this._repo=i,this._path=a}return o.prototype.cancel=function(){var i=new I.BH;return rd(this._repo,this._path,i.wrapCallback(function(){})),i.promise},o.prototype.remove=function(){gn("OnDisconnect.remove",this._path);var i=new I.BH;return yl(this._repo,this._path,null,i.wrapCallback(function(){})),i.promise},o.prototype.set=function(i){gn("OnDisconnect.set",this._path),Xr("OnDisconnect.set",i,this._path,!1);var a=new I.BH;return yl(this._repo,this._path,i,a.wrapCallback(function(){})),a.promise},o.prototype.setWithPriority=function(i,a){gn("OnDisconnect.setWithPriority",this._path),Xr("OnDisconnect.setWithPriority",i,this._path,!1),Bo("OnDisconnect.setWithPriority",a,!1);var c=new I.BH;return function(o,i,a,c,g){var v=Qt(a,c);o.server_.onDisconnectPut(i.toString(),v.val(!0),function(C,T){"ok"===C&&Fi(o.onDisconnect_,i,v),Ur(0,g,C,T)})}(this._repo,this._path,i,a,c.wrapCallback(function(){})),c.promise},o.prototype.update=function(i){gn("OnDisconnect.update",this._path),hl("OnDisconnect.update",i,this._path,!1);var a=new I.BH;return function(o,i,a,c){if((0,I.xb)(a))return Te("onDisconnect().update() called with empty data.  Don't do anything."),void Ur(0,c,"ok",void 0);o.server_.onDisconnectMerge(i.toString(),a,function(g,v){"ok"===g&&ye(a,function(C,T){var A=Qt(T);Fi(o.onDisconnect_,Et(i,C),A)}),Ur(0,c,g,v)})}(this._repo,this._path,i,a.wrapCallback(function(){})),a.promise},o}(),cr=function(){function o(i,a,c,g){this._repo=i,this._path=a,this._queryParams=c,this._orderByCalled=g}return Object.defineProperty(o.prototype,"key",{get:function(){return qe(this._path)?null:fo(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"ref",{get:function(){return new Xn(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_queryIdentifier",{get:function(){var i=bo(this._queryParams),a=Pt(i);return"{}"===a?"default":a},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_queryObject",{get:function(){return bo(this._queryParams)},enumerable:!1,configurable:!0}),o.prototype.isEqual=function(i){if(!((i=(0,I.m9)(i))instanceof o))return!1;var a=this._repo===i._repo,c=ho(this._path,i._path);return a&&c&&this._queryIdentifier===i._queryIdentifier},o.prototype.toJSON=function(){return this.toString()},o.prototype.toString=function(){return this._repo.toString()+function(o){for(var i="",a=o.pieceNum_;a<o.pieces_.length;a++)""!==o.pieces_[a]&&(i+="/"+encodeURIComponent(String(o.pieces_[a])));return i||"/"}(this._path)},o}();function wa(o,i){if(!0===o._orderByCalled)throw new Error(i+": You can't combine multiple orderBy calls.")}function ni(o){var i=null,a=null;if(o.hasStart()&&(i=o.getIndexStartValue()),o.hasEnd()&&(a=o.getIndexEndValue()),o.getIndex()===rr){var c="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",g="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(o.hasStart()){if(o.getIndexStartName()!==U)throw new Error(c);if("string"!=typeof i)throw new Error(g)}if(o.hasEnd()){if(o.getIndexEndName()!==X)throw new Error(c);if("string"!=typeof a)throw new Error(g)}}else if(o.getIndex()===Vt){if(null!=i&&!Lo(i)||null!=a&&!Lo(a))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,I.hu)(o.getIndex()instanceof vo||o.getIndex()===On,"unknown index type."),null!=i&&"object"==typeof i||null!=a&&"object"==typeof a)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ia(o){if(o.hasStart()&&o.hasEnd()&&o.hasLimit()&&!o.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Xn=function(o){function i(a,c){return o.call(this,a,c,new yt,!1)||this}return(0,G.ZT)(i,o),Object.defineProperty(i.prototype,"parent",{get:function(){var a=$s(this._path);return null===a?null:new i(this._repo,a)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"root",{get:function(){for(var a=this;null!==a.parent;)a=a.parent;return a},enumerable:!1,configurable:!0}),i}(cr),Ns=function(){function o(i,a,c){this._node=i,this.ref=a,this._index=c}return Object.defineProperty(o.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),o.prototype.child=function(i){var a=new Rt(i),c=nn(this.ref,i);return new o(this._node.getChild(a),c,Vt)},o.prototype.exists=function(){return!this._node.isEmpty()},o.prototype.exportVal=function(){return this._node.val(!0)},o.prototype.forEach=function(i){var a=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(g,v){return i(new o(v,nn(a.ref,g),Vt))})},o.prototype.hasChild=function(i){var a=new Rt(i);return!this._node.getChild(a).isEmpty()},o.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},o.prototype.toJSON=function(){return this.exportVal()},o.prototype.val=function(){return this._node.val()},o}();function Yc(o,i){return(o=(0,I.m9)(o))._checkNotDeleted("ref"),void 0!==i?nn(o._root,i):o._root}function jo(o,i){(o=(0,I.m9)(o))._checkNotDeleted("refFromURL");var a=Di(i,o._repo.repoInfo_.nodeAdmin);Rs("refFromURL",a);var c=a.repoInfo;return!o._repo.repoInfo_.isCustomHost()&&c.host!==o._repo.repoInfo_.host&&je("refFromURL: Host name does not match the current database: (found "+c.host+" but expected "+o._repo.repoInfo_.host+")"),Yc(o,a.path.toString())}function nn(o,i){return null===st((o=(0,I.m9)(o))._path)?(a=i,a&&(a=a.replace(/^\/*\.info(\/|$)/,"/")),fn("child","path",a,!1)):fn("child","path",i,!1),new Xn(o._repo,Et(o._path,i));var a}function Cu(o,i){o=(0,I.m9)(o),gn("push",o._path),Xr("push",i,o._path,!0);var C,a=Jr(o._repo),c=Tc(a),g=nn(o,c),v=nn(o,c);return C=null!=i?ri(v,i).then(function(){return v}):Promise.resolve(v),g.then=C.then.bind(C),g.catch=C.then.bind(C,void 0),g}function Tl(o){return gn("remove",o._path),ri(o,null)}function ri(o,i){o=(0,I.m9)(o),gn("set",o._path),Xr("set",i,o._path,!1);var a=new I.BH;return hu(o._repo,o._path,i,null,a.wrapCallback(function(){})),a.promise}function Cn(o,i){o=(0,I.m9)(o),gn("setPriority",o._path),Bo("setPriority",i,!1);var a=new I.BH;return hu(o._repo,Et(o._path,".priority"),i,null,a.wrapCallback(function(){})),a.promise}function bi(o,i,a){if(gn("setWithPriority",o._path),Xr("setWithPriority",i,o._path,!1),Bo("setWithPriority",a,!1),".length"===o.key||".keys"===o.key)throw"setWithPriority failed: "+o.key+" is a read-only object.";var c=new I.BH;return hu(o._repo,o._path,i,a,c.wrapCallback(function(){})),c.promise}function Du(o,i){hl("update",i,o._path,!1);var a=new I.BH;return function(o,i,a,c){Ps(o,"update",{path:i.toString(),value:a});var g=!0,v=Ci(o),C={};if(ye(a,function(P,O){g=!1,C[P]=Ei(Et(i,P),Qt(O),o.serverSyncTree_,v)}),g)Te("update() called with empty data.  Don't do anything."),Ur(0,c,"ok",void 0);else{var T=Ms(o),A=function(o,i,a,c){!function(o,i,a,c){(0,I.hu)(c>o.lastWriteId,"Stacking an older merge on top of newer ones"),o.allWrites.push({path:i,children:a,writeId:c,visible:!0}),o.visibleWrites=qa(o.visibleWrites,i,a),o.lastWriteId=c}(o.pendingWriteTree_,i,a,c);var g=Tn.fromObject(a);return Oo(o,new Ka({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},i,g))}(o.serverSyncTree_,i,C,T);Sn(o.eventQueue_,A),o.server_.merge(i.toString(),a,function(P,O){var Z="ok"===P;Z||$e("update at "+i+" failed: "+P);var ie=vi(o.serverSyncTree_,T,!Z),De=ie.length>0?Zi(o,i):i;mn(o.eventQueue_,De,ie),Ur(0,c,P,O)}),ye(a,function(P){var O=Zn(o,Et(i,P));Zi(o,O)}),mn(o.eventQueue_,i,[])}}(o._repo,o._path,i,a.wrapCallback(function(){})),a.promise}function Kc(o){return function(o,i){var a=function(o,i){var a=i._path,c=null;o.syncPointTree_.foreachOnPath(a,function(P,O){var Z=In(P,a);c=c||Ar(O,Z)});var g=o.syncPointTree_.get(a);g?c=c||Ar(g,bt()):(g=new Lc,o.syncPointTree_=o.syncPointTree_.set(a,g));var v=null!=c,C=v?new Er(c,!0,!1):null;return function(o){return Io(o.viewCache_)}(al(g,i,Za(o.pendingWriteTree_,i._path),v?C.getNode():et.EMPTY_NODE,v))}(o.serverSyncTree_,i);return null!=a?Promise.resolve(a):o.server_.get(i).then(function(c){var g=Qt(c).withIndex(i._queryParams.getIndex()),v=da(o.serverSyncTree_,i._path,g);return ya(o.eventQueue_,i._path,v),Promise.resolve(g)},function(c){return Ps(o,"get for query "+(0,I.Pz)(i)+" failed: "+c),Promise.reject(new Error(c))})}((o=(0,I.m9)(o))._repo,o).then(function(i){return new Ns(i,new Xn(o._repo,o._path),o._queryParams.getIndex())})}var bu=function(){function o(i){this.callbackContext=i}return o.prototype.respondsTo=function(i){return"value"===i},o.prototype.createEvent=function(i,a){var c=a._queryParams.getIndex();return new yu("value",this,new Ns(i.snapshotNode,new Xn(a._repo,a._path),c))},o.prototype.getEventRunner=function(i){var a=this;return"cancel"===i.getEventType()?function(){return a.callbackContext.onCancel(i.error)}:function(){return a.callbackContext.onValue(i.snapshot,null)}},o.prototype.createCancelEvent=function(i,a){return this.callbackContext.hasCancelCallback?new wl(this,i,a):null},o.prototype.matches=function(i){return i instanceof o&&(!i.callbackContext||!this.callbackContext||i.callbackContext.matches(this.callbackContext))},o.prototype.hasAnyCallback=function(){return null!==this.callbackContext},o}(),Ta=function(){function o(i,a){this.eventType=i,this.callbackContext=a}return o.prototype.respondsTo=function(i){var a="children_added"===i?"child_added":i;return this.eventType===("children_removed"===a?"child_removed":a)},o.prototype.createCancelEvent=function(i,a){return this.callbackContext.hasCancelCallback?new wl(this,i,a):null},o.prototype.createEvent=function(i,a){(0,I.hu)(null!=i.childName,"Child events should have a childName.");var c=nn(new Xn(a._repo,a._path),i.childName),g=a._queryParams.getIndex();return new yu(i.type,this,new Ns(i.snapshotNode,c,g),i.prevName)},o.prototype.getEventRunner=function(i){var a=this;return"cancel"===i.getEventType()?function(){return a.callbackContext.onCancel(i.error)}:function(){return a.callbackContext.onValue(i.snapshot,i.prevName)}},o.prototype.matches=function(i){return i instanceof o&&this.eventType===i.eventType&&(!this.callbackContext||!i.callbackContext||this.callbackContext.matches(i.callbackContext))},o.prototype.hasAnyCallback=function(){return!!this.callbackContext},o}();function Os(o,i,a,c,g){var v;if("object"==typeof c&&(v=void 0,g=c),"function"==typeof c&&(v=c),g&&g.onlyOnce){var C=a,T=function(O,Z){Ki(o._repo,o,P),C(O,Z)};T.userCallback=a.userCallback,T.context=a.context,a=T}var A=new Eu(a,v||void 0),P="value"===i?new bu(A):new Ta(i,A);return function(o,i,a){var c;c=".info"===st(i._path)?cl(o.infoSyncTree_,i,a):cl(o.serverSyncTree_,i,a),ya(o.eventQueue_,i._path,c)}(o._repo,o,P),function(){return Ki(o._repo,o,P)}}function Sa(o,i,a,c){return Os(o,"value",i,a,c)}function Sl(o,i,a,c){return Os(o,"child_added",i,a,c)}function wu(o,i,a,c){return Os(o,"child_changed",i,a,c)}function Iu(o,i,a,c){return Os(o,"child_moved",i,a,c)}function Aa(o,i,a,c){return Os(o,"child_removed",i,a,c)}function Al(o,i,a){var c=null,g=a?new Eu(a):null;"value"===i?c=new bu(g):i&&(c=new Ta(i,g)),Ki(o._repo,o,c)}var Jn=function(){},Ra=function(o){function i(a,c){var g=o.call(this)||this;return g._value=a,g._key=c,g}return(0,G.ZT)(i,o),i.prototype._apply=function(a){Xr("endAt",this._value,a._path,!0);var c=Do(a._queryParams,this._value,this._key);if(Ia(c),ni(c),a._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new cr(a._repo,a._path,c,a._orderByCalled)},i}(Jn);function Tu(o,i){return Vr("endAt","key",i,!0),new Ra(o,i)}var qc=function(o){function i(a,c){var g=o.call(this)||this;return g._value=a,g._key=c,g}return(0,G.ZT)(i,o),i.prototype._apply=function(a){Xr("endBefore",this._value,a._path,!1);var c=function(o,i,a){var g;return o.index_===rr?("string"==typeof i&&(i=Ke(i)),g=Do(o,i,a)):g=Do(o,i,null==a?U:Ke(a)),g.endBeforeSet_=!0,g}(a._queryParams,this._value,this._key);if(Ia(c),ni(c),a._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new cr(a._repo,a._path,c,a._orderByCalled)},i}(Jn);function Su(o,i){return Vr("endBefore","key",i,!0),new qc(o,i)}var Au=function(o){function i(a,c){var g=o.call(this)||this;return g._value=a,g._key=c,g}return(0,G.ZT)(i,o),i.prototype._apply=function(a){Xr("startAt",this._value,a._path,!0);var c=di(a._queryParams,this._value,this._key);if(Ia(c),ni(c),a._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new cr(a._repo,a._path,c,a._orderByCalled)},i}(Jn);function Ma(o,i){return void 0===o&&(o=null),Vr("startAt","key",i,!0),new Au(o,i)}var Zc=function(o){function i(a,c){var g=o.call(this)||this;return g._value=a,g._key=c,g}return(0,G.ZT)(i,o),i.prototype._apply=function(a){Xr("startAfter",this._value,a._path,!1);var c=function(o,i,a){var c;return o.index_===rr?("string"==typeof i&&(i=Wa(i)),c=di(o,i,a)):c=di(o,i,null==a?X:Wa(a)),c.startAfterSet_=!0,c}(a._queryParams,this._value,this._key);if(Ia(c),ni(c),a._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new cr(a._repo,a._path,c,a._orderByCalled)},i}(Jn);function Xc(o,i){return Vr("startAfter","key",i,!0),new Zc(o,i)}var Uo=function(o){function i(a){var c=o.call(this)||this;return c._limit=a,c}return(0,G.ZT)(i,o),i.prototype._apply=function(a){if(a._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new cr(a._repo,a._path,function(o,i){var a=o.copy();return a.limitSet_=!0,a.limit_=i,a.viewFrom_="l",a}(a._queryParams,this._limit),a._orderByCalled)},i}(Jn);function Jc(o){if("number"!=typeof o||Math.floor(o)!==o||o<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Uo(o)}var ef=function(o){function i(a){var c=o.call(this)||this;return c._limit=a,c}return(0,G.ZT)(i,o),i.prototype._apply=function(a){if(a._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new cr(a._repo,a._path,function(o,i){var a=o.copy();return a.limitSet_=!0,a.limit_=i,a.viewFrom_="r",a}(a._queryParams,this._limit),a._orderByCalled)},i}(Jn);function Rl(o){if("number"!=typeof o||Math.floor(o)!==o||o<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ef(o)}var tf=function(o){function i(a){var c=o.call(this)||this;return c._path=a,c}return(0,G.ZT)(i,o),i.prototype._apply=function(a){wa(a,"orderByChild");var c=new Rt(this._path);if(qe(c))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var g=new vo(c),v=os(a._queryParams,g);return ni(v),new cr(a._repo,a._path,v,!0)},i}(Jn);function nf(o){if("$key"===o)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===o)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===o)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return fn("orderByChild","path",o,!1),new tf(o)}var Xi=function(o){function i(){return null!==o&&o.apply(this,arguments)||this}return(0,G.ZT)(i,o),i.prototype._apply=function(a){wa(a,"orderByKey");var c=os(a._queryParams,rr);return ni(c),new cr(a._repo,a._path,c,!0)},i}(Jn);function Ru(){return new Xi}var Ml=function(o){function i(){return null!==o&&o.apply(this,arguments)||this}return(0,G.ZT)(i,o),i.prototype._apply=function(a){wa(a,"orderByPriority");var c=os(a._queryParams,Vt);return ni(c),new cr(a._repo,a._path,c,!0)},i}(Jn);function Fs(){return new Ml}var Pl=function(o){function i(){return null!==o&&o.apply(this,arguments)||this}return(0,G.ZT)(i,o),i.prototype._apply=function(a){wa(a,"orderByValue");var c=os(a._queryParams,On);return ni(c),new cr(a._repo,a._path,c,!0)},i}(Jn);function xl(){return new Pl}var rf=function(o){function i(a,c){var g=o.call(this)||this;return g._value=a,g._key=c,g}return(0,G.ZT)(i,o),i.prototype._apply=function(a){if(Xr("equalTo",this._value,a._path,!1),a._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(a._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ra(this._value,this._key)._apply(new Au(this._value,this._key)._apply(a))},i}(Jn);function of(o,i){return Vr("equalTo","key",i,!0),new rf(o,i)}function Mr(o){for(var i,a,c=[],g=1;g<arguments.length;g++)c[g-1]=arguments[g];var v=(0,I.m9)(o);try{for(var C=(0,G.XA)(c),T=C.next();!T.done;T=C.next()){var A=T.value;v=A._apply(v)}}catch(P){i={error:P}}finally{try{T&&!T.done&&(a=C.return)&&a.call(C)}finally{if(i)throw i.error}}return v}(function(o){(0,I.hu)(!nu,"__referenceConstructor has already been defined"),nu=o})(Xn),function(o){(0,I.hu)(!Kn,"__referenceConstructor has already been defined"),Kn=o}(Xn);var fr={},Nl=!1;function Pa(o,i,a,c,g){var v=c||o.options.databaseURL;void 0===v&&(o.options.projectId||je("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Te("Using default host for project ",o.options.projectId),v=o.options.projectId+"-default-rtdb.firebaseio.com");var A,C=Di(v,g),T=C.repoInfo,P=void 0;"undefined"!=typeof process&&(P=process.env.FIREBASE_DATABASE_EMULATOR_HOST),P?(A=!0,T=(C=Di(v="http://"+P+"?ns="+T.namespace,g)).repoInfo):A=!C.repoInfo.secure;var O=g&&A?new pt(pt.OWNER):new _t(o.name,o.options,i);Rs("Invalid Firebase Database URL",C),qe(C.path)||je("Database URL must point to the root of a Firebase Database (not including a child path).");var Z=function(o,i,a,c){var g=fr[i.name];g||(fr[i.name]=g={});var v=g[o.toURLString()];return v&&je("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),v=new Ea(o,Nl,a,c),g[o.toURLString()]=v,v}(T,o,O,new Hr(o.name,a));return new Ol(Z,o)}var Ol=function(){function o(i,a){this._repoInternal=i,this.app=a,this.type="database",this._instanceStarted=!1}return Object.defineProperty(o.prototype,"_repo",{get:function(){return this._instanceStarted||(function(o,i,a){if(o.stats_=Nt(o.repoInfo_),o.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)o.server_=new ta(o.repoInfo_,function(c,g,v,C){ei(o,c,g,v,C)},o.authTokenProvider_,o.appCheckProvider_),setTimeout(function(){return vl(o,!0)},0);else{if(null!=a){if("object"!=typeof a)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,I.Pz)(a)}catch(c){throw new Error("Invalid authOverride provided: "+c)}}o.persistentConnection_=new go(o.repoInfo_,i,function(c,g,v,C){ei(o,c,g,v,C)},function(c){vl(o,c)},function(c){!function(o,i){ye(i,function(a,c){du(o,a,c)})}(o,c)},o.authTokenProvider_,o.appCheckProvider_,a),o.server_=o.persistentConnection_}o.authTokenProvider_.addTokenChangeListener(function(c){o.server_.refreshAuthToken(c)}),o.appCheckProvider_.addTokenChangeListener(function(c){o.server_.refreshAppCheckToken(c.token)}),o.statsReporter_=function(o,i){var a=o.toString();return er[a]||(er[a]=i()),er[a]}(o.repoInfo_,function(){return new za(o.stats_,o.server_)}),o.infoData_=new Fn,o.infoSyncTree_=new fa({startListening:function(c,g,v,C){var T=[],A=o.infoData_.getNode(c._path);return A.isEmpty()||(T=da(o.infoSyncTree_,c._path,A),setTimeout(function(){C("ok")},0)),T},stopListening:function(){}}),du(o,"connected",!1),o.serverSyncTree_=new fa({startListening:function(c,g,v,C){return o.server_.listen(c,v,g,function(T,A){var P=C(T,A);mn(o.eventQueue_,c._path,P)}),[]},stopListening:function(c,g){o.server_.unlisten(c,g)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Xn(this._repo,bt())),this._rootInternal},enumerable:!1,configurable:!0}),o.prototype._delete=function(){return null!==this._rootInternal&&(function(o,i){var a=fr[i];(!a||a[o.key]!==o)&&je("Database "+i+"("+o.repoInfo_+") has already been deleted."),ba(o),delete a[o.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},o.prototype._checkNotDeleted=function(i){null===this._rootInternal&&je("Cannot call "+i+" on a deleted database.")},o}();function Fl(o){(o=(0,I.m9)(o))._checkNotDeleted("goOffline"),ba(o._repo)}function Wo(o){(o=(0,I.m9)(o))._checkNotDeleted("goOnline"),function(o){o.persistentConnection_&&o.persistentConnection_.resume(ml)}(o._repo)}var kl={".sv":"timestamp"},xu=function(){function o(i,a){this.committed=i,this.snapshot=a}return o.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},o}();function Vl(o,i,a){var c;if(o=(0,I.m9)(o),gn("Reference.transaction",o._path),".length"===o.key||".keys"===o.key)throw"Reference.transaction failed: "+o.key+" is a read-only object.";var g=null===(c=null==a?void 0:a.applyLocally)||void 0===c||c,v=new I.BH,T=Sa(o,function(){});return function(o,i,a,c,g,v){Ps(o,"transaction on "+i);var C={path:i,update:a,onComplete:c,status:null,order:Se(),applyLocally:v,retryCount:0,unwatcher:g,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},T=xs(o,i,void 0);C.currentInputSnapshot=T;var A=C.update(T.val());if(void 0===A)C.unwatcher(),C.currentOutputSnapshotRaw=null,C.currentOutputSnapshotResolved=null,C.onComplete&&C.onComplete(null,!1,C.currentInputSnapshot);else{Vo("transaction failed: Data returned ",A,C.path),C.status=0;var P=ws(o.transactionQueueTree_,i),O=ur(P)||[];O.push(C),Rr(P,O);var Z=void 0;"object"==typeof A&&null!==A&&(0,I.r3)(A,".priority")?(Z=(0,I.DV)(A,".priority"),(0,I.hu)(Lo(Z),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Z=(Es(o.serverSyncTree_,i)||et.EMPTY_NODE).getPriority().val();var De=Ci(o),Pe=Qt(A,Z),Je=Gi(Pe,T,De);C.currentOutputSnapshotRaw=Pe,C.currentOutputSnapshotResolved=Je,C.currentWriteId=Ms(o);var Ge=Wi(o.serverSyncTree_,i,Je,C.currentWriteId,C.applyLocally);mn(o.eventQueue_,i,Ge),qi(o,o.transactionQueueTree_)}}(o._repo,o._path,i,function(A,P,O){var Z=null;A?v.reject(A):(Z=new Ns(O,new Xn(o._repo,o._path),Vt),v.resolve(new xu(P,Z)))},T,g),v.promise}var od=function(){function o(i){this._delegate=i}return o.prototype.cancel=function(i){(0,I.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,I.Wj)("OnDisconnect.cancel","onComplete",i,!0);var a=this._delegate.cancel();return i&&a.then(function(){return i(null)},function(c){return i(c)}),a},o.prototype.remove=function(i){(0,I.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,I.Wj)("OnDisconnect.remove","onComplete",i,!0);var a=this._delegate.remove();return i&&a.then(function(){return i(null)},function(c){return i(c)}),a},o.prototype.set=function(i,a){(0,I.Dv)("OnDisconnect.set",1,2,arguments.length),(0,I.Wj)("OnDisconnect.set","onComplete",a,!0);var c=this._delegate.set(i);return a&&c.then(function(){return a(null)},function(g){return a(g)}),c},o.prototype.setWithPriority=function(i,a,c){(0,I.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,I.Wj)("OnDisconnect.setWithPriority","onComplete",c,!0);var g=this._delegate.setWithPriority(i,a);return c&&g.then(function(){return c(null)},function(v){return c(v)}),g},o.prototype.update=function(i,a){if((0,I.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(i)){for(var c={},g=0;g<i.length;++g)c[""+g]=i[g];i=c,$e("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,I.Wj)("OnDisconnect.update","onComplete",a,!0);var v=this._delegate.update(i);return a&&v.then(function(){return a(null)},function(C){return a(C)}),v},o}(),$o=function(){function o(i,a){this.committed=i,this.snapshot=a}return o.prototype.toJSON=function(){return(0,I.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},o}(),Ji=function(){function o(i,a){this._database=i,this._delegate=a}return o.prototype.val=function(){return(0,I.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},o.prototype.exportVal=function(){return(0,I.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},o.prototype.toJSON=function(){return(0,I.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},o.prototype.exists=function(){return(0,I.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},o.prototype.child=function(i){return(0,I.Dv)("DataSnapshot.child",0,1,arguments.length),i=String(i),fn("DataSnapshot.child","path",i,!1),new o(this._database,this._delegate.child(i))},o.prototype.hasChild=function(i){return(0,I.Dv)("DataSnapshot.hasChild",1,1,arguments.length),fn("DataSnapshot.hasChild","path",i,!1),this._delegate.hasChild(i)},o.prototype.getPriority=function(){return(0,I.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},o.prototype.forEach=function(i){var a=this;return(0,I.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,I.Wj)("DataSnapshot.forEach","action",i,!1),this._delegate.forEach(function(c){return i(new o(a._database,c))})},o.prototype.hasChildren=function(){return(0,I.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(o.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),o.prototype.numChildren=function(){return(0,I.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},o.prototype.getRef=function(){return(0,I.Dv)("DataSnapshot.ref",0,0,arguments.length),new f(this._database,this._delegate.ref)},Object.defineProperty(o.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),o}(),l=function(){function o(i,a){this.database=i,this._delegate=a}return o.prototype.on=function(i,a,c,g){var C,v=this;(0,I.Dv)("Query.on",2,4,arguments.length),(0,I.Wj)("Query.on","callback",a,!1);var T=o.getCancelAndContextArgs_("Query.on",c,g),A=function(O,Z){a.call(T.context,new Ji(v.database,O),Z)};A.userCallback=a,A.context=T.context;var P=null===(C=T.cancel)||void 0===C?void 0:C.bind(T.context);switch(i){case"value":return Sa(this._delegate,A,P),a;case"child_added":return Sl(this._delegate,A,P),a;case"child_removed":return Aa(this._delegate,A,P),a;case"child_changed":return wu(this._delegate,A,P),a;case"child_moved":return Iu(this._delegate,A,P),a;default:throw new Error((0,I.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},o.prototype.off=function(i,a,c){if((0,I.Dv)("Query.off",0,3,arguments.length),lu("Query.off",i,!0),(0,I.Wj)("Query.off","callback",a,!0),(0,I.lb)("Query.off","context",c,!0),a){var g=function(){};g.userCallback=a,g.context=c,Al(this._delegate,i,g)}else Al(this._delegate,i)},o.prototype.get=function(){var i=this;return Kc(this._delegate).then(function(a){return new Ji(i.database,a)})},o.prototype.once=function(i,a,c,g){var v=this;(0,I.Dv)("Query.once",1,4,arguments.length),(0,I.Wj)("Query.once","callback",a,!0);var C=o.getCancelAndContextArgs_("Query.once",c,g),T=new I.BH,A=function(O,Z){var ie=new Ji(v.database,O);a&&a.call(C.context,ie,Z),T.resolve(ie)};A.userCallback=a,A.context=C.context;var P=function(O){C.cancel&&C.cancel.call(C.context,O),T.reject(O)};switch(i){case"value":Sa(this._delegate,A,P,{onlyOnce:!0});break;case"child_added":Sl(this._delegate,A,P,{onlyOnce:!0});break;case"child_removed":Aa(this._delegate,A,P,{onlyOnce:!0});break;case"child_changed":wu(this._delegate,A,P,{onlyOnce:!0});break;case"child_moved":Iu(this._delegate,A,P,{onlyOnce:!0});break;default:throw new Error((0,I.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return T.promise},o.prototype.limitToFirst=function(i){return(0,I.Dv)("Query.limitToFirst",1,1,arguments.length),new o(this.database,Mr(this._delegate,Jc(i)))},o.prototype.limitToLast=function(i){return(0,I.Dv)("Query.limitToLast",1,1,arguments.length),new o(this.database,Mr(this._delegate,Rl(i)))},o.prototype.orderByChild=function(i){return(0,I.Dv)("Query.orderByChild",1,1,arguments.length),new o(this.database,Mr(this._delegate,nf(i)))},o.prototype.orderByKey=function(){return(0,I.Dv)("Query.orderByKey",0,0,arguments.length),new o(this.database,Mr(this._delegate,Ru()))},o.prototype.orderByPriority=function(){return(0,I.Dv)("Query.orderByPriority",0,0,arguments.length),new o(this.database,Mr(this._delegate,Fs()))},o.prototype.orderByValue=function(){return(0,I.Dv)("Query.orderByValue",0,0,arguments.length),new o(this.database,Mr(this._delegate,xl()))},o.prototype.startAt=function(i,a){return void 0===i&&(i=null),(0,I.Dv)("Query.startAt",0,2,arguments.length),new o(this.database,Mr(this._delegate,Ma(i,a)))},o.prototype.startAfter=function(i,a){return void 0===i&&(i=null),(0,I.Dv)("Query.startAfter",0,2,arguments.length),new o(this.database,Mr(this._delegate,Xc(i,a)))},o.prototype.endAt=function(i,a){return void 0===i&&(i=null),(0,I.Dv)("Query.endAt",0,2,arguments.length),new o(this.database,Mr(this._delegate,Tu(i,a)))},o.prototype.endBefore=function(i,a){return void 0===i&&(i=null),(0,I.Dv)("Query.endBefore",0,2,arguments.length),new o(this.database,Mr(this._delegate,Su(i,a)))},o.prototype.equalTo=function(i,a){return(0,I.Dv)("Query.equalTo",1,2,arguments.length),new o(this.database,Mr(this._delegate,of(i,a)))},o.prototype.toString=function(){return(0,I.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()},o.prototype.toJSON=function(){return(0,I.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},o.prototype.isEqual=function(i){if((0,I.Dv)("Query.isEqual",1,1,arguments.length),!(i instanceof o)){var a="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(a)}return this._delegate.isEqual(i._delegate)},o.getCancelAndContextArgs_=function(i,a,c){var g={cancel:void 0,context:void 0};if(a&&c)g.cancel=a,(0,I.Wj)(i,"cancel",g.cancel,!0),g.context=c,(0,I.lb)(i,"context",g.context,!0);else if(a)if("object"==typeof a&&null!==a)g.context=a;else{if("function"!=typeof a)throw new Error((0,I.gK)(i,"cancelOrContext")+" must either be a cancel callback or a context object.");g.cancel=a}return g},Object.defineProperty(o.prototype,"ref",{get:function(){return new f(this.database,new Xn(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),o}(),f=function(o){function i(a,c){var g=o.call(this,a,new cr(c._repo,c._path,new yt,!1))||this;return g.database=a,g._delegate=c,g}return(0,G.ZT)(i,o),i.prototype.getKey=function(){return(0,I.Dv)("Reference.key",0,0,arguments.length),this._delegate.key},i.prototype.child=function(a){return(0,I.Dv)("Reference.child",1,1,arguments.length),"number"==typeof a&&(a=String(a)),new i(this.database,nn(this._delegate,a))},i.prototype.getParent=function(){(0,I.Dv)("Reference.parent",0,0,arguments.length);var a=this._delegate.parent;return a?new i(this.database,a):null},i.prototype.getRoot=function(){return(0,I.Dv)("Reference.root",0,0,arguments.length),new i(this.database,this._delegate.root)},i.prototype.set=function(a,c){(0,I.Dv)("Reference.set",1,2,arguments.length),(0,I.Wj)("Reference.set","onComplete",c,!0);var g=ri(this._delegate,a);return c&&g.then(function(){return c(null)},function(v){return c(v)}),g},i.prototype.update=function(a,c){if((0,I.Dv)("Reference.update",1,2,arguments.length),Array.isArray(a)){for(var g={},v=0;v<a.length;++v)g[""+v]=a[v];a=g,$e("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}gn("Reference.update",this._delegate._path),(0,I.Wj)("Reference.update","onComplete",c,!0);var C=Du(this._delegate,a);return c&&C.then(function(){return c(null)},function(T){return c(T)}),C},i.prototype.setWithPriority=function(a,c,g){(0,I.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,I.Wj)("Reference.setWithPriority","onComplete",g,!0);var v=bi(this._delegate,a,c);return g&&v.then(function(){return g(null)},function(C){return g(C)}),v},i.prototype.remove=function(a){(0,I.Dv)("Reference.remove",0,1,arguments.length),(0,I.Wj)("Reference.remove","onComplete",a,!0);var c=Tl(this._delegate);return a&&c.then(function(){return a(null)},function(g){return a(g)}),c},i.prototype.transaction=function(a,c,g){var v=this;(0,I.Dv)("Reference.transaction",1,3,arguments.length),(0,I.Wj)("Reference.transaction","transactionUpdate",a,!1),(0,I.Wj)("Reference.transaction","onComplete",c,!0),fu("Reference.transaction","applyLocally",g,!0);var C=Vl(this._delegate,a,{applyLocally:g}).then(function(T){return new $o(T.committed,new Ji(v.database,T.snapshot))});return c&&C.then(function(T){return c(null,T.committed,T.snapshot)},function(T){return c(T,!1,null)}),C},i.prototype.setPriority=function(a,c){(0,I.Dv)("Reference.setPriority",1,2,arguments.length),(0,I.Wj)("Reference.setPriority","onComplete",c,!0);var g=Cn(this._delegate,a);return c&&g.then(function(){return c(null)},function(v){return c(v)}),g},i.prototype.push=function(a,c){var g=this;(0,I.Dv)("Reference.push",0,2,arguments.length),(0,I.Wj)("Reference.push","onComplete",c,!0);var v=Cu(this._delegate,a),C=v.then(function(A){return new i(g.database,A)});c&&C.then(function(){return c(null)},function(A){return c(A)});var T=new i(this.database,v);return T.then=C.then.bind(C),T.catch=C.catch.bind(C,void 0),T},i.prototype.onDisconnect=function(){return gn("Reference.onDisconnect",this._delegate._path),new od(new Il(this._delegate._repo,this._delegate._path))},Object.defineProperty(i.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),i}(l),d=function(){function o(i,a){var c=this;this._delegate=i,this.app=a,this.INTERNAL={delete:function(){return c._delegate._delete()}}}return o.prototype.useEmulator=function(i,a,c){void 0===c&&(c={}),function(o,i,a,c){void 0===c&&(c={}),(o=(0,I.m9)(o))._checkNotDeleted("useEmulator"),o._instanceStarted&&je("Cannot call useEmulator() after instance has already been initialized.");var g=o._repoInternal,v=void 0;if(g.repoInfo_.nodeAdmin)c.mockUserToken&&je('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),v=new pt(pt.OWNER);else if(c.mockUserToken){var C="string"==typeof c.mockUserToken?c.mockUserToken:(0,I.Sg)(c.mockUserToken,o.app.options.projectId);v=new pt(C)}!function(o,i,a,c){o.repoInfo_=new qt(i+":"+a,!1,o.repoInfo_.namespace,o.repoInfo_.webSocketOnly,o.repoInfo_.nodeAdmin,o.repoInfo_.persistenceKey,o.repoInfo_.includeNamespaceInQueryParams),c&&(o.authTokenProvider_=c)}(g,i,a,v)}(this._delegate,i,a,c)},o.prototype.ref=function(i){if((0,I.Dv)("database.ref",0,1,arguments.length),i instanceof f){var a=jo(this._delegate,i.toString());return new f(this,a)}return a=Yc(this._delegate,i),new f(this,a)},o.prototype.refFromURL=function(i){var a="database.refFromURL";(0,I.Dv)(a,1,1,arguments.length);var c=jo(this._delegate,i);return new f(this,c)},o.prototype.goOffline=function(){return(0,I.Dv)("database.goOffline",0,0,arguments.length),Fl(this._delegate)},o.prototype.goOnline=function(){return(0,I.Dv)("database.goOnline",0,0,arguments.length),Wo(this._delegate)},o.ServerValue={TIMESTAMP:kl,increment:function(i){return function(o){return{".sv":{increment:o}}}(i)}},o}(),Xe=Object.freeze({__proto__:null,forceLongPolling:function(){Zt.forceDisallow(),Ws.forceAllow()},forceWebSockets:function(){Ws.forceDisallow()},isWebSocketsAvailable:function(){return Zt.isAvailable()},setSecurityDebugCallback:function(o,i){o._delegate._repo.persistentConnection_.securityDebugCallback_=i},stats:function(o,i){!function(o,i){if(void 0===i&&(i=!1),"undefined"!=typeof console){var a;i?(o.statsListener_||(o.statsListener_=new ss(o.stats_)),a=o.statsListener_.get()):a=o.stats_.get();var c=Object.keys(a).reduce(function(g,v){return Math.max(v.length,g)},0);ye(a,function(g,v){for(var C=g,T=g.length;T<c+2;T++)C+=" ";console.log(C+v)})}}(o._delegate._repo,i)},statsIncrementCounter:function(o,i){!function(o,i){o.stats_.incrementCounter(i),function(o,i){o.statsToReport_[i]=!0}(o.statsReporter_,i)}(o._delegate._repo,i)},dataUpdateCount:function(o){return o._delegate._repo.dataUpdateCount},interceptServerData:function(o,i){return function(o,i){o.interceptServerDataCallback_=i}(o._delegate._repo,i)},initStandalone:function(o){var i=o.app,a=o.url,g=o.customAuthImpl,v=o.namespace,C=o.nodeAdmin,T=void 0!==C&&C;ue(o.version);var A=new ne.zt("auth-internal",new ne.H0("database-standalone"));return A.setComponent(new ne.wA("auth-internal",function(){return g},"PRIVATE")),{instance:new d(Pa(i,A,void 0,a,T),i),namespace:v}}}),ut=go;go.prototype.simpleListen=function(o,i){this.sendRequest("q",{p:o},i)},go.prototype.echo=function(o,i){this.sendRequest("echo",{d:o},i)};var kt=Object.freeze({__proto__:null,DataConnection:ut,RealTimeConnection:li,hijackHash:function(o){var i=go.prototype.put;return go.prototype.put=function(a,c,g,v){void 0!==v&&(v=o()),i.call(this,a,c,g,v)},function(){go.prototype.put=i}},ConnectionTarget:qt,queryIdentifier:function(o){return o._delegate._queryIdentifier},forceRestClient:function(o){!function(o){Nl=o}(o)}}),Dn=d.ServerValue;!function(o){ue(o.SDK_VERSION);var i=o.INTERNAL.registerComponent(new ne.wA("database",function(a,c){var g=c.instanceIdentifier,v=a.getProvider("app").getImmediate(),C=a.getProvider("auth-internal"),T=a.getProvider("app-check-internal");return new d(Pa(v,C,T,g),v)},"PUBLIC").setServiceProps({Reference:f,Query:l,Database:d,DataSnapshot:Ji,enableLogging:xe,INTERNAL:Xe,ServerValue:Dn,TEST_ACCESS:kt}).setMultipleInstances(!0));o.registerVersion("@firebase/database","0.11.0"),(0,I.Yr)()&&(ke.exports=i)}(D.Z)},6433:(ke,me,x)=>{function D(){for(var $=0,fe=0,ae=arguments.length;fe<ae;fe++)$+=arguments[fe].length;var Ce=Array($),Se=0;for(fe=0;fe<ae;fe++)for(var Me=arguments[fe],ce=0,Ee=Me.length;ce<Ee;ce++,Se++)Ce[Se]=Me[ce];return Ce}x.d(me,{in:()=>G,Yd:()=>ue,Ub:()=>z,Am:()=>J});var ne,I=[],G=(()=>{return($=G||(G={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",G;var $})(),pe={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},_e=G.INFO,oe=((ne={})[G.DEBUG]="log",ne[G.VERBOSE]="log",ne[G.INFO]="info",ne[G.WARN]="warn",ne[G.ERROR]="error",ne),le=function($,fe){for(var ae=[],Ce=2;Ce<arguments.length;Ce++)ae[Ce-2]=arguments[Ce];if(!(fe<$.logLevel)){var Se=(new Date).toISOString(),Me=oe[fe];if(!Me)throw new Error("Attempted to log a message with an invalid logType (value: "+fe+")");console[Me].apply(console,D(["["+Se+"]  "+$.name+":"],ae))}},ue=function(){function $(fe){this.name=fe,this._logLevel=_e,this._logHandler=le,this._userLogHandler=null,I.push(this)}return Object.defineProperty($.prototype,"logLevel",{get:function(){return this._logLevel},set:function(fe){if(!(fe in G))throw new TypeError('Invalid value "'+fe+'" assigned to `logLevel`');this._logLevel=fe},enumerable:!1,configurable:!0}),$.prototype.setLogLevel=function(fe){this._logLevel="string"==typeof fe?pe[fe]:fe},Object.defineProperty($.prototype,"logHandler",{get:function(){return this._logHandler},set:function(fe){if("function"!=typeof fe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=fe},enumerable:!1,configurable:!0}),Object.defineProperty($.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(fe){this._userLogHandler=fe},enumerable:!1,configurable:!0}),$.prototype.debug=function(){for(var fe=[],ae=0;ae<arguments.length;ae++)fe[ae]=arguments[ae];this._userLogHandler&&this._userLogHandler.apply(this,D([this,G.DEBUG],fe)),this._logHandler.apply(this,D([this,G.DEBUG],fe))},$.prototype.log=function(){for(var fe=[],ae=0;ae<arguments.length;ae++)fe[ae]=arguments[ae];this._userLogHandler&&this._userLogHandler.apply(this,D([this,G.VERBOSE],fe)),this._logHandler.apply(this,D([this,G.VERBOSE],fe))},$.prototype.info=function(){for(var fe=[],ae=0;ae<arguments.length;ae++)fe[ae]=arguments[ae];this._userLogHandler&&this._userLogHandler.apply(this,D([this,G.INFO],fe)),this._logHandler.apply(this,D([this,G.INFO],fe))},$.prototype.warn=function(){for(var fe=[],ae=0;ae<arguments.length;ae++)fe[ae]=arguments[ae];this._userLogHandler&&this._userLogHandler.apply(this,D([this,G.WARN],fe)),this._logHandler.apply(this,D([this,G.WARN],fe))},$.prototype.error=function(){for(var fe=[],ae=0;ae<arguments.length;ae++)fe[ae]=arguments[ae];this._userLogHandler&&this._userLogHandler.apply(this,D([this,G.ERROR],fe)),this._logHandler.apply(this,D([this,G.ERROR],fe))},$}();function z($){I.forEach(function(fe){fe.setLogLevel($)})}function J($,fe){for(var ae=function(ce){var Ee=null;fe&&fe.level&&(Ee=pe[fe.level]),ce.userLogHandler=null===$?null:function(Ve,xe){for(var Te=[],be=2;be<arguments.length;be++)Te[be-2]=arguments[be];var Le=Te.map(function(je){if(null==je)return null;if("string"==typeof je)return je;if("number"==typeof je||"boolean"==typeof je)return je.toString();if(je instanceof Error)return je.message;try{return JSON.stringify(je)}catch($e){return null}}).filter(function(je){return je}).join(" ");xe>=(null!=Ee?Ee:Ve.logLevel)&&$({level:G[xe].toLowerCase(),message:Le,args:Te,type:Ve.name})}},Ce=0,Se=I;Ce<Se.length;Ce++)ae(Se[Ce])}},3923:(ke,me,x)=>{x.d(me,{BH:()=>ae,LL:()=>Re,ZR:()=>B,gQ:()=>vn,hu:()=>I,g5:()=>G,US:()=>oe,h$:()=>le,r3:()=>mt,Sg:()=>Ce,ne:()=>yn,p$:()=>J,ZB:()=>$,gK:()=>Zo,m9:()=>Ot,GJ:()=>ze,jU:()=>Ee,xb:()=>ot,uI:()=>Me,UG:()=>ce,Yr:()=>je,b$:()=>xe,w9:()=>Ye,cI:()=>de,UI:()=>bn,xO:()=>Hr,DV:()=>nt,ug:()=>Be,dS:()=>qt,Pz:()=>ye,Dv:()=>Ri,Wj:()=>un,lb:()=>ka});var D=x(4762),I=function(L,F){if(!L)throw G(F)},G=function(L){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+L)},pe=function(L){for(var F=[],Q=0,ee=0;ee<L.length;ee++){var Y=L.charCodeAt(ee);Y<128?F[Q++]=Y:Y<2048?(F[Q++]=Y>>6|192,F[Q++]=63&Y|128):55296==(64512&Y)&&ee+1<L.length&&56320==(64512&L.charCodeAt(ee+1))?(Y=65536+((1023&Y)<<10)+(1023&L.charCodeAt(++ee)),F[Q++]=Y>>18|240,F[Q++]=Y>>12&63|128,F[Q++]=Y>>6&63|128,F[Q++]=63&Y|128):(F[Q++]=Y>>12|224,F[Q++]=Y>>6&63|128,F[Q++]=63&Y|128)}return F},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(L,F){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var Q=F?this.byteToCharMapWebSafe_:this.byteToCharMap_,ee=[],Y=0;Y<L.length;Y+=3){var Ae=L[Y],Qe=Y+1<L.length,Dt=Qe?L[Y+1]:0,It=Y+2<L.length,Tt=It?L[Y+2]:0,Mn=(15&Dt)<<2|Tt>>6,ui=63&Tt;It||(ui=64,Qe||(Mn=64)),ee.push(Q[Ae>>2],Q[(3&Ae)<<4|Dt>>4],Q[Mn],Q[ui])}return ee.join("")},encodeString:function(L,F){return this.HAS_NATIVE_SUPPORT&&!F?btoa(L):this.encodeByteArray(pe(L),F)},decodeString:function(L,F){return this.HAS_NATIVE_SUPPORT&&!F?atob(L):function(L){for(var F=[],Q=0,ee=0;Q<L.length;){var Y=L[Q++];if(Y<128)F[ee++]=String.fromCharCode(Y);else if(Y>191&&Y<224){var Ae=L[Q++];F[ee++]=String.fromCharCode((31&Y)<<6|63&Ae)}else if(Y>239&&Y<365){var It=((7&Y)<<18|(63&(Ae=L[Q++]))<<12|(63&(Qe=L[Q++]))<<6|63&L[Q++])-65536;F[ee++]=String.fromCharCode(55296+(It>>10)),F[ee++]=String.fromCharCode(56320+(1023&It))}else{Ae=L[Q++];var Qe=L[Q++];F[ee++]=String.fromCharCode((15&Y)<<12|(63&Ae)<<6|63&Qe)}}return F.join("")}(this.decodeStringToByteArray(L,F))},decodeStringToByteArray:function(L,F){this.init_();for(var Q=F?this.charToByteMapWebSafe_:this.charToByteMap_,ee=[],Y=0;Y<L.length;){var Ae=Q[L.charAt(Y++)],Dt=Y<L.length?Q[L.charAt(Y)]:0,Tt=++Y<L.length?Q[L.charAt(Y)]:64,Rn=++Y<L.length?Q[L.charAt(Y)]:64;if(++Y,null==Ae||null==Dt||null==Tt||null==Rn)throw Error();ee.push(Ae<<2|Dt>>4),64!==Tt&&(ee.push(Dt<<4&240|Tt>>2),64!==Rn&&ee.push(Tt<<6&192|Rn))}return ee},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}},le=function(L){var F=pe(L);return oe.encodeByteArray(F,!0)},ue=function(L){return le(L).replace(/\./g,"")},z=function(L){try{return oe.decodeString(L,!0)}catch(F){console.error("base64Decode failed: ",F)}return null};function J(L){return $(void 0,L)}function $(L,F){if(!(F instanceof Object))return F;switch(F.constructor){case Date:return new Date(F.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return F}for(var ee in F)!F.hasOwnProperty(ee)||!fe(ee)||(L[ee]=$(L[ee],F[ee]));return L}function fe(L){return"__proto__"!==L}var ae=function(){function L(){var F=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(Q,ee){F.resolve=Q,F.reject=ee})}return L.prototype.wrapCallback=function(F){var Q=this;return function(ee,Y){ee?Q.reject(ee):Q.resolve(Y),"function"==typeof F&&(Q.promise.catch(function(){}),1===F.length?F(ee):F(ee,Y))}},L}();function Ce(L,F){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var ee=F||"demo-project",Y=L.iat||0,Ae=L.sub||L.user_id;if(!Ae)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var Qe=(0,D.pi)({iss:"https://securetoken.google.com/"+ee,aud:ee,iat:Y,exp:Y+3600,auth_time:Y,sub:Ae,user_id:Ae,firebase:{sign_in_provider:"custom",identities:{}}},L);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(Qe)),""].join(".")}function Me(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}function ce(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(L){return!1}}function Ee(){return"object"==typeof self&&self.self===self}function xe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function je(){return!1}var B=function(L){function F(Q,ee,Y){var Ae=L.call(this,ee)||this;return Ae.code=Q,Ae.customData=Y,Ae.name="FirebaseError",Object.setPrototypeOf(Ae,F.prototype),Error.captureStackTrace&&Error.captureStackTrace(Ae,Re.prototype.create),Ae}return(0,D.ZT)(F,L),F}(Error),Re=function(){function L(F,Q,ee){this.service=F,this.serviceName=Q,this.errors=ee}return L.prototype.create=function(F){for(var Q=[],ee=1;ee<arguments.length;ee++)Q[ee-1]=arguments[ee];var Y=Q[0]||{},Ae=this.service+"/"+F,Qe=this.errors[F],Dt=Qe?He(Qe,Y):"Error",It=this.serviceName+": "+Dt+" ("+Ae+").",Tt=new B(Ae,It,Y);return Tt},L}();function He(L,F){return L.replace(Pt,function(Q,ee){var Y=F[ee];return null!=Y?String(Y):"<"+ee+"?>"})}var Pt=/\{\$([^}]+)}/g;function de(L){return JSON.parse(L)}function ye(L){return JSON.stringify(L)}var re=function(L){var F={},Q={},ee={},Y="";try{var Ae=L.split(".");F=de(z(Ae[0])||""),Q=de(z(Ae[1])||""),Y=Ae[2],ee=Q.d||{},delete Q.d}catch(Qe){}return{header:F,claims:Q,data:ee,signature:Y}},Ye=function(L){var Q=re(L).claims;return!!Q&&"object"==typeof Q&&Q.hasOwnProperty("iat")},ze=function(L){var F=re(L).claims;return"object"==typeof F&&!0===F.admin};function mt(L,F){return Object.prototype.hasOwnProperty.call(L,F)}function nt(L,F){if(Object.prototype.hasOwnProperty.call(L,F))return L[F]}function ot(L){for(var F in L)if(Object.prototype.hasOwnProperty.call(L,F))return!1;return!0}function bn(L,F,Q){var ee={};for(var Y in L)Object.prototype.hasOwnProperty.call(L,Y)&&(ee[Y]=F.call(Q,L[Y],Y,L));return ee}function Hr(L){for(var F=[],Q=function(It,Tt){Array.isArray(Tt)?Tt.forEach(function(En){F.push(encodeURIComponent(It)+"="+encodeURIComponent(En))}):F.push(encodeURIComponent(It)+"="+encodeURIComponent(Tt))},ee=0,Y=Object.entries(L);ee<Y.length;ee++){var Ae=Y[ee];Q(Ae[0],Ae[1])}return F.length?"&"+F.join("&"):""}var vn=function(){function L(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var F=1;F<this.blockSize;++F)this.pad_[F]=0;this.reset()}return L.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},L.prototype.compress_=function(F,Q){Q||(Q=0);var ee=this.W_;if("string"==typeof F)for(var Y=0;Y<16;Y++)ee[Y]=F.charCodeAt(Q)<<24|F.charCodeAt(Q+1)<<16|F.charCodeAt(Q+2)<<8|F.charCodeAt(Q+3),Q+=4;else for(Y=0;Y<16;Y++)ee[Y]=F[Q]<<24|F[Q+1]<<16|F[Q+2]<<8|F[Q+3],Q+=4;for(Y=16;Y<80;Y++)ee[Y]=4294967295&((Ae=ee[Y-3]^ee[Y-8]^ee[Y-14]^ee[Y-16])<<1|Ae>>>31);var Rn,Mn,Qe=this.chain_[0],Dt=this.chain_[1],It=this.chain_[2],Tt=this.chain_[3],En=this.chain_[4];for(Y=0;Y<80;Y++){Y<40?Y<20?(Rn=Tt^Dt&(It^Tt),Mn=1518500249):(Rn=Dt^It^Tt,Mn=1859775393):Y<60?(Rn=Dt&It|Tt&(Dt|It),Mn=2400959708):(Rn=Dt^It^Tt,Mn=3395469782);var Ae=(Qe<<5|Qe>>>27)+Rn+En+Mn+ee[Y]&4294967295;En=Tt,Tt=It,It=4294967295&(Dt<<30|Dt>>>2),Dt=Qe,Qe=Ae}this.chain_[0]=this.chain_[0]+Qe&4294967295,this.chain_[1]=this.chain_[1]+Dt&4294967295,this.chain_[2]=this.chain_[2]+It&4294967295,this.chain_[3]=this.chain_[3]+Tt&4294967295,this.chain_[4]=this.chain_[4]+En&4294967295},L.prototype.update=function(F,Q){if(null!=F){void 0===Q&&(Q=F.length);for(var ee=Q-this.blockSize,Y=0,Ae=this.buf_,Qe=this.inbuf_;Y<Q;){if(0===Qe)for(;Y<=ee;)this.compress_(F,Y),Y+=this.blockSize;if("string"==typeof F){for(;Y<Q;)if(Ae[Qe]=F.charCodeAt(Y),++Y,++Qe===this.blockSize){this.compress_(Ae),Qe=0;break}}else for(;Y<Q;)if(Ae[Qe]=F[Y],++Y,++Qe===this.blockSize){this.compress_(Ae),Qe=0;break}}this.inbuf_=Qe,this.total_+=Q}},L.prototype.digest=function(){var F=[],Q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var ee=this.blockSize-1;ee>=56;ee--)this.buf_[ee]=255&Q,Q/=256;this.compress_(this.buf_);var Y=0;for(ee=0;ee<5;ee++)for(var Ae=24;Ae>=0;Ae-=8)F[Y]=this.chain_[ee]>>Ae&255,++Y;return F},L}();function yn(L,F){var Q=new Fe(L,F);return Q.subscribe.bind(Q)}var Fe=function(){function L(F,Q){var ee=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(function(){F(ee)}).catch(function(Y){ee.error(Y)})}return L.prototype.next=function(F){this.forEachObserver(function(Q){Q.next(F)})},L.prototype.error=function(F){this.forEachObserver(function(Q){Q.error(F)}),this.close(F)},L.prototype.complete=function(){this.forEachObserver(function(F){F.complete()}),this.close()},L.prototype.subscribe=function(F,Q,ee){var Ae,Y=this;if(void 0===F&&void 0===Q&&void 0===ee)throw new Error("Missing Observer.");Ae=function(L,F){if("object"!=typeof L||null===L)return!1;for(var Q=0,ee=["next","error","complete"];Q<ee.length;Q++){var Y=ee[Q];if(Y in L&&"function"==typeof L[Y])return!0}return!1}(F)?F:{next:F,error:Q,complete:ee},void 0===Ae.next&&(Ae.next=Gt),void 0===Ae.error&&(Ae.error=Gt),void 0===Ae.complete&&(Ae.complete=Gt);var Qe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{Y.finalError?Ae.error(Y.finalError):Ae.complete()}catch(Dt){}}),this.observers.push(Ae),Qe},L.prototype.unsubscribeOne=function(F){void 0===this.observers||void 0===this.observers[F]||(delete this.observers[F],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},L.prototype.forEachObserver=function(F){if(!this.finalized)for(var Q=0;Q<this.observers.length;Q++)this.sendOne(Q,F)},L.prototype.sendOne=function(F,Q){var ee=this;this.task.then(function(){if(void 0!==ee.observers&&void 0!==ee.observers[F])try{Q(ee.observers[F])}catch(Y){"undefined"!=typeof console&&console.error&&console.error(Y)}})},L.prototype.close=function(F){var Q=this;this.finalized||(this.finalized=!0,void 0!==F&&(this.finalError=F),this.task.then(function(){Q.observers=void 0,Q.onNoObservers=void 0}))},L}();function Gt(){}var Ri=function(L,F,Q,ee){var Y;if(ee<F?Y="at least "+F:ee>Q&&(Y=0===Q?"none":"no more than "+Q),Y)throw new Error(L+" failed: Was called with "+ee+(1===ee?" argument.":" arguments.")+" Expects "+Y+".")};function Zo(L,F){return L+" failed: "+F+" argument "}function un(L,F,Q,ee){if((!ee||Q)&&"function"!=typeof Q)throw new Error(Zo(L,F)+"must be a valid function.")}function ka(L,F,Q,ee){if((!ee||Q)&&("object"!=typeof Q||null===Q))throw new Error(Zo(L,F)+"must be a valid context object.")}var qt=function(L){for(var F=[],Q=0,ee=0;ee<L.length;ee++){var Y=L.charCodeAt(ee);if(Y>=55296&&Y<=56319){var Ae=Y-55296;ee++,I(ee<L.length,"Surrogate pair missing trail surrogate."),Y=65536+(Ae<<10)+(L.charCodeAt(ee)-56320)}Y<128?F[Q++]=Y:Y<2048?(F[Q++]=Y>>6|192,F[Q++]=63&Y|128):Y<65536?(F[Q++]=Y>>12|224,F[Q++]=Y>>6&63|128,F[Q++]=63&Y|128):(F[Q++]=Y>>18|240,F[Q++]=Y>>12&63|128,F[Q++]=Y>>6&63|128,F[Q++]=63&Y|128)}return F},Be=function(L){for(var F=0,Q=0;Q<L.length;Q++){var ee=L.charCodeAt(Q);ee<128?F++:ee<2048?F+=2:ee>=55296&&ee<=56319?(F+=4,Q++):F+=3}return F};function Ot(L){return L&&L._delegate?L._delegate:L}},7713:(ke,me,x)=>{x.d(me,{Z:()=>D.Z});var D=x(417),I="8.10.0";D.Z.registerVersion("firebase",I,"app"),D.Z.SDK_VERSION=I},8305:(ke,me,x)=>{x.d(me,{y:()=>z});var D=x(584),ne=x(7908),I=x(4816),G=x(4623);var oe=x(5367),le=x(5044),ue=x(8706);let z=(()=>{class ae{constructor(Se){Se&&(this._subscribe=Se)}lift(Se){const Me=new ae;return Me.source=this,Me.operator=Se,Me}subscribe(Se,Me,ce){const Ee=function(ae){return ae&&ae instanceof D.Lv||function(ae){return ae&&(0,le.m)(ae.next)&&(0,le.m)(ae.error)&&(0,le.m)(ae.complete)}(ae)&&(0,ne.Nn)(ae)}(Se)?Se:new D.Hp(Se,Me,ce);return(0,ue.x)(()=>{const{operator:Ve,source:xe}=this;Ee.add(Ve?Ve.call(Ee,xe):xe?this._subscribe(Ee):this._trySubscribe(Ee))}),Ee}_trySubscribe(Se){try{return this._subscribe(Se)}catch(Me){Se.error(Me)}}forEach(Se,Me){return new(Me=J(Me))((ce,Ee)=>{let Ve;Ve=this.subscribe(xe=>{try{Se(xe)}catch(Te){Ee(Te),null==Ve||Ve.unsubscribe()}},Ee,ce)})}_subscribe(Se){var Me;return null===(Me=this.source)||void 0===Me?void 0:Me.subscribe(Se)}[I.L](){return this}pipe(...Se){return function(ae){return 0===ae.length?G.y:1===ae.length?ae[0]:function(Se){return ae.reduce((Me,ce)=>ce(Me),Se)}}(Se)(this)}toPromise(Se){return new(Se=J(Se))((Me,ce)=>{let Ee;this.subscribe(Ve=>Ee=Ve,Ve=>ce(Ve),()=>Me(Ee))})}}return ae.create=Ce=>new ae(Ce),ae})();function J(ae){var Ce;return null!==(Ce=null!=ae?ae:oe.v.Promise)&&void 0!==Ce?Ce:Promise}},273:(ke,me,x)=>{x.d(me,{x:()=>oe});var D=x(8305),ne=x(7908);const G=(0,x(4893).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var pe=x(3980),_e=x(8706);let oe=(()=>{class ue extends D.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(J){const $=new le(this,this);return $.operator=J,$}_throwIfClosed(){if(this.closed)throw new G}next(J){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const $=this.observers.slice();for(const fe of $)fe.next(J)}})}error(J){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=J;const{observers:$}=this;for(;$.length;)$.shift().error(J)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:J}=this;for(;J.length;)J.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var J;return(null===(J=this.observers)||void 0===J?void 0:J.length)>0}_trySubscribe(J){return this._throwIfClosed(),super._trySubscribe(J)}_subscribe(J){return this._throwIfClosed(),this._checkFinalizedStatuses(J),this._innerSubscribe(J)}_innerSubscribe(J){const{hasError:$,isStopped:fe,observers:ae}=this;return $||fe?ne.Lc:(ae.push(J),new ne.w0(()=>(0,pe.P)(ae,J)))}_checkFinalizedStatuses(J){const{hasError:$,thrownError:fe,isStopped:ae}=this;$?J.error(fe):ae&&J.complete()}asObservable(){const J=new D.y;return J.source=this,J}}return ue.create=(z,J)=>new le(z,J),ue})();class le extends oe{constructor(z,J){super(),this.destination=z,this.source=J}next(z){var J,$;null===($=null===(J=this.destination)||void 0===J?void 0:J.next)||void 0===$||$.call(J,z)}error(z){var J,$;null===($=null===(J=this.destination)||void 0===J?void 0:J.error)||void 0===$||$.call(J,z)}complete(){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===J||J.call(z)}_subscribe(z){var J,$;return null!==($=null===(J=this.source)||void 0===J?void 0:J.subscribe(z))&&void 0!==$?$:ne.Lc}}},584:(ke,me,x)=>{x.d(me,{Hp:()=>fe,Lv:()=>$});var D=x(5044),ne=x(7908),I=x(5367),G=x(5160),pe=x(6921);const _e=ue("C",void 0,void 0);function ue(ce,Ee,Ve){return{kind:ce,value:Ee,error:Ve}}var z=x(2496),J=x(8706);class $ extends ne.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,ne.Nn)(Ee)&&Ee.add(this)):this.destination=Me}static create(Ee,Ve,xe){return new fe(Ee,Ve,xe)}next(Ee){this.isStopped?Se(ue("N",Ee,void 0),this):this._next(Ee)}error(Ee){this.isStopped?Se(ue("E",void 0,Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?Se(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class fe extends ${constructor(Ee,Ve,xe){let Te;if(super(),(0,D.m)(Ee))Te=Ee;else if(Ee){let be;({next:Te,error:Ve,complete:xe}=Ee),this&&I.v.useDeprecatedNextContext?(be=Object.create(Ee),be.unsubscribe=()=>this.unsubscribe()):be=Ee,Te=null==Te?void 0:Te.bind(be),Ve=null==Ve?void 0:Ve.bind(be),xe=null==xe?void 0:xe.bind(be)}this.destination={next:Te?ae(Te):pe.Z,error:ae(null!=Ve?Ve:Ce),complete:xe?ae(xe):pe.Z}}}function ae(ce,Ee){return(...Ve)=>{try{ce(...Ve)}catch(xe){I.v.useDeprecatedSynchronousErrorHandling?(0,J.O)(xe):(0,G.h)(xe)}}}function Ce(ce){throw ce}function Se(ce,Ee){const{onStoppedNotification:Ve}=I.v;Ve&&z.z.setTimeout(()=>Ve(ce,Ee))}const Me={closed:!0,next:pe.Z,error:Ce,complete:pe.Z}},7908:(ke,me,x)=>{x.d(me,{Lc:()=>_e,w0:()=>pe,Nn:()=>oe});var D=x(5044);const I=(0,x(4893).d)(ue=>function(J){ue(this),this.message=J?`${J.length} errors occurred during unsubscription:\n${J.map(($,fe)=>`${fe+1}) ${$.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=J});var G=x(3980);class pe{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:J}=this;if(J)if(this._parentage=null,Array.isArray(J))for(const ae of J)ae.remove(this);else J.remove(this);const{initialTeardown:$}=this;if((0,D.m)($))try{$()}catch(ae){z=ae instanceof I?ae.errors:[ae]}const{_teardowns:fe}=this;if(fe){this._teardowns=null;for(const ae of fe)try{le(ae)}catch(Ce){z=null!=z?z:[],Ce instanceof I?z=[...z,...Ce.errors]:z.push(Ce)}}if(z)throw new I(z)}}add(z){var J;if(z&&z!==this)if(this.closed)le(z);else{if(z instanceof pe){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._teardowns=null!==(J=this._teardowns)&&void 0!==J?J:[]).push(z)}}_hasParent(z){const{_parentage:J}=this;return J===z||Array.isArray(J)&&J.includes(z)}_addParent(z){const{_parentage:J}=this;this._parentage=Array.isArray(J)?(J.push(z),J):J?[J,z]:z}_removeParent(z){const{_parentage:J}=this;J===z?this._parentage=null:Array.isArray(J)&&(0,G.P)(J,z)}remove(z){const{_teardowns:J}=this;J&&(0,G.P)(J,z),z instanceof pe&&z._removeParent(this)}}pe.EMPTY=(()=>{const ue=new pe;return ue.closed=!0,ue})();const _e=pe.EMPTY;function oe(ue){return ue instanceof pe||ue&&"closed"in ue&&(0,D.m)(ue.remove)&&(0,D.m)(ue.add)&&(0,D.m)(ue.unsubscribe)}function le(ue){(0,D.m)(ue)?ue():ue.unsubscribe()}},5367:(ke,me,x)=>{x.d(me,{v:()=>D});const D={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5583:(ke,me,x)=>{x.d(me,{E:()=>ne});const ne=new(x(8305).y)(pe=>pe.complete())},5947:(ke,me,x)=>{x.d(me,{D:()=>Te});var D=x(9985),ne=x(4763),I=x(5222),_e=x(8305),le=x(5497),ue=x(5044),z=x(8395);function $(be,Le){if(!be)throw new Error("Iterable cannot be null");return new _e.y(je=>{(0,z.f)(je,Le,()=>{const $e=be[Symbol.asyncIterator]();(0,z.f)(je,Le,()=>{$e.next().then(N=>{N.done?je.complete():je.next(N.value)})},0,!0)})})}var fe=x(1073),ae=x(2442),Ce=x(1537),Se=x(2317),Me=x(9908),ce=x(3754),Ee=x(7751);function Te(be,Le){return Le?function(be,Le){if(null!=be){if((0,fe.c)(be))return function(be,Le){return(0,D.Xf)(be).pipe((0,I.R)(Le),(0,ne.Q)(Le))}(be,Le);if((0,Ce.z)(be))return function(be,Le){return new _e.y(je=>{let $e=0;return Le.schedule(function(){$e===be.length?je.complete():(je.next(be[$e++]),je.closed||this.schedule())})})}(be,Le);if((0,ae.t)(be))return function(be,Le){return(0,D.Xf)(be).pipe((0,I.R)(Le),(0,ne.Q)(Le))}(be,Le);if((0,Me.D)(be))return $(be,Le);if((0,Se.T)(be))return function(be,Le){return new _e.y(je=>{let $e;return(0,z.f)(je,Le,()=>{$e=be[le.h](),(0,z.f)(je,Le,()=>{let N,V;try{({value:N,done:V}=$e.next())}catch(j){return void je.error(j)}V?je.complete():je.next(N)},0,!0)}),()=>(0,ue.m)(null==$e?void 0:$e.return)&&$e.return()})}(be,Le);if((0,Ee.L)(be))return function(be,Le){return $((0,Ee.Q)(be),Le)}(be,Le)}throw(0,ce.z)(be)}(be,Le):(0,D.Xf)(be)}},9985:(ke,me,x)=>{x.d(me,{Xf:()=>fe});var D=x(9162),ne=x(1537),I=x(2442),G=x(8305),pe=x(1073),_e=x(9908),oe=x(3754),le=x(2317),ue=x(7751),z=x(5044),J=x(5160),$=x(4816);function fe(xe){if(xe instanceof G.y)return xe;if(null!=xe){if((0,pe.c)(xe))return function(xe){return new G.y(Te=>{const be=xe[$.L]();if((0,z.m)(be.subscribe))return be.subscribe(Te);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,ne.z)(xe))return function(xe){return new G.y(Te=>{for(let be=0;be<xe.length&&!Te.closed;be++)Te.next(xe[be]);Te.complete()})}(xe);if((0,I.t)(xe))return function(xe){return new G.y(Te=>{xe.then(be=>{Te.closed||(Te.next(be),Te.complete())},be=>Te.error(be)).then(null,J.h)})}(xe);if((0,_e.D)(xe))return ce(xe);if((0,le.T)(xe))return function(xe){return new G.y(Te=>{for(const be of xe)if(Te.next(be),Te.closed)return;Te.complete()})}(xe);if((0,ue.L)(xe))return function(xe){return ce((0,ue.Q)(xe))}(xe)}throw(0,oe.z)(xe)}function ce(xe){return new G.y(Te=>{(function(xe,Te){var be,Le,je,$e;return(0,D.mG)(this,void 0,void 0,function*(){try{for(be=(0,D.KL)(xe);!(Le=yield be.next()).done;)if(Te.next(Le.value),Te.closed)return}catch(N){je={error:N}}finally{try{Le&&!Le.done&&($e=be.return)&&(yield $e.call(be))}finally{if(je)throw je.error}}Te.complete()})})(xe,Te).catch(be=>Te.error(be))})}},3384:(ke,me,x)=>{x.d(me,{T:()=>ae});var D=x(4753),ne=x(9985),I=x(9947),pe=(x(8395),x(8889)),oe=x(5044);function le(Ce,Se,Me=1/0){return(0,oe.m)(Se)?le((ce,Ee)=>(0,D.U)((Ve,xe)=>Se(ce,Ve,Ee,xe))((0,ne.Xf)(Ce(ce,Ee))),Me):("number"==typeof Se&&(Me=Se),(0,I.e)((ce,Ee)=>function(Ce,Se,Me,ce,Ee,Ve,xe,Te){const be=[];let Le=0,je=0,$e=!1;const N=()=>{$e&&!be.length&&!Le&&Se.complete()},V=U=>Le<ce?j(U):be.push(U),j=U=>{Le++;let X=!1;(0,ne.Xf)(Me(U,je++)).subscribe(new pe.Q(Se,B=>{Se.next(B)},()=>{X=!0},void 0,()=>{if(X)try{for(Le--;be.length&&Le<ce;){const B=be.shift();j(B)}N()}catch(B){Se.error(B)}}))};return Ce.subscribe(new pe.Q(Se,V,()=>{$e=!0,N()})),()=>{}}(ce,Ee,Ce,Me)))}var ue=x(4623),J=x(5583),$=x(8830),fe=x(5947);function ae(...Ce){const Se=(0,$.yG)(Ce),Me=(0,$._6)(Ce,1/0),ce=Ce;return ce.length?1===ce.length?(0,ne.Xf)(ce[0]):function(Ce=1/0){return le(ue.y,Ce)}(Me)((0,fe.D)(ce,Se)):J.E}},8889:(ke,me,x)=>{x.d(me,{Q:()=>ne});var D=x(584);class ne extends D.Lv{constructor(G,pe,_e,oe,le){super(G),this.onFinalize=le,this._next=pe?function(ue){try{pe(ue)}catch(z){G.error(z)}}:super._next,this._error=oe?function(ue){try{oe(ue)}catch(z){G.error(z)}finally{this.unsubscribe()}}:super._error,this._complete=_e?function(){try{_e()}catch(ue){G.error(ue)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var G;const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(G=this.onFinalize)||void 0===G||G.call(this))}}},4753:(ke,me,x)=>{x.d(me,{U:()=>I});var D=x(9947),ne=x(8889);function I(G,pe){return(0,D.e)((_e,oe)=>{let le=0;_e.subscribe(new ne.Q(oe,ue=>{oe.next(G.call(pe,ue,le++))}))})}},4763:(ke,me,x)=>{x.d(me,{Q:()=>G});var D=x(8395),ne=x(9947),I=x(8889);function G(pe,_e=0){return(0,ne.e)((oe,le)=>{oe.subscribe(new I.Q(le,ue=>(0,D.f)(le,pe,()=>le.next(ue),_e),()=>(0,D.f)(le,pe,()=>le.complete(),_e),ue=>(0,D.f)(le,pe,()=>le.error(ue),_e)))})}},3174:(ke,me,x)=>{x.d(me,{B:()=>_e});var D=x(5947),ne=x(9468),I=x(273),G=x(584),pe=x(9947);function _e(le={}){const{connector:ue=(()=>new I.x),resetOnError:z=!0,resetOnComplete:J=!0,resetOnRefCountZero:$=!0}=le;return fe=>{let ae=null,Ce=null,Se=null,Me=0,ce=!1,Ee=!1;const Ve=()=>{null==Ce||Ce.unsubscribe(),Ce=null},xe=()=>{Ve(),ae=Se=null,ce=Ee=!1},Te=()=>{const be=ae;xe(),null==be||be.unsubscribe()};return(0,pe.e)((be,Le)=>{Me++,!Ee&&!ce&&Ve();const je=Se=null!=Se?Se:ue();Le.add(()=>{Me--,0===Me&&!Ee&&!ce&&(Ce=oe(Te,$))}),je.subscribe(Le),ae||(ae=new G.Hp({next:$e=>je.next($e),error:$e=>{Ee=!0,Ve(),Ce=oe(xe,z,$e),je.error($e)},complete:()=>{ce=!0,Ve(),Ce=oe(xe,J),je.complete()}}),(0,D.D)(be).subscribe(ae))})(fe)}}function oe(le,ue,...z){return!0===ue?(le(),null):!1===ue?null:ue(...z).pipe((0,ne.q)(1)).subscribe(()=>le())}},5222:(ke,me,x)=>{x.d(me,{R:()=>ne});var D=x(9947);function ne(I,G=0){return(0,D.e)((pe,_e)=>{_e.add(I.schedule(()=>pe.subscribe(_e),G))})}},9468:(ke,me,x)=>{x.d(me,{q:()=>G});var D=x(5583),ne=x(9947),I=x(8889);function G(pe){return pe<=0?()=>D.E:(0,ne.e)((_e,oe)=>{let le=0;_e.subscribe(new I.Q(oe,ue=>{++le<=pe&&(oe.next(ue),pe<=le&&oe.complete())}))})}},2869:(ke,me,x)=>{x.d(me,{o:()=>pe});var D=x(7908);class ne extends D.w0{constructor(oe,le){super()}schedule(oe,le=0){return this}}const I={setInterval(..._e){const{delegate:oe}=I;return((null==oe?void 0:oe.setInterval)||setInterval)(..._e)},clearInterval(_e){const{delegate:oe}=I;return((null==oe?void 0:oe.clearInterval)||clearInterval)(_e)},delegate:void 0};var G=x(3980);class pe extends ne{constructor(oe,le){super(oe,le),this.scheduler=oe,this.work=le,this.pending=!1}schedule(oe,le=0){if(this.closed)return this;this.state=oe;const ue=this.id,z=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(z,ue,le)),this.pending=!0,this.delay=le,this.id=this.id||this.requestAsyncId(z,this.id,le),this}requestAsyncId(oe,le,ue=0){return I.setInterval(oe.flush.bind(oe,this),ue)}recycleAsyncId(oe,le,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return le;I.clearInterval(le)}execute(oe,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(oe,le);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,le){let z,ue=!1;try{this.work(oe)}catch(J){ue=!0,z=J||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:oe,scheduler:le}=this,{actions:ue}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,G.P)(ue,this),null!=oe&&(this.id=this.recycleAsyncId(le,oe,null)),this.delay=null,super.unsubscribe()}}}},8843:(ke,me,x)=>{x.d(me,{v:()=>I});var D=x(1733);class ne{constructor(pe,_e=ne.now){this.schedulerActionCtor=pe,this.now=_e}schedule(pe,_e=0,oe){return new this.schedulerActionCtor(this,pe).schedule(oe,_e)}}ne.now=D.l.now;class I extends ne{constructor(pe,_e=ne.now){super(pe,_e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(pe){const{actions:_e}=this;if(this._active)return void _e.push(pe);let oe;this._active=!0;do{if(oe=pe.execute(pe.state,pe.delay))break}while(pe=_e.shift());if(this._active=!1,oe){for(;pe=_e.shift();)pe.unsubscribe();throw oe}}}},2210:(ke,me,x)=>{x.d(me,{z:()=>I});var D=x(2869);const I=new(x(8843).v)(D.o)},1733:(ke,me,x)=>{x.d(me,{l:()=>D});const D={now:()=>(D.delegate||Date).now(),delegate:void 0}},2496:(ke,me,x)=>{x.d(me,{z:()=>D});const D={setTimeout(...ne){const{delegate:I}=D;return((null==I?void 0:I.setTimeout)||setTimeout)(...ne)},clearTimeout(ne){const{delegate:I}=D;return((null==I?void 0:I.clearTimeout)||clearTimeout)(ne)},delegate:void 0}},5497:(ke,me,x)=>{x.d(me,{h:()=>ne});const ne="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},4816:(ke,me,x)=>{x.d(me,{L:()=>D});const D="function"==typeof Symbol&&Symbol.observable||"@@observable"},8830:(ke,me,x)=>{x.d(me,{_6:()=>_e,jO:()=>G,yG:()=>pe});var D=x(5044);function I(oe){return oe[oe.length-1]}function G(oe){return(0,D.m)(I(oe))?oe.pop():void 0}function pe(oe){return function(oe){return oe&&(0,D.m)(oe.schedule)}(I(oe))?oe.pop():void 0}function _e(oe,le){return"number"==typeof I(oe)?oe.pop():le}},3980:(ke,me,x)=>{function D(ne,I){if(ne){const G=ne.indexOf(I);0<=G&&ne.splice(G,1)}}x.d(me,{P:()=>D})},4893:(ke,me,x)=>{function D(ne){const G=ne(pe=>{Error.call(pe),pe.stack=(new Error).stack});return G.prototype=Object.create(Error.prototype),G.prototype.constructor=G,G}x.d(me,{d:()=>D})},8706:(ke,me,x)=>{x.d(me,{x:()=>I,O:()=>G});var D=x(5367);let ne=null;function I(pe){if(D.v.useDeprecatedSynchronousErrorHandling){const _e=!ne;if(_e&&(ne={errorThrown:!1,error:null}),pe(),_e){const{errorThrown:oe,error:le}=ne;if(ne=null,oe)throw le}}else pe()}function G(pe){D.v.useDeprecatedSynchronousErrorHandling&&ne&&(ne.errorThrown=!0,ne.error=pe)}},8395:(ke,me,x)=>{function D(ne,I,G,pe=0,_e=!1){const oe=I.schedule(function(){G(),_e?ne.add(this.schedule(null,pe)):this.unsubscribe()},pe);if(ne.add(oe),!_e)return oe}x.d(me,{f:()=>D})},4623:(ke,me,x)=>{function D(ne){return ne}x.d(me,{y:()=>D})},1537:(ke,me,x)=>{x.d(me,{z:()=>D});const D=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},9908:(ke,me,x)=>{x.d(me,{D:()=>ne});var D=x(5044);function ne(I){return Symbol.asyncIterator&&(0,D.m)(null==I?void 0:I[Symbol.asyncIterator])}},5044:(ke,me,x)=>{function D(ne){return"function"==typeof ne}x.d(me,{m:()=>D})},1073:(ke,me,x)=>{x.d(me,{c:()=>I});var D=x(4816),ne=x(5044);function I(G){return(0,ne.m)(G[D.L])}},2317:(ke,me,x)=>{x.d(me,{T:()=>I});var D=x(5497),ne=x(5044);function I(G){return(0,ne.m)(null==G?void 0:G[D.h])}},2442:(ke,me,x)=>{x.d(me,{t:()=>ne});var D=x(5044);function ne(I){return(0,D.m)(null==I?void 0:I.then)}},7751:(ke,me,x)=>{x.d(me,{Q:()=>I,L:()=>G});var D=x(9162),ne=x(5044);function I(pe){return(0,D.FC)(this,arguments,function*(){const oe=pe.getReader();try{for(;;){const{value:le,done:ue}=yield(0,D.qq)(oe.read());if(ue)return yield(0,D.qq)(void 0);yield yield(0,D.qq)(le)}}finally{oe.releaseLock()}})}function G(pe){return(0,ne.m)(null==pe?void 0:pe.getReader)}},9947:(ke,me,x)=>{x.d(me,{e:()=>I});var D=x(5044);function I(G){return pe=>{if(function(G){return(0,D.m)(null==G?void 0:G.lift)}(pe))return pe.lift(function(_e){try{return G(_e,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},6921:(ke,me,x)=>{function D(){}x.d(me,{Z:()=>D})},5160:(ke,me,x)=>{x.d(me,{h:()=>I});var D=x(5367),ne=x(2496);function I(G){ne.z.setTimeout(()=>{const{onUnhandledError:pe}=D.v;if(!pe)throw G;pe(G)})}},3754:(ke,me,x)=>{function D(ne){return new TypeError(`You provided ${null!==ne&&"object"==typeof ne?"an invalid object":`'${ne}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}x.d(me,{z:()=>D})},7742:(ke,me,x)=>{var D=x(3668);let ne=null;function I(){return ne}const oe=new D.OlP("DocumentToken");var V=(()=>((V=V||{})[V.Zero=0]="Zero",V[V.One=1]="One",V[V.Two=2]="Two",V[V.Few=3]="Few",V[V.Many=4]="Many",V[V.Other=5]="Other",V))();const _t=D.kL8;class co{}let Pn=(()=>{class l extends co{constructor(d){super(),this.locale=d}getPluralCategory(d,m){switch(_t(m||this.locale)(d)){case V.Zero:return"zero";case V.One:return"one";case V.Two:return"two";case V.Few:return"few";case V.Many:return"many";default:return"other"}}}return l.\u0275fac=function(d){return new(d||l)(D.LFG(D.soG))},l.\u0275prov=D.Yz7({token:l,factory:l.\u0275fac}),l})(),wt=(()=>{class l{constructor(d,m){this._viewContainer=d,this._context=new fo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=m}set ngIf(d){this._context.$implicit=this._context.ngIf=d,this._updateView()}set ngIfThen(d){ci("ngIfThen",d),this._thenTemplateRef=d,this._thenViewRef=null,this._updateView()}set ngIfElse(d){ci("ngIfElse",d),this._elseTemplateRef=d,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(d,m){return!0}}return l.\u0275fac=function(d){return new(d||l)(D.Y36(D.s_b),D.Y36(D.Rgc))},l.\u0275dir=D.lG2({type:l,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),l})();class fo{constructor(){this.$implicit=null,this.ngIf=null}}function ci(l,f){if(f&&!f.createEmbeddedView)throw new Error(`${l} must be a TemplateRef, but received '${(0,D.AaK)(f)}'.`)}let zt=(()=>{class l{constructor(d,m,E){this._ngEl=d,this._differs=m,this._renderer=E,this._ngStyle=null,this._differ=null}set ngStyle(d){this._ngStyle=d,!this._differ&&d&&(this._differ=this._differs.find(d).create())}ngDoCheck(){if(this._differ){const d=this._differ.diff(this._ngStyle);d&&this._applyChanges(d)}}_setStyle(d,m){const[E,w]=d.split(".");null!=(m=null!=m&&w?`${m}${w}`:m)?this._renderer.setStyle(this._ngEl.nativeElement,E,m):this._renderer.removeStyle(this._ngEl.nativeElement,E)}_applyChanges(d){d.forEachRemovedItem(m=>this._setStyle(m.key,null)),d.forEachAddedItem(m=>this._setStyle(m.key,m.currentValue)),d.forEachChangedItem(m=>this._setStyle(m.key,m.currentValue))}}return l.\u0275fac=function(d){return new(d||l)(D.Y36(D.SBq),D.Y36(D.aQg),D.Y36(D.Qsj))},l.\u0275dir=D.lG2({type:l,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),l})(),Wu=(()=>{class l{}return l.\u0275fac=function(d){return new(d||l)},l.\u0275mod=D.oAB({type:l}),l.\u0275inj=D.cJS({providers:[{provide:co,useClass:Pn}]}),l})();class et extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var l;l=new et,ne||(ne=l)}onAndCancel(f,d,m){return f.addEventListener(d,m,!1),()=>{f.removeEventListener(d,m,!1)}}dispatchEvent(f,d){f.dispatchEvent(d)}remove(f){f.parentNode&&f.parentNode.removeChild(f)}createElement(f,d){return(d=d||this.getDefaultDocument()).createElement(f)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(f){return f.nodeType===Node.ELEMENT_NODE}isShadowRoot(f){return f instanceof DocumentFragment}getGlobalEventTarget(f,d){return"window"===d?window:"document"===d?f:"body"===d?f.body:null}getBaseHref(f){const d=(Js=Js||document.querySelector("base"),Js?Js.getAttribute("href"):null);return null==d?null:function(l){Nn=Nn||document.createElement("a"),Nn.setAttribute("href",l);const f=Nn.pathname;return"/"===f.charAt(0)?f:`/${f}`}(d)}resetBaseElement(){Js=null}getUserAgent(){return window.navigator.userAgent}getCookie(f){return function(l,f){f=encodeURIComponent(f);for(const d of l.split(";")){const m=d.indexOf("="),[E,w]=-1==m?[d,""]:[d.slice(0,m),d.slice(m+1)];if(E.trim()===f)return decodeURIComponent(w)}return null}(document.cookie,f)}}let Nn,Js=null;const vo=new D.OlP("TRANSITION_ID"),On=[{provide:D.ip1,useFactory:function(l,f,d){return()=>{d.get(D.CZH).donePromise.then(()=>{const m=I(),E=f.querySelectorAll(`style[ng-transition="${l}"]`);for(let w=0;w<E.length;w++)m.remove(E[w])})}},deps:[vo,oe,D.zs3],multi:!0}];class Gr{static init(){(0,D.VLi)(new Gr)}addToWindow(f){D.dqk.getAngularTestability=(m,E=!0)=>{const w=f.findTestabilityInTree(m,E);if(null==w)throw new Error("Could not find testability for element.");return w},D.dqk.getAllAngularTestabilities=()=>f.getAllTestabilities(),D.dqk.getAllAngularRootElements=()=>f.getAllRootElements(),D.dqk.frameworkStabilizers||(D.dqk.frameworkStabilizers=[]),D.dqk.frameworkStabilizers.push(m=>{const E=D.dqk.getAllAngularTestabilities();let w=E.length,M=!1;const W=function(q){M=M||q,w--,0==w&&m(M)};E.forEach(function(q){q.whenStable(W)})})}findTestabilityInTree(f,d,m){if(null==d)return null;const E=f.getTestability(d);return null!=E?E:m?I().isShadowRoot(d)?this.findTestabilityInTree(f,d.host,!0):this.findTestabilityInTree(f,d.parentElement,!0):null}}let ts=(()=>{class l{build(){return new XMLHttpRequest}}return l.\u0275fac=function(d){return new(d||l)},l.\u0275prov=D.Yz7({token:l,factory:l.\u0275fac}),l})();const rs=new D.OlP("EventManagerPlugins");let en=(()=>{class l{constructor(d,m){this._zone=m,this._eventNameToPlugin=new Map,d.forEach(E=>E.manager=this),this._plugins=d.slice().reverse()}addEventListener(d,m,E){return this._findPluginFor(m).addEventListener(d,m,E)}addGlobalEventListener(d,m,E){return this._findPluginFor(m).addGlobalEventListener(d,m,E)}getZone(){return this._zone}_findPluginFor(d){const m=this._eventNameToPlugin.get(d);if(m)return m;const E=this._plugins;for(let w=0;w<E.length;w++){const M=E[w];if(M.supports(d))return this._eventNameToPlugin.set(d,M),M}throw new Error(`No event manager plugin found for event ${d}`)}}return l.\u0275fac=function(d){return new(d||l)(D.LFG(rs),D.LFG(D.R0b))},l.\u0275prov=D.Yz7({token:l,factory:l.\u0275fac}),l})();class ea{constructor(f){this._doc=f}addGlobalEventListener(f,d,m){const E=I().getGlobalEventTarget(this._doc,f);if(!E)throw new Error(`Unsupported event target ${E} for event ${d}`);return this.addEventListener(E,d,m)}}let di=(()=>{class l{constructor(){this._stylesSet=new Set}addStyles(d){const m=new Set;d.forEach(E=>{this._stylesSet.has(E)||(this._stylesSet.add(E),m.add(E))}),this.onStylesAdded(m)}onStylesAdded(d){}getAllStyles(){return Array.from(this._stylesSet)}}return l.\u0275fac=function(d){return new(d||l)},l.\u0275prov=D.Yz7({token:l,factory:l.\u0275fac}),l})(),Un=(()=>{class l extends di{constructor(d){super(),this._doc=d,this._hostNodes=new Map,this._hostNodes.set(d.head,[])}_addStylesToHost(d,m,E){d.forEach(w=>{const M=this._doc.createElement("style");M.textContent=w,E.push(m.appendChild(M))})}addHost(d){const m=[];this._addStylesToHost(this._stylesSet,d,m),this._hostNodes.set(d,m)}removeHost(d){const m=this._hostNodes.get(d);m&&m.forEach(Do),this._hostNodes.delete(d)}onStylesAdded(d){this._hostNodes.forEach((m,E)=>{this._addStylesToHost(d,E,m)})}ngOnDestroy(){this._hostNodes.forEach(d=>d.forEach(Do))}}return l.\u0275fac=function(d){return new(d||l)(D.LFG(oe))},l.\u0275prov=D.Yz7({token:l,factory:l.\u0275fac}),l})();function Do(l){I().remove(l)}const is={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},os=/%COMP%/g;function yr(l,f,d){for(let m=0;m<f.length;m++){let E=f[m];Array.isArray(E)?yr(l,E,d):(E=E.replace(os,l),d.push(E))}return d}function sr(l){return f=>{if("__ngUnwrap__"===f)return l;!1===l(f)&&(f.preventDefault(),f.returnValue=!1)}}let ss=(()=>{class l{constructor(d,m,E){this.eventManager=d,this.sharedStylesHost=m,this.appId=E,this.rendererByCompId=new Map,this.defaultRenderer=new na(d)}createRenderer(d,m){if(!d||!m)return this.defaultRenderer;switch(m.encapsulation){case D.ifc.Emulated:{let E=this.rendererByCompId.get(m.id);return E||(E=new za(this.eventManager,this.sharedStylesHost,m,this.appId),this.rendererByCompId.set(m.id,E)),E.applyToHost(d),E}case 1:case D.ifc.ShadowDom:return new Yu(this.eventManager,this.sharedStylesHost,d,m);default:if(!this.rendererByCompId.has(m.id)){const E=yr(m.id,m.styles,[]);this.sharedStylesHost.addStyles(E),this.rendererByCompId.set(m.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return l.\u0275fac=function(d){return new(d||l)(D.LFG(en),D.LFG(Un),D.LFG(D.AFp))},l.\u0275prov=D.Yz7({token:l,factory:l.\u0275fac}),l})();class na{constructor(f){this.eventManager=f,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(f,d){return d?document.createElementNS(is[d]||d,f):document.createElement(f)}createComment(f){return document.createComment(f)}createText(f){return document.createTextNode(f)}appendChild(f,d){f.appendChild(d)}insertBefore(f,d,m){f&&f.insertBefore(d,m)}removeChild(f,d){f&&f.removeChild(d)}selectRootElement(f,d){let m="string"==typeof f?document.querySelector(f):f;if(!m)throw new Error(`The selector "${f}" did not match any elements`);return d||(m.textContent=""),m}parentNode(f){return f.parentNode}nextSibling(f){return f.nextSibling}setAttribute(f,d,m,E){if(E){d=E+":"+d;const w=is[E];w?f.setAttributeNS(w,d,m):f.setAttribute(d,m)}else f.setAttribute(d,m)}removeAttribute(f,d,m){if(m){const E=is[m];E?f.removeAttributeNS(E,d):f.removeAttribute(`${m}:${d}`)}else f.removeAttribute(d)}addClass(f,d){f.classList.add(d)}removeClass(f,d){f.classList.remove(d)}setStyle(f,d,m,E){E&(D.JOm.DashCase|D.JOm.Important)?f.style.setProperty(d,m,E&D.JOm.Important?"important":""):f.style[d]=m}removeStyle(f,d,m){m&D.JOm.DashCase?f.style.removeProperty(d):f.style[d]=""}setProperty(f,d,m){f[d]=m}setValue(f,d){f.nodeValue=d}listen(f,d,m){return"string"==typeof f?this.eventManager.addGlobalEventListener(f,d,sr(m)):this.eventManager.addEventListener(f,d,sr(m))}}class za extends na{constructor(f,d,m,E){super(f),this.component=m;const w=yr(E+"-"+m.id,m.styles,[]);d.addStyles(w),this.contentAttr="_ngcontent-%COMP%".replace(os,E+"-"+m.id),this.hostAttr=function(l){return"_nghost-%COMP%".replace(os,l)}(E+"-"+m.id)}applyToHost(f){super.setAttribute(f,this.hostAttr,"")}createElement(f,d){const m=super.createElement(f,d);return super.setAttribute(m,this.contentAttr,""),m}}class Yu extends na{constructor(f,d,m,E){super(f),this.sharedStylesHost=d,this.hostEl=m,this.shadowRoot=m.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const w=yr(E.id,E.styles,[]);for(let M=0;M<w.length;M++){const W=document.createElement("style");W.textContent=w[M],this.shadowRoot.appendChild(W)}}nodeOrShadowRoot(f){return f===this.hostEl?this.shadowRoot:f}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(f,d){return super.appendChild(this.nodeOrShadowRoot(f),d)}insertBefore(f,d,m){return super.insertBefore(this.nodeOrShadowRoot(f),d,m)}removeChild(f,d){return super.removeChild(this.nodeOrShadowRoot(f),d)}parentNode(f){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(f)))}}let Hn=(()=>{class l extends ea{constructor(d){super(d)}supports(d){return!0}addEventListener(d,m,E){return d.addEventListener(m,E,!1),()=>this.removeEventListener(d,m,E)}removeEventListener(d,m,E){return d.removeEventListener(m,E)}}return l.\u0275fac=function(d){return new(d||l)(D.LFG(oe))},l.\u0275prov=D.Yz7({token:l,factory:l.\u0275fac}),l})();const qu=["alt","control","meta","shift"],hi={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ia={alt:l=>l.altKey,control:l=>l.ctrlKey,meta:l=>l.metaKey,shift:l=>l.shiftKey};let us=(()=>{class l extends ea{constructor(d){super(d)}supports(d){return null!=l.parseEventName(d)}addEventListener(d,m,E){const w=l.parseEventName(m),M=l.eventCallback(w.fullKey,E,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>I().onAndCancel(d,w.domEventName,M))}static parseEventName(d){const m=d.toLowerCase().split("."),E=m.shift();if(0===m.length||"keydown"!==E&&"keyup"!==E)return null;const w=l._normalizeKey(m.pop());let M="";if(qu.forEach(q=>{const ge=m.indexOf(q);ge>-1&&(m.splice(ge,1),M+=q+".")}),M+=w,0!=m.length||0===w.length)return null;const W={};return W.domEventName=E,W.fullKey=M,W}static getEventFullKey(d){let m="",E=function(l){let f=l.key;if(null==f){if(f=l.keyIdentifier,null==f)return"Unidentified";f.startsWith("U+")&&(f=String.fromCharCode(parseInt(f.substring(2),16)),3===l.location&&Yt.hasOwnProperty(f)&&(f=Yt[f]))}return hi[f]||f}(d);return E=E.toLowerCase()," "===E?E="space":"."===E&&(E="dot"),qu.forEach(w=>{w!=E&&ia[w](d)&&(m+=w+".")}),m+=E,m}static eventCallback(d,m,E){return w=>{l.getEventFullKey(w)===d&&E.runGuarded(()=>m(w))}}static _normalizeKey(d){return"esc"===d?"escape":d}}return l.\u0275fac=function(d){return new(d||l)(D.LFG(oe))},l.\u0275prov=D.Yz7({token:l,factory:l.\u0275fac}),l})();const Cr=(0,D.eFA)(D._c5,"browser",[{provide:D.Lbi,useValue:"browser"},{provide:D.g9A,useValue:function(){et.makeCurrent(),Gr.init()},multi:!0},{provide:oe,useFactory:function(){return(0,D.RDi)(document),document},deps:[]}]),Xu=[[],{provide:D.zSh,useValue:"root"},{provide:D.qLn,useFactory:function(){return new D.qLn},deps:[]},{provide:rs,useClass:Hn,multi:!0,deps:[oe,D.R0b,D.Lbi]},{provide:rs,useClass:us,multi:!0,deps:[oe]},[],{provide:ss,useClass:ss,deps:[en,Un,D.AFp]},{provide:D.FYo,useExisting:ss},{provide:di,useExisting:Un},{provide:Un,useClass:Un,deps:[oe]},{provide:D.dDg,useClass:D.dDg,deps:[D.R0b]},{provide:en,useClass:en,deps:[rs,D.R0b]},{provide:class{},useClass:ts,deps:[]},[]];let pi=(()=>{class l{constructor(d){if(d)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(d){return{ngModule:l,providers:[{provide:D.AFp,useValue:d.appId},{provide:vo,useExisting:D.AFp},On]}}}return l.\u0275fac=function(d){return new(d||l)(D.LFG(l,12))},l.\u0275mod=D.oAB({type:l}),l.\u0275inj=D.cJS({providers:Xu,imports:[Wu,D.hGG]}),l})();"undefined"!=typeof window&&window;var xt=x(2436),Qr=x(2210),ps=x(8305),Ao=x(8830),Lr=x(5947);function Dr(...l){const f=(0,Ao.yG)(l);return(0,Lr.D)(l,f)}var eu=x(3384),br=x(4753),aa=x(3174),gs=x(9985),wr=x(9947),Ir=x(8889);function Tr(l,f){return(0,wr.e)((d,m)=>{let E=null,w=0,M=!1;const W=()=>M&&!E&&m.complete();d.subscribe(new Ir.Q(m,q=>{null==E||E.unsubscribe();let ge=0;const we=w++;(0,gs.Xf)(l(q,we)).subscribe(E=new Ir.Q(m,Oe=>m.next(f?f(q,Oe,we,ge++):Oe),()=>{E=null,W()}))},()=>{M=!0,W()}))})}function ua(l,f,d,m,E){return(w,M)=>{let W=d,q=f,ge=0;w.subscribe(new Ir.Q(M,we=>{const Oe=ge++;q=W?l(q,we,Oe):(W=!0,we),m&&M.next(q)},E&&(()=>{W&&M.next(q),M.complete()})))}}function ji(l,f){return(0,wr.e)(ua(l,f,arguments.length>=2,!0))}var Ro=x(4623);function tu(l,f){return l===f}var Mo=x(6921);x(6522),x(273);var Sr=x(4763);x(1733),(0,x(4893).d)(l=>function(){l(this),this.name="EmptyError",this.message="no elements in sequence"}),x(9468),x(5044),x(5222);const vs=new D.OlP("angularfire2.auth.use-emulator");var mi=x(7713);function ys(l){return null==l}function _i(l){return"function"==typeof l.set}function Yr(l,f){return _i(f)?f:l.ref(f)}function fa(l,f){if(function(l){return"string"==typeof l}(l))return f.stringCase();if(_i(l))return f.firebaseCase();if(function(l){return"function"==typeof l.exportVal}(l))return f.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof l)}function Wi(l,f,d="on",m=Qr.z){return new ps.y(E=>{let w=null;return w=l[d](f,(M,W)=>{m.schedule(()=>{E.next({snapshot:M,prevKey:W})}),"once"===d&&m.schedule(()=>E.complete())},M=>{m.schedule(()=>E.error(M))}),"on"===d?{unsubscribe(){null!=w&&l.off(f,w)}}:{unsubscribe(){}}}).pipe((0,br.U)(E=>{const{snapshot:w,prevKey:M}=E;let W=null;return w.exists()&&(W=w.key),{type:f,payload:w,prevKey:M,key:W}}),(0,aa.B)())}function vi(l,f){const d=l.length;for(let m=0;m<d;m++)if(l[m].payload.key===f)return m;return-1}function ul(l,f){const{payload:d,prevKey:m,key:E}=f,w=vi(l,E),M=function(l,f){if(ys(f))return 0;{const d=vi(l,f);return-1===d?l.length:d+1}}(l,m);switch(f.type){case"value":if(f.payload&&f.payload.exists()){let W=null;f.payload.forEach(q=>{const ge={payload:q,type:"value",prevKey:W,key:q.key};return W=q.key,l=[...l,ge],!1})}return l;case"child_added":if(w>-1){const W=l[w-1];(W&&W.key||null)!==m&&(l=l.filter(q=>q.payload.key!==d.key)).splice(M,0,f)}else{if(null==m)return[f,...l];(l=l.slice()).splice(M,0,f)}return l;case"child_removed":return l.filter(W=>W.payload.key!==d.key);case"child_changed":return l.map(W=>W.payload.key===E?f:W);case"child_moved":if(w>-1){const W=l.splice(w,1)[0];return(l=l.slice()).splice(M,0,W),l}return l;default:return l}}function Wn(l){return(ys(l)||0===l.length)&&(l=["child_added","child_removed","child_changed","child_moved"]),l}function ha(l,f,d){return function(l,f,d){return Wi(l,"value","once",d).pipe(Tr(m=>{const E=[Dr(m)];return f.forEach(w=>E.push(Wi(l,w,"on",d))),(0,eu.T)(...E).pipe(ji(ul,[]))}),function(l,f=Ro.y){return l=null!=l?l:tu,(0,wr.e)((d,m)=>{let E,w=!0;d.subscribe(new Ir.Q(m,M=>{const W=f(M);(w||!l(E,W))&&(w=!1,E=W,m.next(M))}))})}())}(l,f=Wn(f),d)}function Kr(l,f,d){const m=(f=Wn(f)).map(E=>Wi(l,E,"on",d));return(0,eu.T)(...m)}function Es(l,f){return function(m,E){return fa(m,{stringCase:()=>l.child(m)[f](E),firebaseCase:()=>m[f](E),snapshotCase:()=>m.ref[f](E)})}}function Uc(l){return function(d){return d?fa(d,{stringCase:()=>l.child(d).remove(),firebaseCase:()=>d.remove(),snapshotCase:()=>d.ref.remove()}):l.remove()}}function ru(l,f){return function(){return Wi(l,"value","on",f)}}const Cs=new D.OlP("angularfire2.realtimeDatabaseURL"),yi=new D.OlP("angularfire2.database.use-emulator");let pa=(()=>{class l{constructor(d,m,E,w,M,W,q){this.schedulers=new xt.HU(M),this.keepUnstableUntilFirst=(0,xt.ss)(this.schedulers);const ge=W,we=(0,xt.on)(d,M,m);!mi.Z.auth&&q&&(0,xt.yq)(),this.database=(0,xt.sI)(`${we.name}.database.${E}`,"AngularFireDatabase",we,()=>{const Oe=M.runOutsideAngular(()=>we.database(E||void 0));return ge&&Oe.useEmulator(...ge),Oe},[ge])}list(d,m){const E=this.schedulers.ngZone.runOutsideAngular(()=>Yr(this.database,d));let w=E;return m&&(w=m(E)),function(l,f){const d=f.schedulers.outsideAngular,m=f.schedulers.ngZone.run(()=>l.ref);return{query:l,update:Es(m,"update"),set:Es(m,"set"),push:E=>m.push(E),remove:Uc(m),snapshotChanges:E=>ha(l,E,d).pipe(f.keepUnstableUntilFirst),stateChanges:E=>Kr(l,E,d).pipe(f.keepUnstableUntilFirst),auditTrail:E=>function(l,f,d){return function(l,f,d){return function(l,f){return Wi(l,"value","on",f).pipe((0,br.U)(d=>{let m;return d.payload.forEach(E=>(m=E.key,!1)),{data:d,lastKeyToLoad:m}}))}(l,d).pipe(function(...l){const f=(0,Ao.jO)(l);return(0,wr.e)((d,m)=>{const E=l.length,w=new Array(E);let M=l.map(()=>!1),W=!1;for(let q=0;q<E;q++)(0,gs.Xf)(l[q]).subscribe(new Ir.Q(m,ge=>{w[q]=ge,!W&&!M[q]&&(M[q]=!0,(W=M.every(Ro.y))&&(M=null))},Mo.Z));d.subscribe(new Ir.Q(m,q=>{if(W){const ge=[q,...w];m.next(f?f(...ge):ge)}}))})}(f),(0,br.U)(([E,w])=>{const M=E.lastKeyToLoad,W=w.map(q=>q.key);return{actions:w,lastKeyToLoad:M,loadedKeys:W}}),(0,wr.e)((f,d)=>{let m=!1;f.subscribe(new Ir.Q(d,w=>(m||(m=!(E=>-1===E.loadedKeys.indexOf(E.lastKeyToLoad))(w)))&&d.next(w)))}),(0,br.U)(E=>E.actions))}(l,Kr(l,f).pipe(ji((E,w)=>[...E,w],[])),d)}(l,E,d).pipe(f.keepUnstableUntilFirst),valueChanges:(E,w)=>ha(l,E,d).pipe((0,br.U)(W=>W.map(q=>w&&w.idField?Object.assign(Object.assign({},q.payload.val()),{[w.idField]:q.key}):q.payload.val())),f.keepUnstableUntilFirst)}}(w,this)}object(d){return function(l,f){return{query:l,snapshotChanges:()=>ru(l,f.schedulers.outsideAngular)().pipe(f.keepUnstableUntilFirst),update:d=>l.ref.update(d),set:d=>l.ref.set(d),remove:()=>l.ref.remove(),valueChanges:()=>ru(l,f.schedulers.outsideAngular)().pipe(f.keepUnstableUntilFirst,(0,br.U)(m=>m.payload.exists()?m.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Yr(this.database,d)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return l.\u0275fac=function(d){return new(d||l)(D.LFG(xt.Dh),D.LFG(xt.xv,8),D.LFG(Cs,8),D.LFG(D.Lbi),D.LFG(D.R0b),D.LFG(yi,8),D.LFG(vs,8))},l.\u0275prov=D.Yz7({factory:function(){return new l(D.LFG(xt.Dh),D.LFG(xt.xv,8),D.LFG(Cs,8),D.LFG(D.Lbi),D.LFG(D.R0b),D.LFG(yi,8),D.LFG(vs,8))},token:l,providedIn:"any"}),l})(),$i=(()=>{class l{}return l.\u0275fac=function(d){return new(d||l)},l.\u0275mod=D.oAB({type:l}),l.\u0275inj=D.cJS({providers:[pa]}),l})();var qr=x(417),tn=x(4762),$n=x(3923),Hc=x(8391),ga="firebasestorage.googleapis.com",ma="storageBucket",sn=function(l){function f(d,m){var E=l.call(this,on(d),"Firebase Storage: "+m+" ("+on(d)+")")||this;return E.customData={serverResponse:null},E._baseMessage=E.message,Object.setPrototypeOf(E,f.prototype),E}return(0,tn.ZT)(f,l),f.prototype._codeEquals=function(d){return on(d)===this.code},Object.defineProperty(f.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(d){this.customData.serverResponse=d,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),f}($n.ZR);function on(l){return"storage/"+l}function _a(){return new sn("unknown","An unknown error occurred, please check the error payload for server response.")}function ur(){return new sn("canceled","User canceled the upload/download.")}function Ts(){return new sn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function qn(l){return new sn("invalid-argument",l)}function Ss(){return new sn("app-deleted","The Firebase app was deleted.")}function fl(l){return new sn("invalid-root-operation","The operation '"+l+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function As(l,f){return new sn("invalid-format","String does not match format '"+l+"': "+f)}function Zr(l){throw new sn("internal-error","Internal error: "+l)}var Ln={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},au=function(f,d){this.data=f,this.contentType=d||null};function uu(l,f){switch(l){case Ln.RAW:return new au(Lo(f));case Ln.BASE64:case Ln.BASE64URL:return new au(Vo(l,f));case Ln.DATA_URL:return new au(function(l){var f=new dl(l);return f.base64?Vo(Ln.BASE64,f.rest):function(l){var f;try{f=decodeURIComponent(l)}catch(d){throw As(Ln.DATA_URL,"Malformed data URL.")}return Lo(f)}(f.rest)}(f),function(l){return new dl(l).contentType}(f))}throw _a()}function Lo(l){for(var f=[],d=0;d<l.length;d++){var m=l.charCodeAt(d);if(m<=127)f.push(m);else if(m<=2047)f.push(192|m>>6,128|63&m);else if(55296==(64512&m))if(d<l.length-1&&56320==(64512&l.charCodeAt(d+1))){var w=m,M=l.charCodeAt(++d);f.push(240|(m=65536|(1023&w)<<10|1023&M)>>18,128|m>>12&63,128|m>>6&63,128|63&m)}else f.push(239,191,189);else 56320==(64512&m)?f.push(239,191,189):f.push(224|m>>12,128|m>>6&63,128|63&m)}return new Uint8Array(f)}function Vo(l,f){switch(l){case Ln.BASE64:var d=-1!==f.indexOf("-"),m=-1!==f.indexOf("_");if(d||m)throw As(l,"Invalid character '"+(d?"-":"_")+"' found: is it base64url encoded?");break;case Ln.BASE64URL:var w=-1!==f.indexOf("+"),M=-1!==f.indexOf("/");if(w||M)throw As(l,"Invalid character '"+(w?"+":"/")+"' found: is it base64 encoded?");f=f.replace(/-/g,"+").replace(/_/g,"/")}var W;try{W=function(l){return atob(l)}(f)}catch(we){throw As(l,"Invalid character found")}for(var q=new Uint8Array(W.length),ge=0;ge<W.length;ge++)q[ge]=W.charCodeAt(ge);return q}var dl=function(f){this.base64=!1,this.contentType=null;var d=f.match(/^data:([^,]+)?,/);if(null===d)throw As(Ln.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var m=d[1]||null;null!=m&&(this.base64=function(l,f){return l.length>=f.length&&l.substring(l.length-f.length)===f}(m,";base64"),this.contentType=this.base64?m.substring(0,m.length-";base64".length):m),this.rest=f.substring(f.indexOf(",")+1)},fn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function cu(l){switch(l){case"running":case"pausing":case"canceling":return fn.RUNNING;case"paused":return fn.PAUSED;case"success":return fn.SUCCESS;case"canceled":return fn.CANCELED;default:return fn.ERROR}}var gn=(()=>{return(l=gn||(gn={}))[l.NO_ERROR=0]="NO_ERROR",l[l.NETWORK_ERROR=1]="NETWORK_ERROR",l[l.ABORT=2]="ABORT",gn;var l})(),Rs=function(){function l(){var f=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=gn.NO_ERROR,this.sendPromise_=new Promise(function(d){f.xhr_.addEventListener("abort",function(){f.errorCode_=gn.ABORT,d()}),f.xhr_.addEventListener("error",function(){f.errorCode_=gn.NETWORK_ERROR,d()}),f.xhr_.addEventListener("load",function(){d()})})}return l.prototype.send=function(f,d,m,E){if(this.sent_)throw Zr("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(d,f,!0),void 0!==E)for(var w in E)E.hasOwnProperty(w)&&this.xhr_.setRequestHeader(w,E[w].toString());return void 0!==m?this.xhr_.send(m):this.xhr_.send(),this.sendPromise_},l.prototype.getErrorCode=function(){if(!this.sent_)throw Zr("cannot .getErrorCode() before sending");return this.errorCode_},l.prototype.getStatus=function(){if(!this.sent_)throw Zr("cannot .getStatus() before sending");try{return this.xhr_.status}catch(f){return-1}},l.prototype.getResponseText=function(){if(!this.sent_)throw Zr("cannot .getResponseText() before sending");return this.xhr_.responseText},l.prototype.abort=function(){this.xhr_.abort()},l.prototype.getResponseHeader=function(f){return this.xhr_.getResponseHeader(f)},l.prototype.addUploadProgressListener=function(f){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",f)},l.prototype.removeUploadProgressListener=function(f){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",f)},l}(),pl=function(){function l(){}return l.prototype.createConnection=function(){return new Rs},l}(),Sn=function(){function l(f,d){this.bucket=f,this.path_=d}return Object.defineProperty(l.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),l.prototype.fullServerUrl=function(){var f=encodeURIComponent;return"/b/"+f(this.bucket)+"/o/"+f(this.path)},l.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},l.makeFromBucketSpec=function(f,d){var m;try{m=l.makeFromUrl(f,d)}catch(E){return new l(f,"")}if(""===m.path)return m;throw function(l){return new sn("invalid-default-bucket","Invalid default bucket '"+l+"'.")}(f)},l.makeFromUrl=function(f,d){var m=null,E="([A-Za-z0-9.\\-_]+)",W=new RegExp("^gs://"+E+"(/(.*))?$","i");function ge(c){c.path_=decodeURIComponent(c.path)}for(var Oe=d.replace(/[.]/g,"\\."),kt=[{regex:W,indices:{bucket:1,path:3},postModify:function(c){"/"===c.path.charAt(c.path.length-1)&&(c.path_=c.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+Oe+"/v[A-Za-z0-9_]+/b/"+E+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:ge},{regex:new RegExp("^https?://"+(d===ga?"(?:storage.googleapis.com|storage.cloud.google.com)":d)+"/"+E+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:ge}],Dn=0;Dn<kt.length;Dn++){var gt=kt[Dn],o=gt.regex.exec(f);if(o){var a=o[gt.indices.path];a||(a=""),m=new l(o[gt.indices.bucket],a),gt.postModify(m);break}}if(null==m)throw function(l){return new sn("invalid-url","Invalid URL '"+l+"'.")}(f);return m},l}(),ya=function(){function l(f){this.promise_=Promise.reject(f)}return l.prototype.getPromise=function(){return this.promise_},l.prototype.cancel=function(f){},l}();function Ea(l){return"string"==typeof l||l instanceof String}function Br(l){return Jr()&&l instanceof Blob}function Jr(){return"undefined"!=typeof Blob}function Ci(l,f,d,m){if(m<f)throw qn("Invalid value for '"+l+"'. Expected "+f+" or greater.");if(m>d)throw qn("Invalid value for '"+l+"'. Expected "+d+" or less.")}function ei(l,f){var d=f.match(/^(\w+):\/\/.+/),E=f;return null==(null==d?void 0:d[1])&&(E="https://"+f),E+"/v0"+l}function _l(l){var f=encodeURIComponent,d="?";for(var m in l)l.hasOwnProperty(m)&&(d=d+(f(m)+"=")+f(l[m])+"&");return d.slice(0,-1)}var vl=function(){function l(f,d,m,E,w,M,W,q,ge,we,Oe){var Xe=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=f,this.method_=d,this.headers_=m,this.body_=E,this.successCodes_=w.slice(),this.additionalRetryCodes_=M.slice(),this.callback_=W,this.errorCallback_=q,this.progressCallback_=we,this.timeout_=ge,this.pool_=Oe,this.promise_=new Promise(function(ut,it){Xe.resolve_=ut,Xe.reject_=it,Xe.start_()})}return l.prototype.start_=function(){var f=this;function m(E,w){var M=f.resolve_,W=f.reject_,q=w.connection;if(w.wasSuccessCode)try{var ge=f.callback_(q,q.getResponseText());!function(l){return void 0!==l}(ge)?M():M(ge)}catch(Oe){W(Oe)}else if(null!==q)(we=_a()).serverResponse=q.getResponseText(),W(f.errorCallback_?f.errorCallback_(q,we):we);else if(w.canceled)W(we=f.appDelete_?Ss():ur());else{var we;W(we=new sn("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}}this.canceled_?m(0,new Ca(!1,null,!0)):this.backoffId_=function(l,f,d){var m=1,E=null,w=!1,M=0;function W(){return 2===M}var q=!1;function ge(){for(var it=[],St=0;St<arguments.length;St++)it[St]=arguments[St];q||(q=!0,f.apply(null,it))}function we(it){E=setTimeout(function(){E=null,l(Oe,W())},it)}function Oe(it){for(var St=[],At=1;At<arguments.length;At++)St[At-1]=arguments[At];if(!q){if(it)return void ge.call.apply(ge,(0,tn.ev)([null,it],St));var Mt;if(W()||w)return void ge.call.apply(ge,(0,tn.ev)([null,it],St));m<64&&(m*=2),1===M?(M=2,Mt=0):Mt=1e3*(m+Math.random()),we(Mt)}}var Xe=!1;function ut(it){Xe||(Xe=!0,!q&&(null!==E?(it||(M=2),clearTimeout(E),we(0)):it||(M=1)))}return we(0),setTimeout(function(){w=!0,ut(!0)},d),ut}(function(E,w){if(w)E(!1,new Ca(!1,null,!0));else{var M=f.pool_.createConnection();f.pendingConnection_=M,null!==f.progressCallback_&&M.addUploadProgressListener(W),M.send(f.url_,f.method_,f.body_,f.headers_).then(function(){null!==f.progressCallback_&&M.removeUploadProgressListener(W),f.pendingConnection_=null;var q=M.getErrorCode()===gn.NO_ERROR,ge=M.getStatus();if(q&&!f.isRetryStatusCode_(ge)){var Oe=-1!==f.successCodes_.indexOf(ge);E(!0,new Ca(Oe,M))}else{var we=M.getErrorCode()===gn.ABORT;E(!1,new Ca(!1,null,we))}})}function W(q){null!==f.progressCallback_&&f.progressCallback_(q.loaded,q.lengthComputable?q.total:-1)}},m,this.timeout_)},l.prototype.getPromise=function(){return this.promise_},l.prototype.cancel=function(f){this.canceled_=!0,this.appDelete_=f||!1,null!==this.backoffId_&&function(l){l(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},l.prototype.isRetryStatusCode_=function(f){var d=f>=500&&f<600,E=-1!==[408,429].indexOf(f),w=-1!==this.additionalRetryCodes_.indexOf(f);return d||E||w},l}(),Ca=function(f,d,m){this.wasSuccessCode=f,this.connection=d,this.canceled=!!m};function Qc(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function rd(){for(var l=[],f=0;f<arguments.length;f++)l[f]=arguments[f];var d=Qc();if(void 0!==d){for(var m=new d,E=0;E<l.length;E++)m.append(l[E]);return m.getBlob()}if(Jr())return new Blob(l);throw new sn("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Yi=function(){function l(f,d){var m=0,E="";Br(f)?(this.data_=f,m=f.size,E=f.type):f instanceof ArrayBuffer?(d?this.data_=new Uint8Array(f):(this.data_=new Uint8Array(f.byteLength),this.data_.set(new Uint8Array(f))),m=this.data_.length):f instanceof Uint8Array&&(d?this.data_=f:(this.data_=new Uint8Array(f.length),this.data_.set(f)),m=f.length),this.size_=m,this.type_=E}return l.prototype.size=function(){return this.size_},l.prototype.type=function(){return this.type_},l.prototype.slice=function(f,d){if(Br(this.data_)){var E=function(l,f,d){return l.webkitSlice?l.webkitSlice(f,d):l.mozSlice?l.mozSlice(f,d):l.slice?l.slice(f,d):null}(this.data_,f,d);return null===E?null:new l(E)}return new l(new Uint8Array(this.data_.buffer,f,d-f),!0)},l.getBlob=function(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];if(Jr()){var m=f.map(function(q){return q instanceof l?q.data_:q});return new l(rd.apply(null,m))}var E=f.map(function(q){return Ea(q)?uu(Ln.RAW,q).data:q.data_}),w=0;E.forEach(function(q){w+=q.byteLength});var M=new Uint8Array(w),W=0;return E.forEach(function(q){for(var ge=0;ge<q.length;ge++)M[W++]=q[ge]}),new l(M,!0)},l.prototype.uploadData=function(){return this.data_},l}();function Da(l){var f;try{f=JSON.parse(l)}catch(d){return null}return function(l){return"object"==typeof l&&!Array.isArray(l)}(f)?f:null}function ba(l){var f=l.lastIndexOf("/",l.length-2);return-1===f?l:l.slice(f+1)}function El(l,f){return f}var An=function(f,d,m,E){this.server=f,this.local=d||f,this.writable=!!m,this.xform=E||El},pu=null;function Ur(){if(pu)return pu;var l=[];l.push(new An("bucket")),l.push(new An("generation")),l.push(new An("metageneration")),l.push(new An("name","fullPath",!0));var d=new An("name");d.xform=function(w,M){return function(l){return!Ea(l)||l.length<2?l:ba(l)}(M)},l.push(d);var E=new An("size");return E.xform=function(w,M){return void 0!==M?Number(M):M},l.push(E),l.push(new An("timeCreated")),l.push(new An("updated")),l.push(new An("md5Hash",null,!0)),l.push(new An("cacheControl",null,!0)),l.push(new An("contentDisposition",null,!0)),l.push(new An("contentEncoding",null,!0)),l.push(new An("contentLanguage",null,!0)),l.push(new An("contentType",null,!0)),l.push(new An("metadata","customMetadata",!0)),pu=l}function qi(l,f,d){var m=Da(f);return null===m?null:function(l,f,d){for(var m={type:"file"},E=d.length,w=0;w<E;w++){var M=d[w];m[M.local]=M.xform(m,f[M.server])}return function(l,f){Object.defineProperty(l,"ref",{get:function(){var w=new Sn(l.bucket,l.fullPath);return f._makeStorageReference(w)}})}(m,l),m}(l,m,d)}function Zi(l,f){for(var d={},m=f.length,E=0;E<m;E++){var w=f[E];w.writable&&(d[w.server]=l[w.local])}return JSON.stringify(d)}var mu="prefixes";var lr=function(f,d,m,E){this.url=f,this.method=d,this.handler=m,this.timeout=E,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Zn(l){if(!l)throw _a()}function ti(l,f){return function(m,E){var w=qi(l,E,f);return Zn(null!==w),w}}function Di(l){return function(d,m){var E;return E=401===d.getStatus()?d.getResponseText().includes("Firebase App Check token is invalid")?new sn("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new sn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===d.getStatus()?function(l){return new sn("quota-exceeded","Quota for bucket '"+l+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(l.bucket):403===d.getStatus()?function(l){return new sn("unauthorized","User does not have permission to access '"+l+"'.")}(l.path):m,E.serverResponse=m.serverResponse,E}}function Ht(l){var f=Di(l);return function(m,E){var w=f(m,E);return 404===m.getStatus()&&(w=function(l){return new sn("object-not-found","Object '"+l+"' does not exist.")}(l.path)),w.serverResponse=E.serverResponse,w}}function yu(l,f,d){var E=ei(f.fullServerUrl(),l.host),M=l.maxOperationRetryTime,W=new lr(E,"GET",ti(l,d),M);return W.errorHandler=Ht(f),W}function wl(l,f,d,m,E){var w={};w.prefix=f.isRoot?"":f.path+"/",d&&d.length>0&&(w.delimiter=d),m&&(w.pageToken=m),E&&(w.maxResults=E);var W=ei(f.bucketOnlyServerUrl(),l.host),ge=l.maxOperationRetryTime,we=new lr(W,"GET",function(l,f){return function(m,E){var w=function(l,f,d){var m=Da(d);return null===m?null:function(l,f,d){var m={prefixes:[],items:[],nextPageToken:d.nextPageToken};if(d[mu])for(var E=0,w=d[mu];E<w.length;E++){var W=w[E].replace(/\/$/,""),q=l._makeStorageReference(new Sn(f,W));m.prefixes.push(q)}if(d.items)for(var ge=0,we=d.items;ge<we.length;ge++)q=l._makeStorageReference(new Sn(f,we[ge].name)),m.items.push(q);return m}(l,f,m)}(l,f,E);return Zn(null!==w),w}}(l,f.bucket),ge);return we.urlParams=w,we.errorHandler=Di(f),we}function ni(l,f,d){var m=Object.assign({},d);return m.fullPath=l.path,m.size=f.size(),m.contentType||(m.contentType=function(l,f){return f&&f.type()||"application/octet-stream"}(0,f)),m}var Xn=function(f,d,m,E){this.current=f,this.total=d,this.finalized=!!m,this.metadata=E||null};function Ns(l,f){var d=null;try{d=l.getResponseHeader("X-Goog-Upload-Status")}catch(E){Zn(!1)}return Zn(!!d&&-1!==(f||["active"]).indexOf(d)),d}var Tl=function(f,d,m){var E=function(l){return"function"==typeof l}(f)||null!=d||null!=m;if(E)this.next=f,this.error=d,this.complete=m;else{var w=f;this.next=w.next,this.error=w.error,this.complete=w.complete}};function ri(l){return function(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];Promise.resolve().then(function(){return l.apply(void 0,f)})}}var Cn=function(){function l(f,d,m){var E=this;void 0===m&&(m=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=f,this._blob=d,this._metadata=m,this._mappings=Ur(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(w){E._request=void 0,E._chunkMultiplier=1,w._codeEquals("canceled")?(E._needToFetchStatus=!0,E.completeTransitions_()):(E._error=w,E._transition("error"))},this._metadataErrorHandler=function(w){E._request=void 0,w._codeEquals("canceled")?E.completeTransitions_():(E._error=w,E._transition("error"))},this._promise=new Promise(function(w,M){E._resolve=w,E._reject=M,E._start()}),this._promise.then(null,function(){})}return l.prototype._makeProgressCallback=function(){var f=this,d=this._transferred;return function(m){return f._updateProgress(d+m)}},l.prototype._shouldDoResumable=function(f){return f.size()>262144},l.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},l.prototype._resolveToken=function(f){var d=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(m){var E=m[0],w=m[1];switch(d._state){case"running":f(E,w);break;case"canceling":d._transition("canceled");break;case"pausing":d._transition("paused")}})},l.prototype._createResumable=function(){var f=this;this._resolveToken(function(d,m){var E=function(l,f,d,m,E){var w=f.bucketOnlyServerUrl(),M=ni(f,m,E),W={name:M.fullPath},q=ei(w,l.host),we={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+m.size(),"X-Goog-Upload-Header-Content-Type":M.contentType,"Content-Type":"application/json; charset=utf-8"},Oe=Zi(M,d),it=new lr(q,"POST",function(St){var At;Ns(St);try{At=St.getResponseHeader("X-Goog-Upload-URL")}catch(Ft){Zn(!1)}return Zn(Ea(At)),At},l.maxUploadRetryTime);return it.urlParams=W,it.headers=we,it.body=Oe,it.errorHandler=Di(f),it}(f._ref.storage,f._ref._location,f._mappings,f._blob,f._metadata),w=f._ref.storage._makeRequest(E,d,m);f._request=w,w.getPromise().then(function(M){f._request=void 0,f._uploadUrl=M,f._needToFetchStatus=!1,f.completeTransitions_()},f._errorHandler)})},l.prototype._fetchStatus=function(){var f=this,d=this._uploadUrl;this._resolveToken(function(m,E){var w=function(l,f,d,m){var q=new lr(d,"POST",function(ge){var we=Ns(ge,["active","final"]),Oe=null;try{Oe=ge.getResponseHeader("X-Goog-Upload-Size-Received")}catch(ut){Zn(!1)}Oe||Zn(!1);var Xe=Number(Oe);return Zn(!isNaN(Xe)),new Xn(Xe,m.size(),"final"===we)},l.maxUploadRetryTime);return q.headers={"X-Goog-Upload-Command":"query"},q.errorHandler=Di(f),q}(f._ref.storage,f._ref._location,d,f._blob),M=f._ref.storage._makeRequest(w,m,E);f._request=M,M.getPromise().then(function(W){W=W,f._request=void 0,f._updateProgress(W.current),f._needToFetchStatus=!1,W.finalized&&(f._needToFetchMetadata=!0),f.completeTransitions_()},f._errorHandler)})},l.prototype._continueUpload=function(){var f=this,d=262144*this._chunkMultiplier,m=new Xn(this._transferred,this._blob.size()),E=this._uploadUrl;this._resolveToken(function(w,M){var W;try{W=function(l,f,d,m,E,w,M,W){var q=new Xn(0,0);if(M?(q.current=M.current,q.total=M.total):(q.current=0,q.total=m.size()),m.size()!==q.total)throw new sn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var ge=q.total-q.current,we=ge;E>0&&(we=Math.min(we,E));var Oe=q.current,it={"X-Goog-Upload-Command":we===ge?"upload, finalize":"upload","X-Goog-Upload-Offset":""+q.current},St=m.slice(Oe,Oe+we);if(null===St)throw Ts();var kt=new lr(d,"POST",function(Dn,gt){var c,o=Ns(Dn,["active","final"]),i=q.current+we,a=m.size();return c="final"===o?ti(f,w)(Dn,gt):null,new Xn(i,a,"final"===o,c)},f.maxUploadRetryTime);return kt.headers=it,kt.body=St.uploadData(),kt.progressCallback=W||null,kt.errorHandler=Di(l),kt}(f._ref._location,f._ref.storage,E,f._blob,d,f._mappings,m,f._makeProgressCallback())}catch(ge){return f._error=ge,void f._transition("error")}var q=f._ref.storage._makeRequest(W,w,M);f._request=q,q.getPromise().then(function(ge){f._increaseMultiplier(),f._request=void 0,f._updateProgress(ge.current),ge.finalized?(f._metadata=ge.metadata,f._transition("success")):f.completeTransitions_()},f._errorHandler)})},l.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},l.prototype._fetchMetadata=function(){var f=this;this._resolveToken(function(d,m){var E=yu(f._ref.storage,f._ref._location,f._mappings),w=f._ref.storage._makeRequest(E,d,m);f._request=w,w.getPromise().then(function(M){f._request=void 0,f._metadata=M,f._transition("success")},f._metadataErrorHandler)})},l.prototype._oneShotUpload=function(){var f=this;this._resolveToken(function(d,m){var E=function(l,f,d,m,E){var w=f.bucketOnlyServerUrl(),M={"X-Goog-Upload-Protocol":"multipart"},q=function(){for(var kt="",Dn=0;Dn<2;Dn++)kt+=Math.random().toString().slice(2);return kt}();M["Content-Type"]="multipart/related; boundary="+q;var ge=ni(f,m,E),we=Zi(ge,d),ut=Yi.getBlob("--"+q+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+we+"\r\n--"+q+"\r\nContent-Type: "+ge.contentType+"\r\n\r\n",m,"\r\n--"+q+"--");if(null===ut)throw Ts();var it={name:ge.fullPath},St=ei(w,l.host),Ft=l.maxUploadRetryTime,Mt=new lr(St,"POST",ti(l,d),Ft);return Mt.urlParams=it,Mt.headers=M,Mt.body=ut.uploadData(),Mt.errorHandler=Di(f),Mt}(f._ref.storage,f._ref._location,f._mappings,f._blob,f._metadata),w=f._ref.storage._makeRequest(E,d,m);f._request=w,w.getPromise().then(function(M){f._request=void 0,f._metadata=M,f._updateProgress(f._blob.size()),f._transition("success")},f._errorHandler)})},l.prototype._updateProgress=function(f){var d=this._transferred;this._transferred=f,this._transferred!==d&&this._notifyObservers()},l.prototype._transition=function(f){if(this._state!==f)switch(f){case"canceling":case"pausing":this._state=f,void 0!==this._request&&this._request.cancel();break;case"running":var d="paused"===this._state;this._state=f,d&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=f,this._notifyObservers();break;case"canceled":this._error=ur(),this._state=f,this._notifyObservers()}},l.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(l.prototype,"snapshot",{get:function(){var f=cu(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:f,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),l.prototype.on=function(f,d,m,E){var w=this,M=new Tl(d,m,E);return this._addObserver(M),function(){w._removeObserver(M)}},l.prototype.then=function(f,d){return this._promise.then(f,d)},l.prototype.catch=function(f){return this.then(null,f)},l.prototype._addObserver=function(f){this._observers.push(f),this._notifyObserver(f)},l.prototype._removeObserver=function(f){var d=this._observers.indexOf(f);-1!==d&&this._observers.splice(d,1)},l.prototype._notifyObservers=function(){var f=this;this._finishPromise(),this._observers.slice().forEach(function(m){f._notifyObserver(m)})},l.prototype._finishPromise=function(){if(void 0!==this._resolve){var f=!0;switch(cu(this._state)){case fn.SUCCESS:ri(this._resolve.bind(null,this.snapshot))();break;case fn.CANCELED:case fn.ERROR:ri(this._reject.bind(null,this._error))();break;default:f=!1}f&&(this._resolve=void 0,this._reject=void 0)}},l.prototype._notifyObserver=function(f){switch(cu(this._state)){case fn.RUNNING:case fn.PAUSED:f.next&&ri(f.next.bind(f,this.snapshot))();break;case fn.SUCCESS:f.complete&&ri(f.complete.bind(f))();break;default:f.error&&ri(f.error.bind(f,this._error))()}},l.prototype.resume=function(){var f="paused"===this._state||"pausing"===this._state;return f&&this._transition("running"),f},l.prototype.pause=function(){var f="running"===this._state;return f&&this._transition("pausing"),f},l.prototype.cancel=function(){var f="running"===this._state||"pausing"===this._state;return f&&this._transition("canceling"),f},l}(),bi=function(){function l(f,d){this._service=f,this._location=d instanceof Sn?d:Sn.makeFromUrl(d,f.host)}return l.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},l.prototype._newRef=function(f,d){return new l(f,d)},Object.defineProperty(l.prototype,"root",{get:function(){var f=new Sn(this._location.bucket,"");return this._newRef(this._service,f)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"name",{get:function(){return ba(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"parent",{get:function(){var f=function(l){if(0===l.length)return null;var f=l.lastIndexOf("/");return-1===f?"":l.slice(0,f)}(this._location.path);if(null===f)return null;var d=new Sn(this._location.bucket,f);return new l(this._service,d)},enumerable:!1,configurable:!0}),l.prototype._throwIfRoot=function(f){if(""===this._location.path)throw fl(f)},l}();function Kc(l){var f={prefixes:[],items:[]};return bu(l,f).then(function(){return f})}function bu(l,f,d){return(0,tn.mG)(this,void 0,void 0,function(){var E,w,M;return(0,tn.Jh)(this,function(W){switch(W.label){case 0:return[4,Ta(l,{pageToken:d})];case 1:return E=W.sent(),(w=f.prefixes).push.apply(w,E.prefixes),(M=f.items).push.apply(M,E.items),null==E.nextPageToken?[3,3]:[4,bu(l,f,E.nextPageToken)];case 2:W.sent(),W.label=3;case 3:return[2]}})})}function Ta(l,f){return(0,tn.mG)(this,void 0,void 0,function(){var d,m;return(0,tn.Jh)(this,function(E){switch(E.label){case 0:return null!=f&&"number"==typeof f.maxResults&&Ci("options.maxResults",1,1e3,f.maxResults),m=wl(l.storage,l._location,"/",(d=f||{}).pageToken,d.maxResults),[4,l.storage.makeRequestWithTokens(m)];case 1:return[2,E.sent().getPromise()]}})})}function Sl(l){return(0,tn.mG)(this,void 0,void 0,function(){var f;return(0,tn.Jh)(this,function(d){switch(d.label){case 0:return l._throwIfRoot("getDownloadURL"),f=function(l,f,d){var E=ei(f.fullServerUrl(),l.host),M=l.maxOperationRetryTime,W=new lr(E,"GET",function(l,f){return function(m,E){var w=qi(l,E,f);return Zn(null!==w),function(l,f,d){var m=Da(f);if(null===m||!Ea(m.downloadTokens))return null;var E=m.downloadTokens;if(0===E.length)return null;var w=encodeURIComponent;return E.split(",").map(function(q){var we=l.fullPath;return ei("/b/"+w(l.bucket)+"/o/"+w(we),d)+_l({alt:"media",token:q})})[0]}(w,E,l.host)}}(l,d),M);return W.errorHandler=Ht(f),W}(l.storage,l._location,Ur()),[4,l.storage.makeRequestWithTokens(f)];case 1:return[2,d.sent().getPromise().then(function(m){if(null===m)throw new sn("no-download-url","The given file does not have any download URLs.");return m})]}})})}function Iu(l,f){var d=function(l,f){var d=f.split("/").filter(function(m){return m.length>0}).join("/");return 0===l.length?d:l+"/"+d}(l._location.path,f),m=new Sn(l._location.bucket,d);return new bi(l.storage,m)}function Aa(l){return/^[A-Za-z]+:\/\//.test(l)}function Jn(l,f){if(l instanceof Su){var d=l;if(null==d._bucket)throw new sn("no-default-bucket","No default bucket found. Did you set the '"+ma+"' property when initializing the app?");var m=new bi(d,d._bucket);return null!=f?Jn(m,f):m}return void 0!==f?Iu(l,f):l}function Ra(l,f){if(f&&Aa(f)){if(l instanceof Su)return function(l,f){return new bi(l,f)}(l,f);throw qn("To use ref(service, url), the first argument must be a Storage instance.")}return Jn(l,f)}function Tu(l,f){var d=null==f?void 0:f[ma];return null==d?null:Sn.makeFromBucketSpec(d,l)}var Su=function(){function l(f,d,m,E,w,M){this.app=f,this._authProvider=d,this._appCheckProvider=m,this._pool=E,this._url=w,this._firebaseVersion=M,this._bucket=null,this._host=ga,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=w?Sn.makeFromBucketSpec(w,this._host):Tu(this._host,this.app.options)}return Object.defineProperty(l.prototype,"host",{get:function(){return this._host},set:function(f){this._host=f,this._bucket=null!=this._url?Sn.makeFromBucketSpec(this._url,f):Tu(f,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(f){Ci("time",0,Number.POSITIVE_INFINITY,f),this._maxUploadRetryTime=f},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(f){Ci("time",0,Number.POSITIVE_INFINITY,f),this._maxOperationRetryTime=f},enumerable:!1,configurable:!0}),l.prototype._getAuthToken=function(){return(0,tn.mG)(this,void 0,void 0,function(){var f,d;return(0,tn.Jh)(this,function(m){switch(m.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(f=this._authProvider.getImmediate({optional:!0}))?[4,f.getToken()]:[3,2];case 1:if(null!==(d=m.sent()))return[2,d.accessToken];m.label=2;case 2:return[2,null]}})})},l.prototype._getAppCheckToken=function(){return(0,tn.mG)(this,void 0,void 0,function(){var f;return(0,tn.Jh)(this,function(m){switch(m.label){case 0:return(f=this._appCheckProvider.getImmediate({optional:!0}))?[4,f.getToken()]:[3,2];case 1:return[2,m.sent().token];case 2:return[2,null]}})})},l.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(f){return f.cancel()}),this._requests.clear()),Promise.resolve()},l.prototype._makeStorageReference=function(f){return new bi(this,f)},l.prototype._makeRequest=function(f,d,m){var E=this;if(this._deleted)return new ya(Ss());var w=function(l,f,d,m,E,w){var M=_l(l.urlParams),W=l.url+M,q=Object.assign({},l.headers);return function(l,f){f&&(l["X-Firebase-GMPID"]=f)}(q,f),function(l,f){null!==f&&f.length>0&&(l.Authorization="Firebase "+f)}(q,d),function(l,f){l["X-Firebase-Storage-Version"]="webjs/"+(null!=f?f:"AppManager")}(q,w),function(l,f){null!==f&&(l["X-Firebase-AppCheck"]=f)}(q,m),new vl(W,l.method,q,l.body,l.successCodes,l.additionalRetryCodes,l.handler,l.errorHandler,l.timeout,l.progressCallback,E)}(f,this._appId,d,m,this._pool,this._firebaseVersion);return this._requests.add(w),w.getPromise().then(function(){return E._requests.delete(w)},function(){return E._requests.delete(w)}),w},l.prototype.makeRequestWithTokens=function(f){return(0,tn.mG)(this,void 0,void 0,function(){var d;return(0,tn.Jh)(this,function(w){switch(w.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return d=w.sent(),[2,this._makeRequest(f,d[0],d[1])]}})})},l}();function Rl(l,f){return Ra(l=(0,$n.m9)(l),f)}var l,f,Xi=function(){function l(f,d,m){this._delegate=f,this.task=d,this.ref=m}return Object.defineProperty(l.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),l}(),Ru=function(){function l(f,d){this._delegate=f,this._ref=d,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(l.prototype,"snapshot",{get:function(){return new Xi(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),l.prototype.then=function(f,d){var m=this;return this._delegate.then(function(E){if(f)return f(new Xi(E,m,m._ref))},d)},l.prototype.on=function(f,d,m,E){var w=this,M=void 0;return d&&(M="function"==typeof d?function(W){return d(new Xi(W,w,w._ref))}:{next:d.next?function(W){return d.next(new Xi(W,w,w._ref))}:void 0,complete:d.complete||void 0,error:d.error||void 0}),this._delegate.on(f,M,m||void 0,E||void 0)},l}(),Ml=function(){function l(f,d){this._delegate=f,this._service=d}return Object.defineProperty(l.prototype,"prefixes",{get:function(){var f=this;return this._delegate.prefixes.map(function(d){return new Fs(d,f._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"items",{get:function(){var f=this;return this._delegate.items.map(function(d){return new Fs(d,f._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),l}(),Fs=function(){function l(f,d){this._delegate=f,this.storage=d}return Object.defineProperty(l.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),l.prototype.toString=function(){return this._delegate.toString()},l.prototype.child=function(f){var d=function(l,f){return Iu(l,f)}(this._delegate,f);return new l(d,this.storage)},Object.defineProperty(l.prototype,"root",{get:function(){return new l(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"parent",{get:function(){var f=this._delegate.parent;return null==f?null:new l(f,this.storage)},enumerable:!1,configurable:!0}),l.prototype.put=function(f,d){return this._throwIfRoot("put"),new Ru(function(l,f,d){return function(l,f,d){return l._throwIfRoot("uploadBytesResumable"),new Cn(l,new Yi(f),d)}(l=(0,$n.m9)(l),f,d)}(this._delegate,f,d),this)},l.prototype.putString=function(f,d,m){void 0===d&&(d=Ln.RAW),this._throwIfRoot("putString");var E=uu(d,f),w=(0,tn.pi)({},m);return null==w.contentType&&null!=E.contentType&&(w.contentType=E.contentType),new Ru(new Cn(this._delegate,new Yi(E.data,!0),w),this)},l.prototype.listAll=function(){var f=this;return function(l){return Kc(l=(0,$n.m9)(l))}(this._delegate).then(function(d){return new Ml(d,f.storage)})},l.prototype.list=function(f){var d=this;return function(l,f){return Ta(l=(0,$n.m9)(l),f)}(this._delegate,f||void 0).then(function(m){return new Ml(m,d.storage)})},l.prototype.getMetadata=function(){return function(l){return function(l){return(0,tn.mG)(this,void 0,void 0,function(){var f;return(0,tn.Jh)(this,function(d){switch(d.label){case 0:return l._throwIfRoot("getMetadata"),f=yu(l.storage,l._location,Ur()),[4,l.storage.makeRequestWithTokens(f)];case 1:return[2,d.sent().getPromise()]}})})}(l=(0,$n.m9)(l))}(this._delegate)},l.prototype.updateMetadata=function(f){return function(l,f){return function(l,f){return(0,tn.mG)(this,void 0,void 0,function(){var d;return(0,tn.Jh)(this,function(m){switch(m.label){case 0:return l._throwIfRoot("updateMetadata"),d=function(l,f,d,m){var w=ei(f.fullServerUrl(),l.host),W=Zi(d,m),ge=l.maxOperationRetryTime,we=new lr(w,"PATCH",ti(l,m),ge);return we.headers={"Content-Type":"application/json; charset=utf-8"},we.body=W,we.errorHandler=Ht(f),we}(l.storage,l._location,f,Ur()),[4,l.storage.makeRequestWithTokens(d)];case 1:return[2,m.sent().getPromise()]}})})}(l=(0,$n.m9)(l),f)}(this._delegate,f)},l.prototype.getDownloadURL=function(){return function(l){return Sl(l=(0,$n.m9)(l))}(this._delegate)},l.prototype.delete=function(){return this._throwIfRoot("delete"),function(l){return function(l){return(0,tn.mG)(this,void 0,void 0,function(){var f;return(0,tn.Jh)(this,function(d){switch(d.label){case 0:return l._throwIfRoot("deleteObject"),f=function(l,f){var m=ei(f.fullServerUrl(),l.host),W=new lr(m,"DELETE",function(q,ge){},l.maxOperationRetryTime);return W.successCodes=[200,204],W.errorHandler=Ht(f),W}(l.storage,l._location),[4,l.storage.makeRequestWithTokens(f)];case 1:return[2,d.sent().getPromise()]}})})}(l=(0,$n.m9)(l))}(this._delegate)},l.prototype._throwIfRoot=function(f){if(""===this._delegate._location.path)throw fl(f)},l}(),Pl=function(){function l(f,d){this.app=f,this._delegate=d}return Object.defineProperty(l.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),l.prototype.ref=function(f){if(Aa(f))throw qn("ref() expected a child path but got a URL, use refFromURL instead.");return new Fs(Rl(this._delegate,f),this)},l.prototype.refFromURL=function(f){if(!Aa(f))throw qn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Sn.makeFromUrl(f,this._delegate.host)}catch(d){throw qn("refFromUrl() expected a valid full URL but got an invalid one.")}return new Fs(Rl(this._delegate,f),this)},l.prototype.setMaxUploadRetryTime=function(f){this._delegate.maxUploadRetryTime=f},l.prototype.setMaxOperationRetryTime=function(f){this._delegate.maxOperationRetryTime=f},l.prototype.useEmulator=function(f,d,m){void 0===m&&(m={}),function(l,f,d,m){void 0===m&&(m={}),function(l,f,d,m){void 0===m&&(m={}),l.host="http://"+f+":"+d;var E=m.mockUserToken;E&&(l._overrideAuthToken="string"==typeof E?E:(0,$n.Sg)(E,l.app.options.projectId))}(l,f,d,m)}(this._delegate,f,d,m)},l}();function Nl(l){const f=function(l){return new ps.y(f=>{const d=M=>f.next(M);d(l.snapshot);const w=l.on("state_changed",d);return l.then(M=>{d(M),f.complete()},M=>{d(l.snapshot),(M=>{f.error(M)})(M)}),function(){w()}}).pipe(function(l,f=Qr.z){return(0,wr.e)((d,m)=>{let E=null,w=null,M=null;const W=()=>{if(E){E.unsubscribe(),E=null;const ge=w;w=null,m.next(ge)}};function q(){const ge=M+l,we=f.now();if(we<ge)return E=this.schedule(void 0,ge-we),void m.add(E);W()}d.subscribe(new Ir.Q(m,ge=>{w=ge,M=f.now(),E||(E=f.schedule(q,l),m.add(E))},()=>{W(),m.complete()},void 0,()=>{w=E=null}))})}(0))}(l);return{task:l,then:l.then.bind(l),catch:l.catch.bind(l),pause:l.pause.bind(l),cancel:l.cancel.bind(l),resume:l.resume.bind(l),snapshotChanges:()=>f,percentageChanges:()=>f.pipe((0,br.U)(d=>d.bytesTransferred/d.totalBytes*100))}}function Mu(l,f,d){return{getDownloadURL:()=>Dr(void 0).pipe((0,Sr.Q)(f.outsideAngular),Tr(()=>l.getDownloadURL()),d),getMetadata:()=>Dr(void 0).pipe((0,Sr.Q)(f.outsideAngular),Tr(()=>l.getMetadata()),d),delete:()=>(0,Lr.D)(l.delete()),child:m=>Mu(l.child(m),f,d),updateMetadata:m=>(0,Lr.D)(l.updateMetadata(m)),put:(m,E)=>Nl(l.put(m,E)),putString:(m,E,w)=>Nl(l.putString(m,E,w)),listAll:()=>(0,Lr.D)(l.listAll())}}f={TaskState:fn,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:Ln,Storage:Su,Reference:Fs},(l=qr.Z).INTERNAL.registerComponent(new Hc.wA("storage",function(l,f){var d=f.instanceIdentifier,m=l.getProvider("app").getImmediate(),E=l.getProvider("auth-internal"),w=l.getProvider("app-check-internal");return new Pl(m,new Su(m,E,w,new pl,d,qr.Z.SDK_VERSION))},"PUBLIC").setServiceProps(f).setMultipleInstances(!0)),l.registerVersion("@firebase/storage","0.7.0");const Pa=new D.OlP("angularfire2.storageBucket"),sf=new D.OlP("angularfire2.storage.maxUploadRetryTime"),Pr=new D.OlP("angularfire2.storage.maxOperationRetryTime");let ks=(()=>{class l{constructor(d,m,E,w,M,W,q){this.schedulers=new xt.HU(M),this.keepUnstableUntilFirst=(0,xt.ss)(this.schedulers);const ge=(0,xt.on)(d,M,m);this.storage=(0,xt.sI)(`${ge.name}.storage.${E}`,"AngularFireStorage",ge,()=>{const we=M.runOutsideAngular(()=>ge.storage(E||void 0));return W&&we.setMaxUploadRetryTime(W),q&&we.setMaxOperationRetryTime(q),we},[W,q])}ref(d){return Mu(this.storage.ref(d),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(d){return Mu(this.storage.refFromURL(d),this.schedulers,this.keepUnstableUntilFirst)}upload(d,m,E){return Mu(this.storage.ref(d),this.schedulers,this.keepUnstableUntilFirst).put(m,E)}}return l.\u0275fac=function(d){return new(d||l)(D.LFG(xt.Dh),D.LFG(xt.xv,8),D.LFG(Pa,8),D.LFG(D.Lbi),D.LFG(D.R0b),D.LFG(sf,8),D.LFG(Pr,8))},l.\u0275prov=D.Yz7({factory:function(){return new l(D.LFG(xt.Dh),D.LFG(xt.xv,8),D.LFG(Pa,8),D.LFG(D.Lbi),D.LFG(D.R0b),D.LFG(sf,8),D.LFG(Pr,8))},token:l,providedIn:"any"}),l})(),af=(()=>{class l{}return l.\u0275fac=function(d){return new(d||l)},l.\u0275mod=D.oAB({type:l}),l.\u0275inj=D.cJS({}),l})(),Fl=(()=>{class l{}return l.\u0275fac=function(d){return new(d||l)},l.\u0275mod=D.oAB({type:l}),l.\u0275inj=D.cJS({providers:[ks],imports:[af]}),l})();const Wo_firebase={apiKey:"AIzaSyB01Wa2FoOmOgoH3lv537uEGpAdR8sRDgY",authDomain:"project-4082772279023332108.firebaseapp.com",projectId:"project-4082772279023332108",storageBucket:"project-4082772279023332108.appspot.com",messagingSenderId:"1025657268756",appId:"1:1025657268756:web:97859fc35281f58c541501"};class kl{constructor(f){this.file=f}}let Pu=(()=>{class l{constructor(d,m){this.db=d,this.storage=m,this.basePath="/uploads"}pushFileToStorage(d){const m=`${this.basePath}/${d.file.name}`,E=this.storage.ref(m),w=this.storage.upload(m,d.file);return w.snapshotChanges().pipe(function(l){return(0,wr.e)((f,d)=>{try{f.subscribe(d)}finally{d.add(l)}})}(()=>{E.getDownloadURL().subscribe(M=>{d.url=M,d.name=d.file.name,this.saveFileData(d)})})).subscribe(),w.percentageChanges()}saveFileData(d){this.db.list(this.basePath).push(d)}getFiles(d){return this.db.list(this.basePath,m=>m.limitToLast(d))}deleteFile(d){this.deleteFileDatabase(d.key).then(()=>{this.deleteFileStorage(d.name)}).catch(m=>console.log(m))}deleteFileDatabase(d){return this.db.list(this.basePath).remove(d)}deleteFileStorage(d){this.storage.ref(this.basePath).child(d).delete()}}return l.\u0275fac=function(d){return new(d||l)(D.LFG(pa),D.LFG(ks))},l.\u0275prov=D.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const xu=function(l){return{width:l}};function Vl(l,f){if(1&l&&(D.TgZ(0,"div",3),D.TgZ(1,"div",4),D._uU(2),D.qZA(),D.qZA()),2&l){const d=D.oxw();D.xp6(1),D.Q6J("ngStyle",D.VKq(3,xu,d.percentage+"%")),D.uIk("aria-valuenow",d.percentage),D.xp6(1),D.hij(" ",d.percentage,"% ")}}let od=(()=>{class l{constructor(d){this.uploadService=d,this.percentage=0}ngOnInit(){}selectFile(d){this.selectedFiles=d.target.files,this.upload()}upload(){if(this.selectedFiles){const d=this.selectedFiles;for(let m=0;m<d.length;m++){const E=d.item(m);this.selectedFiles=void 0,E&&(this.currentFileUpload=new kl(E),this.uploadService.pushFileToStorage(this.currentFileUpload).subscribe(w=>{this.percentage=Math.round(w||0)},w=>{console.log(w)}))}}}}return l.\u0275fac=function(d){return new(d||l)(D.Y36(Pu))},l.\u0275cmp=D.Xpm({type:l,selectors:[["app-upload-form"]],decls:4,vars:1,consts:[[1,"d-flex","justify-content-center","m-4"],["type","file","multiple","",1,"text-nowrap","text-truncate","form-control","mr-4",3,"change"],["class","progress mt-2",4,"ngIf"],[1,"progress","mt-2"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info",3,"ngStyle"]],template:function(d,m){1&d&&(D.TgZ(0,"div",0),D.TgZ(1,"label"),D.TgZ(2,"input",1),D.NdJ("change",function(w){return m.selectFile(w)}),D.qZA(),D.qZA(),D.qZA(),D.YNc(3,Vl,3,5,"div",2)),2&d&&(D.xp6(3),D.Q6J("ngIf",m.currentFileUpload))},directives:[wt,zt],styles:[""]}),l})(),$o=(()=>{class l{constructor(){this.title="Angular 13 Firebase Storage example"}}return l.\u0275fac=function(d){return new(d||l)},l.\u0275cmp=D.Xpm({type:l,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container",2,"width","600px"],[1,"my-3"]],template:function(d,m){1&d&&(D.TgZ(0,"div",0),D.TgZ(1,"div",1),D._UZ(2,"app-upload-form"),D.qZA(),D.qZA())},directives:[od],styles:[""]}),l})(),Ji=(()=>{class l{}return l.\u0275fac=function(d){return new(d||l)},l.\u0275mod=D.oAB({type:l,bootstrap:[$o]}),l.\u0275inj=D.cJS({providers:[],imports:[[pi,xt.hO.initializeApp(Wo_firebase),$i,Fl]]}),l})();(0,D.G48)(),Cr().bootstrapModule(Ji).catch(l=>console.error(l))},9162:(ke,me,x)=>{function le(N,V,j,U){return new(j||(j=Promise))(function(B,Re){function He(ye){try{de(U.next(ye))}catch(re){Re(re)}}function Pt(ye){try{de(U.throw(ye))}catch(re){Re(re)}}function de(ye){ye.done?B(ye.value):function(B){return B instanceof j?B:new j(function(Re){Re(B)})}(ye.value).then(He,Pt)}de((U=U.apply(N,V||[])).next())})}function Me(N){return this instanceof Me?(this.v=N,this):new Me(N)}function ce(N,V,j){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var X,U=j.apply(N,V||[]),B=[];return X={},Re("next"),Re("throw"),Re("return"),X[Symbol.asyncIterator]=function(){return this},X;function Re(se){U[se]&&(X[se]=function(Ue){return new Promise(function(Ye,ze){B.push([se,Ue,Ye,ze])>1||He(se,Ue)})})}function He(se,Ue){try{!function(se){se.value instanceof Me?Promise.resolve(se.value.v).then(de,ye):re(B[0][2],se)}(U[se](Ue))}catch(Ye){re(B[0][3],Ye)}}function de(se){He("next",se)}function ye(se){He("throw",se)}function re(se,Ue){se(Ue),B.shift(),B.length&&He(B[0][0],B[0][1])}}function Ve(N){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,V=N[Symbol.asyncIterator];return V?V.call(N):(N=function(N){var V="function"==typeof Symbol&&Symbol.iterator,j=V&&N[V],U=0;if(j)return j.call(N);if(N&&"number"==typeof N.length)return{next:function(){return N&&U>=N.length&&(N=void 0),{value:N&&N[U++],done:!N}}};throw new TypeError(V?"Object is not iterable.":"Symbol.iterator is not defined.")}(N),j={},U("next"),U("throw"),U("return"),j[Symbol.asyncIterator]=function(){return this},j);function U(B){j[B]=N[B]&&function(Re){return new Promise(function(He,Pt){!function(B,Re,He,Pt){Promise.resolve(Pt).then(function(de){B({value:de,done:He})},Re)}(He,Pt,(Re=N[B](Re)).done,Re.value)})}}}x.d(me,{mG:()=>le,qq:()=>Me,FC:()=>ce,KL:()=>Ve})},4762:(ke,me,x)=>{x.d(me,{ZT:()=>ne,pi:()=>I,mG:()=>le,Jh:()=>ue,XA:()=>$,CR:()=>fe,ev:()=>Se});var D=function(N,V){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,U){j.__proto__=U}||function(j,U){for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(j[X]=U[X])})(N,V)};function ne(N,V){if("function"!=typeof V&&null!==V)throw new TypeError("Class extends value "+String(V)+" is not a constructor or null");function j(){this.constructor=N}D(N,V),N.prototype=null===V?Object.create(V):(j.prototype=V.prototype,new j)}var I=function(){return I=Object.assign||function(V){for(var j,U=1,X=arguments.length;U<X;U++)for(var B in j=arguments[U])Object.prototype.hasOwnProperty.call(j,B)&&(V[B]=j[B]);return V},I.apply(this,arguments)};function le(N,V,j,U){return new(j||(j=Promise))(function(B,Re){function He(ye){try{de(U.next(ye))}catch(re){Re(re)}}function Pt(ye){try{de(U.throw(ye))}catch(re){Re(re)}}function de(ye){ye.done?B(ye.value):function(B){return B instanceof j?B:new j(function(Re){Re(B)})}(ye.value).then(He,Pt)}de((U=U.apply(N,V||[])).next())})}function ue(N,V){var U,X,B,Re,j={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]};return Re={next:He(0),throw:He(1),return:He(2)},"function"==typeof Symbol&&(Re[Symbol.iterator]=function(){return this}),Re;function He(de){return function(ye){return function(de){if(U)throw new TypeError("Generator is already executing.");for(;j;)try{if(U=1,X&&(B=2&de[0]?X.return:de[0]?X.throw||((B=X.return)&&B.call(X),0):X.next)&&!(B=B.call(X,de[1])).done)return B;switch(X=0,B&&(de=[2&de[0],B.value]),de[0]){case 0:case 1:B=de;break;case 4:return j.label++,{value:de[1],done:!1};case 5:j.label++,X=de[1],de=[0];continue;case 7:de=j.ops.pop(),j.trys.pop();continue;default:if(!(B=(B=j.trys).length>0&&B[B.length-1])&&(6===de[0]||2===de[0])){j=0;continue}if(3===de[0]&&(!B||de[1]>B[0]&&de[1]<B[3])){j.label=de[1];break}if(6===de[0]&&j.label<B[1]){j.label=B[1],B=de;break}if(B&&j.label<B[2]){j.label=B[2],j.ops.push(de);break}B[2]&&j.ops.pop(),j.trys.pop();continue}de=V.call(N,j)}catch(ye){de=[6,ye],X=0}finally{U=B=0}if(5&de[0])throw de[1];return{value:de[0]?de[1]:void 0,done:!0}}([de,ye])}}}function $(N){var V="function"==typeof Symbol&&Symbol.iterator,j=V&&N[V],U=0;if(j)return j.call(N);if(N&&"number"==typeof N.length)return{next:function(){return N&&U>=N.length&&(N=void 0),{value:N&&N[U++],done:!N}}};throw new TypeError(V?"Object is not iterable.":"Symbol.iterator is not defined.")}function fe(N,V){var j="function"==typeof Symbol&&N[Symbol.iterator];if(!j)return N;var X,Re,U=j.call(N),B=[];try{for(;(void 0===V||V-- >0)&&!(X=U.next()).done;)B.push(X.value)}catch(He){Re={error:He}}finally{try{X&&!X.done&&(j=U.return)&&j.call(U)}finally{if(Re)throw Re.error}}return B}function Se(N,V,j){if(j||2===arguments.length)for(var B,U=0,X=V.length;U<X;U++)(B||!(U in V))&&(B||(B=Array.prototype.slice.call(V,0,U)),B[U]=V[U]);return N.concat(B||Array.prototype.slice.call(V))}},3668:(ke,me,x)=>{x.d(me,{AFp:()=>kv,ip1:()=>cp,CZH:()=>cc,hGG:()=>OI,z2F:()=>Rf,sBO:()=>iI,_Vd:()=>oc,EJc:()=>jv,SBq:()=>Ko,qLn:()=>Uo,OlP:()=>Kt,zs3:()=>an,ZZ4:()=>Fd,aQg:()=>kd,soG:()=>Pd,h0i:()=>Fu,PXZ:()=>qw,R0b:()=>si,FiY:()=>Rr,Lbi:()=>Vv,g9A:()=>Lv,Qsj:()=>JD,FYo:()=>wd,JOm:()=>Pr,Tiy:()=>Qh,q3G:()=>Ht,Rgc:()=>Sf,dDg:()=>zv,q4F:()=>Yh,GfV:()=>ev,s_b:()=>Ad,ifc:()=>Be,eFA:()=>Zv,G48:()=>Ww,X6Q:()=>_p,_c5:()=>SI,VLi:()=>Hw,c2e:()=>Bv,zSh:()=>hf,wAp:()=>Ze,vHH:()=>Ce,EiD:()=>bl,mCW:()=>Yi,qzn:()=>Jr,JVY:()=>ei,pB0:()=>du,eBb:()=>vl,L6k:()=>_l,LAX:()=>Ca,cg1:()=>Bh,Tjo:()=>pI,kL8:()=>b_,yhl:()=>Ci,dqk:()=>Nt,sIi:()=>mf,QGY:()=>Oh,F4k:()=>Tm,RDi:()=>Kf,AaK:()=>le,z3N:()=>Br,TTD:()=>Oi,xp6:()=>Jp,uIk:()=>Ih,Xpm:()=>It,lG2:()=>Ws,Yz7:()=>ze,cJS:()=>nt,oAB:()=>ui,Yjl:()=>Va,Y36:()=>vf,_UZ:()=>bm,qZA:()=>Nh,TgZ:()=>xh,LFG:()=>on,$8M:()=>rl,NdJ:()=>Fh,oxw:()=>Pm,Q6J:()=>Mh,VKq:()=>ov,kYT:()=>Hs,YNc:()=>fm,_uU:()=>n_,hij:()=>_d});var D=x(273),ne=x(7908),I=x(8305),G=x(3384),pe=x(3174);function _e(e){for(let t in e)if(e[t]===_e)return t;throw Error("Could not find renamed property on target object.")}function le(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(le).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function ue(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const z=_e({__forward_ref__:_e});function J(e){return e.__forward_ref__=J,e.toString=function(){return le(this())},e}function $(e){return function(e){return"function"==typeof e&&e.hasOwnProperty(z)&&e.__forward_ref__===J}(e)?e():e}class Ce extends Error{constructor(t,n){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(t,n)),this.code=t}}function ce(e){return"string"==typeof e?e:null==e?"":String(e)}function Ee(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():ce(e)}function be(e,t){const n=t?` in ${t}`:"";throw new Ce("201",`No provider for ${Ee(e)} found${n}`)}function ye(e,t){null==e&&function(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function ze(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function nt(e){return{providers:e.providers||[],imports:e.imports||[]}}function ot(e){return bn(e,_t)||bn(e,vn)}function bn(e,t){return e.hasOwnProperty(t)?e[t]:null}function Hr(e){return e&&(e.hasOwnProperty(pt)||e.hasOwnProperty(yn))?e[pt]:null}const _t=_e({\u0275prov:_e}),pt=_e({\u0275inj:_e}),vn=_e({ngInjectableDef:_e}),yn=_e({ngInjectorDef:_e});var Fe=(()=>((Fe=Fe||{})[Fe.Default=0]="Default",Fe[Fe.Host=1]="Host",Fe[Fe.Self=2]="Self",Fe[Fe.SkipSelf=4]="SkipSelf",Fe[Fe.Optional=8]="Optional",Fe))();let jt;function Gt(e){const t=jt;return jt=e,t}function Ri(e,t,n){const r=ot(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Fe.Optional?null:void 0!==t?t:void be(le(e),"Injector")}function gr(e){return{toString:e}.toString()}var un=(()=>((un=un||{})[un.OnPush=0]="OnPush",un[un.Default=1]="Default",un))(),Be=(()=>{return(e=Be||(Be={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",Be;var e})();const rt="undefined"!=typeof globalThis&&globalThis,La="undefined"!=typeof window&&window,ai="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Nt=rt||"undefined"!=typeof global&&global||La||ai,Ot={},L=[],F=_e({\u0275cmp:_e}),Q=_e({\u0275dir:_e}),ee=_e({\u0275pipe:_e}),Y=_e({\u0275mod:_e}),Ae=_e({\u0275fac:_e}),Qe=_e({__NG_ELEMENT_ID__:_e});let Dt=0;function It(e){return gr(()=>{const n={},r={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===un.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||L,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Be.Emulated,id:"c",styles:e.styles||L,_:null,setInput:null,schemas:e.schemas||null,tView:null},s=e.directives,u=e.features,h=e.pipes;return r.id+=Dt++,r.inputs=Uu(e.inputs,n),r.outputs=Uu(e.outputs),u&&u.forEach(p=>p(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(En):null,r.pipeDefs=h?()=>("function"==typeof h?h():h).map(Rn):null,r})}function En(e){return wn(e)||function(e){return e[Q]||null}(e)}function Rn(e){return function(e){return e[ee]||null}(e)}const Mn={};function ui(e){return gr(()=>{const t={type:e.type,bootstrap:e.bootstrap||L,declarations:e.declarations||L,imports:e.imports||L,exports:e.exports||L,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(Mn[e.id]=e.type),t})}function Hs(e,t){return gr(()=>{const n=Zt(e,!0);n.declarations=t.declarations||L,n.imports=t.imports||L,n.exports=t.exports||L})}function Uu(e,t){if(null==e)return Ot;const n={};for(const r in e)if(e.hasOwnProperty(r)){let s=e[r],u=s;Array.isArray(s)&&(u=s[1],s=s[0]),n[s]=r,t&&(t[s]=u)}return n}const Ws=It;function Va(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function wn(e){return e[F]||null}function Zt(e,t){const n=e[Y]||null;if(!n&&!0===t)throw new Error(`Type ${le(e)} does not have '\u0275mod' property.`);return n}function Et(e){return Array.isArray(e)&&"object"==typeof e[1]}function qe(e){return Array.isArray(e)&&!0===e[1]}function In(e){return 0!=(8&e.flags)}function es(e){return 2==(2&e.flags)}function ho(e){return 1==(1&e.flags)}function zt(e){return null!==e.template}function yc(e){return 0!=(512&e[2])}function xn(e,t){return e.hasOwnProperty(Ae)?e[Ae]:null}class Qs{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Oi(){return Ys}function Ys(e){return e.type.prototype.ngOnChanges&&(e.setInput=Wu),Yf}function Yf(){const e=Ha(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===Ot)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Wu(e,t,n,r){const s=Ha(e)||function(e,t){return e[Ks]=t}(e,{previous:Ot,current:null}),u=s.current||(s.current={}),h=s.previous,p=this.declaredInputs[n],_=h[p];u[p]=new Qs(_&&_.currentValue,t,h===Ot),e[r]=t}Oi.ngInherit=!0;const Ks="__ngSimpleChanges__";function Ha(e){return e[Ks]||null}let Vt;function Kf(e){Vt=e}function Wt(e){return!!e.listen}const _o={createRenderer:(e,t)=>void 0!==Vt?Vt:"undefined"!=typeof document?document:void 0};function $t(e){for(;Array.isArray(e);)e=e[0];return e}function Nn(e,t){return $t(t[e.index])}function vo(e,t){return e.data[t]}function On(e,t){const n=t[e];return Et(n)?n:n[0]}function ts(e){return 128==(128&e[2])}function zr(e,t){return null==t?null:e[t]}function Tc(e){e[18]=0}function Wa(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const Ke={lFrame:Ya(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function zu(){return Ke.bindingsEnabled}function ve(){return Ke.lFrame.lView}function yt(){return Ke.lFrame.tView}function en(){let e=ea();for(;null!==e&&64===e.type;)e=e.parent;return e}function ea(){return Ke.lFrame.currentTNode}function Un(e,t){const n=Ke.lFrame;n.currentTNode=e,n.isParent=t}function Do(){return Ke.lFrame.isParent}function bo(){return Ke.isInCheckNoChangesMode}function ta(e){Ke.isInCheckNoChangesMode=e}function yr(){return Ke.lFrame.bindingIndex++}function na(e,t){const n=Ke.lFrame;n.bindingIndex=n.bindingRootIndex=e,ra(t)}function ra(e){Ke.lFrame.currentDirectiveIndex=e}function Hn(e){Ke.lFrame.currentQueryIndex=e}function Qa(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function wo(e,t,n){if(n&Fe.SkipSelf){let s=t,u=e;for(;!(s=s.parent,null!==s||n&Fe.Host||(s=Qa(u),null===s||(u=u[15],10&s.type))););if(null===s)return!1;t=s,e=u}const r=Ke.lFrame=Ku();return r.currentTNode=t,r.lView=e,!0}function ki(e){const t=Ku(),n=e[1];Ke.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Ku(){const e=Ke.lFrame,t=null===e?null:e.child;return null===t?Ya(e):t}function Ya(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function as(){const e=Ke.lFrame;return Ke.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Ka=as;function Er(){const e=as();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function cn(){return Ke.lFrame.selectedIndex}function hi(e){Ke.lFrame.selectedIndex=e}function Yt(){const e=Ke.lFrame;return vo(e.tView,e.selectedIndex)}function oa(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const u=e.data[n].type.prototype,{ngAfterContentInit:h,ngAfterContentChecked:p,ngAfterViewInit:_,ngAfterViewChecked:y,ngOnDestroy:b}=u;h&&(e.contentHooks||(e.contentHooks=[])).push(-n,h),p&&((e.contentHooks||(e.contentHooks=[])).push(n,p),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,p)),_&&(e.viewHooks||(e.viewHooks=[])).push(-n,_),y&&((e.viewHooks||(e.viewHooks=[])).push(n,y),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,y)),null!=b&&(e.destroyHooks||(e.destroyHooks=[])).push(n,b)}}function Tn(e,t,n){qa(e,t,3,n)}function ar(e,t,n,r){(3&e[2])===n&&qa(e,t,n,r)}function Vi(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function qa(e,t,n,r){const u=null!=r?r:-1,h=t.length-1;let p=0;for(let _=void 0!==r?65535&e[18]:0;_<h;_++)if("number"==typeof t[_+1]){if(p=t[_],null!=r&&p>=r)break}else t[_]<0&&(e[18]+=65536),(p<u||-1==u)&&(Rc(e,n,t,_),e[18]=(4294901760&e[18])+_+2),_++}function Rc(e,t,n,r){const s=n[r]<0,u=n[r+1],p=e[s?-n[r]:n[r]];if(s){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{u.call(p)}finally{}}}else try{u.call(p)}finally{}}class Cr{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function sa(e,t,n){const r=Wt(e);let s=0;for(;s<n.length;){const u=n[s];if("number"==typeof u){if(0!==u)break;s++;const h=n[s++],p=n[s++],_=n[s++];r?e.setAttribute(t,p,_,h):t.setAttributeNS(h,p,_)}else{const h=u,p=n[++s];cs(h)?r&&e.setProperty(t,h,p):r?e.setAttribute(t,h,p):t.setAttribute(h,p),s++}}return s}function Ju(e){return 3===e||4===e||6===e}function cs(e){return 64===e.charCodeAt(0)}function fs(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const s=t[r];"number"==typeof s?n=s:0===n||Pc(e,n,s,null,-1===n||2===n?t[++r]:null)}}return e}function Pc(e,t,n,r,s){let u=0,h=e.length;if(-1===t)h=-1;else for(;u<e.length;){const p=e[u++];if("number"==typeof p){if(p===t){h=-1;break}if(p>t){h=u-1;break}}}for(;u<e.length;){const p=e[u];if("number"==typeof p)break;if(p===n){if(null===r)return void(null!==s&&(e[u+1]=s));if(r===e[u+1])return void(e[u+2]=s)}u++,null!==r&&u++,null!==s&&u++}-1!==h&&(e.splice(h,0,t),u=h+1),e.splice(u++,0,n),null!==r&&e.splice(u++,0,r),null!==s&&e.splice(u++,0,s)}function el(e){return-1!==e}function So(e){return 32767&e}function ds(e,t){let n=function(e){return e>>16}(e),r=t;for(;n>0;)r=r[15],n--;return r}let Xa=!0;function Ja(e){const t=Xa;return Xa=e,t}let tl=0;function Qr(e,t){const n=Ao(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,ps(r.data,e),ps(t,null),ps(r.blueprint,null));const s=Lr(e,t),u=e.injectorIndex;if(el(s)){const h=So(s),p=ds(s,t),_=p[1].data;for(let y=0;y<8;y++)t[u+y]=p[h+y]|_[h+y]}return t[u+8]=s,u}function ps(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Ao(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Lr(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,s=t;for(;null!==s;){const u=s[1],h=u.type;if(r=2===h?u.declTNode:1===h?s[6]:null,null===r)return-1;if(n++,s=s[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Dr(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Qe)&&(r=n[Qe]),null==r&&(r=n[Qe]=tl++);const s=255&r;t.data[e+(s>>5)]|=1<<s}(e,t,n)}function br(e,t,n){if(n&Fe.Optional)return e;be(t,"NodeInjector")}function aa(e,t,n,r){if(n&Fe.Optional&&void 0===r&&(r=null),0==(n&(Fe.Self|Fe.Host))){const s=e[9],u=Gt(void 0);try{return s?s.get(t,r,n&Fe.Optional):Ri(t,r,n&Fe.Optional)}finally{Gt(u)}}return br(r,t,n)}function gs(e,t,n,r=Fe.Default,s){if(null!==e){const u=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Qe)?e[Qe]:void 0;return"number"==typeof t?t>=0?255&t:Ir:t}(n);if("function"==typeof u){if(!wo(t,e,r))return r&Fe.Host?br(s,n,r):aa(t,n,r,s);try{const h=u(r);if(null!=h||r&Fe.Optional)return h;be(n)}finally{Ka()}}else if("number"==typeof u){let h=null,p=Ao(e,t),_=-1,y=r&Fe.Host?t[16][6]:null;for((-1===p||r&Fe.SkipSelf)&&(_=-1===p?Lr(e,t):t[p+8],-1!==_&&tu(r,!1)?(h=t[1],p=So(_),t=ds(_,t)):p=-1);-1!==p;){const b=t[1];if(la(u,p,b.data)){const S=Tr(p,t,n,h,r,y);if(S!==wr)return S}_=t[p+8],-1!==_&&tu(r,t[1].data[p+8]===y)&&la(u,p,t)?(h=b,p=So(_),t=ds(_,t)):p=-1}}}return aa(t,n,r,s)}const wr={};function Ir(){return new Mo(en(),ve())}function Tr(e,t,n,r,s,u){const h=t[1],p=h.data[e+8],b=function(e,t,n,r,s){const u=e.providerIndexes,h=t.data,p=1048575&u,_=e.directiveStart,b=u>>20,R=s?p+b:e.directiveEnd;for(let k=r?p:p+b;k<R;k++){const H=h[k];if(k<_&&n===H||k>=_&&H.type===n)return k}if(s){const k=h[_];if(k&&zt(k)&&k.type===n)return _}return null}(p,h,n,null==r?es(p)&&Xa:r!=h&&0!=(3&p.type),s&Fe.Host&&u===p);return null!==b?ji(t,h,b,p):wr}function ji(e,t,n,r){let s=e[n];const u=t.data;if(function(e){return e instanceof Cr}(s)){const h=s;h.resolving&&function(e,t){throw new Ce("200",`Circular dependency in DI detected for ${e}`)}(Ee(u[n]));const p=Ja(h.canSeeViewProviders);h.resolving=!0;const _=h.injectImpl?Gt(h.injectImpl):null;wo(e,r,Fe.Default);try{s=e[n]=h.factory(void 0,u,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:s,ngDoCheck:u}=t.type.prototype;if(r){const h=Ys(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,h),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,h)}s&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,s),u&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,u),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,u))}(n,u[n],t)}finally{null!==_&&Gt(_),Ja(p),h.resolving=!1,Ka()}}return s}function la(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function tu(e,t){return!(e&Fe.Self||e&Fe.Host&&t)}class Mo{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return gs(this._tNode,this._lView,t,r,n)}}function rl(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const r=n.length;let s=0;for(;s<r;){const u=n[s];if(Ju(u))break;if(0===u)s+=2;else if("number"==typeof u)for(s++;s<r&&"string"==typeof n[s];)s++;else{if(u===t)return n[s+1];s+=2}}}return null}(en(),e)}const Sr="__parameters__";function Hi(e,t,n){return gr(()=>{const r=function(e){return function(...n){if(e){const r=e(...n);for(const s in r)this[s]=r[s]}}}(t);function s(...u){if(this instanceof s)return r.apply(this,u),this;const h=new s(...u);return p.annotation=h,p;function p(_,y,b){const S=_.hasOwnProperty(Sr)?_[Sr]:Object.defineProperty(_,Sr,{value:[]})[Sr];for(;S.length<=b;)S.push(null);return(S[b]=S[b]||[]).push(h),_}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s})}class Kt{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=ze({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}function Kn(e,t){e.forEach(n=>Array.isArray(n)?Kn(n,t):t(n))}function ys(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function _i(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const $i={},Ds="__NG_DI_FLAG__",qr="ngTempTokenPath",$n=/\n/gm,ga="__source",ma=_e({provide:String,useValue:_e});let bs;function ko(e){const t=bs;return bs=e,t}function sn(e,t=Fe.Default){if(void 0===bs)throw new Error("inject() must be called from an injection context");return null===bs?Ri(e,void 0,t):bs.get(e,t&Fe.Optional?null:void 0,t)}function on(e,t=Fe.Default){return(jt||sn)($(e),t)}function Ei(e){const t=[];for(let n=0;n<e.length;n++){const r=$(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let s,u=Fe.Default;for(let h=0;h<r.length;h++){const p=r[h],_=iu(p);"number"==typeof _?-1===_?s=p.token:u|=_:s=p}t.push(on(s,u))}else t.push(on(r))}return t}function Gi(e,t){return e[Ds]=t,e.prototype[Ds]=t,e}function iu(e){return e[Ds]}function va(e,t,n,r){const s=e[qr];throw t[ga]&&s.unshift(t[ga]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let s=le(t);if(Array.isArray(t))s=t.map(le).join(" -> ");else if("object"==typeof t){let u=[];for(let h in t)if(t.hasOwnProperty(h)){let p=t[h];u.push(h+":"+("string"==typeof p?JSON.stringify(p):le(p)))}s=`{${u.join(", ")}}`}return`${n}${r?"("+r+")":""}[${s}]: ${e.replace($n,"\n  ")}`}("\n"+e.message,s,n,r),e.ngTokenPath=s,e[qr]=null,e}const ur=Gi(Hi("Inject",e=>({token:e})),-1),Rr=Gi(Hi("Optional"),8),zi=Gi(Hi("SkipSelf"),4);let Bo;function Vr(e){var t;return(null==(t=function(){if(void 0===Bo&&(Bo=null,Nt.trustedTypes))try{Bo=Nt.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(e){}return Bo}())?void 0:t.createHTML(e))||e}class mn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class gl extends mn{getTypeName(){return"HTML"}}class Wc extends mn{getTypeName(){return"Style"}}class ml extends mn{getTypeName(){return"Script"}}class $c extends mn{getTypeName(){return"URL"}}class Ea extends mn{getTypeName(){return"ResourceURL"}}function Br(e){return e instanceof mn?e.changingThisBreaksApplicationSecurity:e}function Jr(e,t){const n=Ci(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function Ci(e){return e instanceof mn&&e.getTypeName()||null}function ei(e){return new gl(e)}function _l(e){return new Wc(e)}function vl(e){return new ml(e)}function Ca(e){return new $c(e)}function du(e){return new Ea(e)}class Gc{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const n=(new window.DOMParser).parseFromString(Vr(t),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(t):(n.removeChild(n.firstChild),n)}catch(n){return null}}}class hu{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);const r=this.inertDocument.createElement("body");n.appendChild(r)}}getInertBodyElement(t){const n=this.inertDocument.createElement("template");if("content"in n)return n.innerHTML=Vr(t),n;const r=this.inertDocument.createElement("body");return r.innerHTML=Vr(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(t){const n=t.attributes;for(let s=n.length-1;0<s;s--){const h=n.item(s).name;("xmlns:ns1"===h||0===h.indexOf("ns1:"))&&t.removeAttribute(h)}let r=t.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const Qc=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,yl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Yi(e){return(e=String(e)).match(Qc)||e.match(yl)?e:"unsafe:"+e}function jr(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function Ki(...e){const t={};for(const n of e)for(const r in n)n.hasOwnProperty(r)&&(t[r]=!0);return t}const ba=jr("area,br,col,hr,img,wbr"),El=jr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),An=jr("rp,rt"),gu=Ki(ba,Ki(El,jr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ki(An,jr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ki(An,El)),xs=jr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),qi=jr("srcset"),mu=Ki(xs,qi,jr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),jr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),_u=jr("script,style,template");class Cl{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,r=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let s=this.checkClobberedElement(n,n.nextSibling);if(s){n=s;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(t){const n=t.nodeName.toLowerCase();if(!gu.hasOwnProperty(n))return this.sanitizedSomething=!0,!_u.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const r=t.attributes;for(let s=0;s<r.length;s++){const u=r.item(s),h=u.name,p=h.toLowerCase();if(!mu.hasOwnProperty(p)){this.sanitizedSomething=!0;continue}let _=u.value;xs[p]&&(_=Yi(_)),qi[p]&&(e=_,_=(e=String(e)).split(",").map(t=>Yi(t.trim())).join(", ")),this.buf.push(" ",h,'="',Zn(_),'"')}var e;return this.buf.push(">"),!0}endElement(t){const n=t.nodeName.toLowerCase();gu.hasOwnProperty(n)&&!ba.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(Zn(t))}checkClobberedElement(t,n){if(n&&(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return n}}const Dl=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,lr=/([^\#-~ |!])/g;function Zn(e){return e.replace(/&/g,"&amp;").replace(Dl,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(lr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ti;function bl(e,t){let n=null;try{ti=ti||function(e){const t=new hu(e);return function(){try{return!!(new window.DOMParser).parseFromString(Vr(""),"text/html")}catch(e){return!1}}()?new Gc(t):t}(e);let r=t?String(t):"";n=ti.getInertBodyElement(r);let s=5,u=r;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,r=u,u=n.innerHTML,n=ti.getInertBodyElement(r)}while(r!==u);return Vr((new Cl).sanitizeChildren(vu(n)||n))}finally{if(n){const r=vu(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function vu(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Ht=(()=>((Ht=Ht||{})[Ht.NONE=0]="NONE",Ht[Ht.HTML=1]="HTML",Ht[Ht.STYLE=2]="STYLE",Ht[Ht.SCRIPT=3]="SCRIPT",Ht[Ht.URL=4]="URL",Ht[Ht.RESOURCE_URL=5]="RESOURCE_URL",Ht))();const ri="__ngContext__";function Cn(e,t){e[ri]=t}function Du(e){const t=function(e){return e[ri]||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Ma(e){return e.ngOriginalError}function Xc(e,...t){e.error(...t)}class Uo{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t),r=this._findContext(t),s=(e=t)&&e.ngErrorLogger||Xc;var e;s(this._console,"ERROR",t),n&&s(this._console,"ORIGINAL ERROR",n),r&&s(this._console,"ERROR CONTEXT",r)}_findContext(t){return t?t.ngDebugContext||this._findContext(Ma(t)):null}_findOriginalError(t){let n=t&&Ma(t);for(;n&&Ma(n);)n=Ma(n);return n||null}}const xl=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Nt))();function fr(e){return e instanceof Function?e():e}var Pr=(()=>((Pr=Pr||{})[Pr.Important=1]="Important",Pr[Pr.DashCase=2]="DashCase",Pr))();function Ol(e,t){return undefined(e,t)}function Wo(e){const t=e[3];return qe(t)?t[3]:t}function Pu(e){return Vl(e[13])}function xu(e){return Vl(e[4])}function Vl(e){for(;null!==e&&!qe(e);)e=e[4];return e}function $o(e,t,n,r,s){if(null!=r){let u,h=!1;qe(r)?u=r:Et(r)&&(h=!0,r=r[0]);const p=$t(r);0===e&&null!==n?null==s?Mt(t,n,p):Ft(t,n,p,s||null,!0):1===e&&null!==n?Ft(t,n,p,s||null,!0):2===e?function(e,t,n){const r=gt(e,t);r&&function(e,t,n,r){Wt(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,p,h):3===e&&t.destroyNode(p),null!=u&&function(e,t,n,r,s){const u=n[7];u!==$t(n)&&$o(t,e,r,u,s);for(let p=10;p<n.length;p++){const _=n[p];ie(_[1],_,e,t,r,u)}}(t,e,u,n,s)}}function d(e,t,n){return Wt(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function ge(e,t){const n=e[9],r=n.indexOf(t),s=t[3];1024&t[2]&&(t[2]&=-1025,Wa(s,-1)),n.splice(r,1)}function we(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const s=r[17];null!==s&&s!==e&&ge(s,r),t>0&&(e[n-1][4]=r[4]);const u=_i(e,10+t);!function(e,t){ie(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);const h=u[19];null!==h&&h.detachView(u[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Oe(e,t){if(!(256&t[2])){const n=t[11];Wt(n)&&n.destroyNode&&ie(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Xe(e[1],e);for(;t;){let n=null;if(Et(t))n=t[13];else{const r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)Et(t)&&Xe(t[1],t),t=t[3];null===t&&(t=e),Et(t)&&Xe(t[1],t),n=t&&t[4]}t=n}}(t)}}function Xe(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const s=t[n[r]];if(!(s instanceof Cr)){const u=n[r+1];if(Array.isArray(u))for(let h=0;h<u.length;h+=2){const p=s[u[h]],_=u[h+1];try{_.call(p)}finally{}}else try{u.call(s)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let s=-1;if(null!==n)for(let u=0;u<n.length-1;u+=2)if("string"==typeof n[u]){const h=n[u+1],p="function"==typeof h?h(t):$t(t[h]),_=r[s=n[u+2]],y=n[u+3];"boolean"==typeof y?p.removeEventListener(n[u],_,y):y>=0?r[s=y]():r[s=-y].unsubscribe(),u+=2}else{const h=r[s=n[u+1]];n[u].call(h)}if(null!==r){for(let u=s+1;u<r.length;u++)r[u]();t[7]=null}}(e,t),1===t[1].type&&Wt(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&qe(t[3])){n!==t[3]&&ge(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function St(e,t,n){return function(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const s=e.data[r.directiveStart].encapsulation;if(s===Be.None||s===Be.Emulated)return null}return Nn(r,n)}(e,t.parent,n)}function Ft(e,t,n,r,s){Wt(e)?e.insertBefore(t,n,r,s):t.insertBefore(n,r,s)}function Mt(e,t,n){Wt(e)?e.appendChild(t,n):t.appendChild(n)}function kt(e,t,n,r,s){null!==r?Ft(e,t,n,r,s):Mt(e,t,n)}function gt(e,t){return Wt(e)?e.parentNode(t):t.parentNode}let c=function(e,t,n){return 40&e.type?Nn(e,n):null};function C(e,t,n,r){const s=St(e,r,t),u=t[11],p=function(e,t,n){return c(e,t,n)}(r.parent||t[6],r,t);if(null!=s)if(Array.isArray(n))for(let _=0;_<n.length;_++)kt(u,s,n[_],p,!1);else kt(u,s,n,p,!1)}function T(e,t){if(null!==t){const n=t.type;if(3&n)return Nn(t,e);if(4&n)return P(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return T(e,r);{const s=e[t.index];return qe(s)?P(-1,s):$t(s)}}if(32&n)return Ol(t,e)()||$t(e[t.index]);{const r=A(e,t);return null!==r?Array.isArray(r)?r[0]:T(Wo(e[16]),r):T(e,t.next)}}return null}function A(e,t){return null!==t?e[16][6].projection[t.projection]:null}function P(e,t){const n=10+e+1;if(n<t.length){const r=t[n],s=r[1].firstChild;if(null!==s)return T(r,s)}return t[7]}function Z(e,t,n,r,s,u,h){for(;null!=n;){const p=r[n.index],_=n.type;if(h&&0===t&&(p&&Cn($t(p),r),n.flags|=4),64!=(64&n.flags))if(8&_)Z(e,t,n.child,r,s,u,!1),$o(t,e,s,p,u);else if(32&_){const y=Ol(n,r);let b;for(;b=y();)$o(t,e,s,b,u);$o(t,e,s,p,u)}else 16&_?Pe(e,t,r,n,s,u):$o(t,e,s,p,u);n=h?n.projectionNext:n.next}}function ie(e,t,n,r,s,u){Z(n,r,e.firstChild,t,s,u,!1)}function Pe(e,t,n,r,s,u){const h=n[16],_=h[6].projection[r.projection];if(Array.isArray(_))for(let y=0;y<_.length;y++)$o(t,e,s,_[y],u);else Z(e,t,_,h[3],s,u,!0)}function dt(e,t,n){Wt(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function dn(e,t,n){Wt(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function ii(e,t,n){let r=e.length;for(;;){const s=e.indexOf(t,n);if(-1===s)return s;if(0===s||e.charCodeAt(s-1)<=32){const u=t.length;if(s+u===r||e.charCodeAt(s+u)<=32)return s}n=s+1}}const Bl="ng-template";function lf(e,t,n){let r=0;for(;r<e.length;){let s=e[r++];if(n&&"class"===s){if(s=e[r],-1!==ii(s.toLowerCase(),t,0))return!0}else if(1===s){for(;r<e.length&&"string"==typeof(s=e[r++]);)if(s.toLowerCase()===t)return!0;return!1}}return!1}function sd(e){return 4===e.type&&e.value!==Bl}function Jy(e,t,n){return t===(4!==e.type||n?e.value:Bl)}function eE(e,t,n){let r=4;const s=e.attrs||[],u=function(e){for(let t=0;t<e.length;t++)if(Ju(e[t]))return t;return e.length}(s);let h=!1;for(let p=0;p<t.length;p++){const _=t[p];if("number"!=typeof _){if(!h)if(4&r){if(r=2|1&r,""!==_&&!Jy(e,_,n)||""===_&&1===t.length){if(eo(r))return!1;h=!0}}else{const y=8&r?_:t[++p];if(8&r&&null!==e.attrs){if(!lf(e.attrs,y,n)){if(eo(r))return!1;h=!0}continue}const S=tE(8&r?"class":_,s,sd(e),n);if(-1===S){if(eo(r))return!1;h=!0;continue}if(""!==y){let R;R=S>u?"":s[S+1].toLowerCase();const k=8&r?R:null;if(k&&-1!==ii(k,y,0)||2&r&&y!==R){if(eo(r))return!1;h=!0}}}}else{if(!h&&!eo(r)&&!eo(_))return!1;if(h&&eo(_))continue;h=!1,r=_|1&r}}return eo(r)||h}function eo(e){return 0==(1&e)}function tE(e,t,n,r){if(null===t)return-1;let s=0;if(r||!n){let u=!1;for(;s<t.length;){const h=t[s];if(h===e)return s;if(3===h||6===h)u=!0;else{if(1===h||2===h){let p=t[++s];for(;"string"==typeof p;)p=t[++s];continue}if(4===h)break;if(0===h){s+=4;continue}}s+=u?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Zp(e,t,n=!1){for(let r=0;r<t.length;r++)if(eE(e,t[r],n))return!0;return!1}function Xp(e,t){return e?":not("+t.trim()+")":t}function sE(e){let t=e[0],n=1,r=2,s="",u=!1;for(;n<e.length;){let h=e[n];if("string"==typeof h)if(2&r){const p=e[++n];s+="["+h+(p.length>0?'="'+p+'"':"")+"]"}else 8&r?s+="."+h:4&r&&(s+=" "+h);else""!==s&&!eo(h)&&(t+=Xp(u,s),s=""),r=h,u=u||!eo(r);n++}return""!==s&&(t+=Xp(u,s)),t}const ht={};function Jp(e){eg(yt(),ve(),cn()+e,bo())}function eg(e,t,n,r){if(!r)if(3==(3&t[2])){const u=e.preOrderCheckHooks;null!==u&&Tn(t,u,n)}else{const u=e.preOrderHooks;null!==u&&ar(t,u,0,n)}hi(n)}function fg(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r],u=n[r+1];if(-1!==u){const h=e.data[u];Hn(s),h.contentQueries(2,t[u],u)}}}function cf(e,t,n,r,s,u,h,p,_,y){const b=t.blueprint.slice();return b[0]=s,b[2]=140|r,Tc(b),b[3]=b[15]=e,b[8]=n,b[10]=h||e&&e[10],b[11]=p||e&&e[11],b[12]=_||e&&e[12]||null,b[9]=y||e&&e[9]||null,b[6]=u,b[16]=2==t.type?e[16]:b,b}function jl(e,t,n,r,s){let u=e.data[t];if(null===u)u=function(e,t,n,r,s){const u=ea(),h=Do(),_=e.data[t]=function(e,t,n,r,s,u){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:s,attrs:u,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,h?u:u&&u.parent,n,t,r,s);return null===e.firstChild&&(e.firstChild=_),null!==u&&(h?null==u.child&&null!==_.parent&&(u.child=_):null===u.next&&(u.next=_)),_}(e,t,n,r,s),Ke.lFrame.inI18n&&(u.flags|=64);else if(64&u.type){u.type=n,u.value=r,u.attrs=s;const h=function(){const e=Ke.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();u.injectorIndex=null===h?-1:h.injectorIndex}return Un(u,!0),u}function Ul(e,t,n,r){if(0===n)return-1;const s=t.length;for(let u=0;u<n;u++)t.push(r),e.blueprint.push(r),e.data.push(null);return s}function ff(e,t,n){ki(t);try{const r=e.viewQuery;null!==r&&gh(1,r,n);const s=e.template;null!==s&&dg(e,t,s,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&fg(e,t),e.staticViewQueries&&gh(2,e.viewQuery,n);const u=e.components;null!==u&&function(e,t){for(let n=0;n<t.length;n++)HE(e,t[n])}(t,u)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,Er()}}function Hl(e,t,n,r){const s=t[2];if(256==(256&s))return;ki(t);const u=bo();try{Tc(t),function(e){Ke.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&dg(e,t,n,2,r);const h=3==(3&s);if(!u)if(h){const y=e.preOrderCheckHooks;null!==y&&Tn(t,y,null)}else{const y=e.preOrderHooks;null!==y&&ar(t,y,0,null),Vi(t,0)}if(function(e){for(let t=Pu(e);null!==t;t=xu(t)){if(!t[2])continue;const n=t[9];for(let r=0;r<n.length;r++){const s=n[r],u=s[3];0==(1024&s[2])&&Wa(u,1),s[2]|=1024}}}(t),function(e){for(let t=Pu(e);null!==t;t=xu(t))for(let n=10;n<t.length;n++){const r=t[n],s=r[1];ts(r)&&Hl(s,r,s.template,r[8])}}(t),null!==e.contentQueries&&fg(e,t),!u)if(h){const y=e.contentCheckHooks;null!==y&&Tn(t,y)}else{const y=e.contentHooks;null!==y&&ar(t,y,1),Vi(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const s=n[r];if(s<0)hi(~s);else{const u=s,h=n[++r],p=n[++r];na(h,u),p(2,t[u])}}}finally{hi(-1)}}(e,t);const p=e.components;null!==p&&function(e,t){for(let n=0;n<t.length;n++)UE(e,t[n])}(t,p);const _=e.viewQuery;if(null!==_&&gh(2,_,r),!u)if(h){const y=e.viewCheckHooks;null!==y&&Tn(t,y)}else{const y=e.viewHooks;null!==y&&ar(t,y,2),Vi(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),u||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Wa(t[3],-1))}finally{Er()}}function DE(e,t,n,r){const s=t[10],u=!bo(),h=function(e){return 4==(4&e[2])}(t);try{u&&!h&&s.begin&&s.begin(),h&&ff(e,t,r),Hl(e,t,n,r)}finally{u&&!h&&s.end&&s.end()}}function dg(e,t,n,r,s){const u=cn(),h=2&r;try{hi(-1),h&&t.length>20&&eg(e,t,20,bo()),n(r,s)}finally{hi(u)}}function ah(e,t,n){!zu()||(function(e,t,n,r){const s=n.directiveStart,u=n.directiveEnd;e.firstCreatePass||Qr(n,t),Cn(r,t);const h=n.initialInputs;for(let p=s;p<u;p++){const _=e.data[p],y=zt(_);y&&kE(t,n,_);const b=ji(t,e,p,n);Cn(b,t),null!==h&&LE(0,p-s,b,_,0,h),y&&(On(n.index,t)[8]=b)}}(e,t,n,Nn(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,s=n.directiveEnd,h=n.index,p=Ke.lFrame.currentDirectiveIndex;try{hi(h);for(let _=r;_<s;_++){const y=e.data[_],b=t[_];ra(_),(null!==y.hostBindings||0!==y.hostVars||null!==y.hostAttrs)&&Cg(y,b)}}finally{hi(-1),ra(p)}}(e,t,n))}function uh(e,t,n=Nn){const r=t.localNames;if(null!==r){let s=t.index+1;for(let u=0;u<r.length;u+=2){const h=r[u+1],p=-1===h?n(t,e):e[h];e[s++]=p}}}function pg(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=cd(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function cd(e,t,n,r,s,u,h,p,_,y){const b=20+r,S=b+s,R=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:ht);return n}(b,S),k="function"==typeof y?y():y;return R[1]={type:e,blueprint:R,template:n,queries:null,viewQuery:p,declTNode:t,data:R.slice().fill(null,b),bindingStartIndex:b,expandoStartIndex:S,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof u?u():u,pipeRegistry:"function"==typeof h?h():h,firstChild:null,schemas:_,consts:k,incompleteFirstPass:!1}}function vg(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const s=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,s):n[r]=[t,s]}return n}function lh(e,t,n,r){let s=!1;if(zu()){const u=function(e,t,n){const r=e.directiveRegistry;let s=null;if(r)for(let u=0;u<r.length;u++){const h=r[u];Zp(n,h.selectors,!1)&&(s||(s=[]),Dr(Qr(n,t),e,h.type),zt(h)?(Dg(e,n),s.unshift(h)):s.push(h))}return s}(e,t,n),h=null===r?null:{"":-1};if(null!==u){s=!0,bg(n,e.data.length,u.length);for(let b=0;b<u.length;b++){const S=u[b];S.providersResolver&&S.providersResolver(S)}let p=!1,_=!1,y=Ul(e,t,u.length,null);for(let b=0;b<u.length;b++){const S=u[b];n.mergedAttrs=fs(n.mergedAttrs,S.hostAttrs),wg(e,n,t,y,S),FE(y,S,h),null!==S.contentQueries&&(n.flags|=8),(null!==S.hostBindings||null!==S.hostAttrs||0!==S.hostVars)&&(n.flags|=128);const R=S.type.prototype;!p&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),p=!0),!_&&(R.ngOnChanges||R.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),_=!0),y++}!function(e,t){const r=t.directiveEnd,s=e.data,u=t.attrs,h=[];let p=null,_=null;for(let y=t.directiveStart;y<r;y++){const b=s[y],S=b.inputs,R=null===u||sd(t)?null:VE(S,u);h.push(R),p=vg(S,y,p),_=vg(b.outputs,y,_)}null!==p&&(p.hasOwnProperty("class")&&(t.flags|=16),p.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=h,t.inputs=p,t.outputs=_}(e,n)}h&&function(e,t,n){if(t){const r=e.localNames=[];for(let s=0;s<t.length;s+=2){const u=n[t[s+1]];if(null==u)throw new Ce("301",`Export of name '${t[s+1]}' not found!`);r.push(t[s],u)}}}(n,r,h)}return n.mergedAttrs=fs(n.mergedAttrs,n.attrs),s}function Eg(e,t,n,r,s,u){const h=u.hostBindings;if(h){let p=e.hostBindingOpCodes;null===p&&(p=e.hostBindingOpCodes=[]);const _=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(p)!=_&&p.push(_),p.push(r,s,h)}}function Cg(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Dg(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function FE(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;zt(t)&&(n[""]=e)}}function bg(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function wg(e,t,n,r,s){e.data[r]=s;const u=s.factory||(s.factory=xn(s.type)),h=new Cr(u,zt(s),null);e.blueprint[r]=h,n[r]=h,Eg(e,t,0,r,Ul(e,n,s.hostVars,ht),s)}function kE(e,t,n){const r=Nn(t,e),s=pg(n),u=e[10],h=fd(e,cf(e,s,null,n.onPush?64:16,r,t,u,u.createRenderer(r,n),null,null));e[t.index]=h}function Go(e,t,n,r,s,u){const h=Nn(e,t);!function(e,t,n,r,s,u,h){if(null==u)Wt(e)?e.removeAttribute(t,s,n):t.removeAttribute(s);else{const p=null==h?ce(u):h(u,r||"",s);Wt(e)?e.setAttribute(t,s,p,n):n?t.setAttributeNS(n,s,p):t.setAttribute(s,p)}}(t[11],h,u,e.value,n,r,s)}function LE(e,t,n,r,s,u){const h=u[t];if(null!==h){const p=r.setInput;for(let _=0;_<h.length;){const y=h[_++],b=h[_++],S=h[_++];null!==p?r.setInput(n,S,y,b):n[b]=S}}}function VE(e,t){let n=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;e.hasOwnProperty(s)&&(null===n&&(n=[]),n.push(s,e[s],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Ig(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function UE(e,t){const n=On(t,e);if(ts(n)){const r=n[1];80&n[2]?Hl(r,n,r.template,n[8]):n[5]>0&&fh(n)}}function fh(e){for(let r=Pu(e);null!==r;r=xu(r))for(let s=10;s<r.length;s++){const u=r[s];if(1024&u[2]){const h=u[1];Hl(h,u,h.template,u[8])}else u[5]>0&&fh(u)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const s=On(n[r],e);ts(s)&&s[5]>0&&fh(s)}}function HE(e,t){const n=On(t,e),r=n[1];(function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),ff(r,n,n[8])}function fd(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function dh(e){for(;e;){e[2]|=64;const t=Wo(e);if(yc(e)&&!t)return e;e=t}return null}function ph(e,t,n){const r=t[10];r.begin&&r.begin();try{Hl(e,t,e.template,n)}catch(s){throw Mg(t,s),s}finally{r.end&&r.end()}}function Tg(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=Du(n),s=r[1];DE(s,r,s.template,n)}}(e[8])}function gh(e,t,n){Hn(0),t(e,n)}const QE=(()=>Promise.resolve(null))();function Sg(e){return e[7]||(e[7]=[])}function Ag(e){return e.cleanup||(e.cleanup=[])}function Mg(e,t){const n=e[9],r=n?n.get(Uo,null):null;r&&r.handleError(t)}function Pg(e,t,n,r,s){for(let u=0;u<n.length;){const h=n[u++],p=n[u++],_=t[h],y=e.data[h];null!==y.setInput?y.setInput(_,s,r,p):_[p]=s}}function Vs(e,t,n){const r=function(e,t){return $t(t[e])}(t,e);!function(e,t,n){Wt(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}function dd(e,t,n){let r=n?e.styles:null,s=n?e.classes:null,u=0;if(null!==t)for(let h=0;h<t.length;h++){const p=t[h];"number"==typeof p?u=p:1==u?s=ue(s,p):2==u&&(r=ue(r,p+": "+t[++h]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=s:e.classesWithoutHost=s}const df=new Kt("INJECTOR",-1);class xg{get(t,n=$i){if(n===$i){const r=new Error(`NullInjectorError: No provider for ${le(t)}!`);throw r.name="NullInjectorError",r}return n}}const hf=new Kt("Set Injector scope."),pf={},qE={};let mh;function Ng(){return void 0===mh&&(mh=new xg),mh}function Og(e,t=null,n=null,r){return new XE(e,n,t||Ng(),r)}class XE{constructor(t,n,r,s=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const u=[];n&&Kn(n,p=>this.processProvider(p,t,n)),Kn([t],p=>this.processInjectorType(p,[],u)),this.records.set(df,Wl(void 0,this));const h=this.records.get(hf);this.scope=null!=h?h.value:null,this.source=s||("object"==typeof t?null:le(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,n=$i,r=Fe.Default){this.assertNotDestroyed();const s=ko(this),u=Gt(void 0);try{if(!(r&Fe.SkipSelf)){let p=this.records.get(t);if(void 0===p){const _=("function"==typeof(e=t)||"object"==typeof e&&e instanceof Kt)&&ot(t);p=_&&this.injectableDefInScope(_)?Wl(_h(t),pf):null,this.records.set(t,p)}if(null!=p)return this.hydrate(t,p)}return(r&Fe.Self?Ng():this.parent).get(t,n=r&Fe.Optional&&n===$i?null:n)}catch(h){if("NullInjectorError"===h.name){if((h[qr]=h[qr]||[]).unshift(le(t)),s)throw h;return va(h,t,"R3InjectorError",this.source)}throw h}finally{Gt(u),ko(s)}var e}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((r,s)=>t.push(le(s))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,n,r){if(!(t=$(t)))return!1;let s=Hr(t);const u=null==s&&t.ngModule||void 0,h=void 0===u?t:u,p=-1!==r.indexOf(h);if(void 0!==u&&(s=Hr(u)),null==s)return!1;if(null!=s.imports&&!p){let b;r.push(h);try{Kn(s.imports,S=>{this.processInjectorType(S,n,r)&&(void 0===b&&(b=[]),b.push(S))})}finally{}if(void 0!==b)for(let S=0;S<b.length;S++){const{ngModule:R,providers:k}=b[S];Kn(k,H=>this.processProvider(H,R,k||L))}}this.injectorDefTypes.add(h);const _=xn(h)||(()=>new h);this.records.set(h,Wl(_,pf));const y=s.providers;if(null!=y&&!p){const b=t;Kn(y,S=>this.processProvider(S,b,y))}return void 0!==u&&void 0!==t.providers}processProvider(t,n,r){let s=$l(t=$(t))?t:$(t&&t.provide);const u=(e=t,kg(e)?Wl(void 0,e.useValue):Wl(function(e,t,n){let r;if($l(e)){const s=$(e);return xn(s)||_h(s)}if(kg(e))r=()=>$(e.useValue);else if(function(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Ei(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>on($(e.useExisting));else{const s=$(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return xn(s)||_h(s);r=()=>new s(...Ei(e.deps))}return r}(e),pf));var e;if($l(t)||!0!==t.multi)this.records.get(s);else{let h=this.records.get(s);h||(h=Wl(void 0,pf,!0),h.factory=()=>Ei(h.multi),this.records.set(s,h)),s=t,h.multi.push(t)}this.records.set(s,u)}hydrate(t,n){return n.value===pf&&(n.value=qE,n.value=n.factory()),"object"==typeof n.value&&n.value&&null!==(e=n.value)&&"object"==typeof e&&"function"==typeof e.ngOnDestroy&&this.onDestroy.add(n.value),n.value;var e}injectableDefInScope(t){if(!t.providedIn)return!1;const n=$(t.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function _h(e){const t=ot(e),n=null!==t?t.factory:xn(e);if(null!==n)return n;if(e instanceof Kt)throw new Error(`Token ${le(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const r=function(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?");throw new Error(`Can't resolve all parameters for ${le(e)}: (${r.join(", ")}).`)}const n=function(e){const t=e&&(e[_t]||e[vn]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function Wl(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function kg(e){return null!==e&&"object"==typeof e&&ma in e}function $l(e){return"function"==typeof e}const Lg=function(e,t,n){return function(e,t=null,n=null,r){const s=Og(e,t,n,r);return s._resolveInjectorDefTypes(),s}({name:n},t,e,n)};let an=(()=>{class e{static create(n,r){return Array.isArray(n)?Lg(n,r,""):Lg(n.providers,n.parent,n.name||"")}}return e.THROW_IF_NOT_FOUND=$i,e.NULL=new xg,e.\u0275prov=ze({token:e,providedIn:"any",factory:()=>on(df)}),e.__NG_ELEMENT_ID__=-1,e})();function E0(e,t){oa(Du(e)[1],en())}let hd=null;function Gl(){if(!hd){const e=Nt.Symbol;if(e&&e.iterator)hd=e.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(hd=r)}}}return hd}function mf(e){return!!wh(e)&&(Array.isArray(e)||!(e instanceof Map)&&Gl()in e)}function wh(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function dr(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Ih(e,t,n,r){const s=ve();return dr(s,yr(),t)&&(yt(),Go(Yt(),s,e,t,n,r)),Ih}function fm(e,t,n,r,s,u,h,p){const _=ve(),y=yt(),b=e+20,S=y.firstCreatePass?function(e,t,n,r,s,u,h,p,_){const y=t.consts,b=jl(t,e,4,h||null,zr(y,p));lh(t,n,b,zr(y,_)),oa(t,b);const S=b.tViews=cd(2,b,r,s,u,t.directiveRegistry,t.pipeRegistry,null,t.schemas,y);return null!==t.queries&&(t.queries.template(t,b),S.queries=t.queries.embeddedTView(b)),b}(b,y,_,t,n,r,s,u,h):y.data[b];Un(S,!1);const R=_[11].createComment("");C(y,_,R,S),Cn(R,_),fd(_,_[b]=Ig(R,_,R,S)),ho(S)&&ah(y,_,S),null!=h&&uh(_,S,p)}function vf(e,t=Fe.Default){const n=ve();return null===n?on(e,t):gs(en(),n,$(e),t)}function Mh(e,t,n){const r=ve();return dr(r,yr(),t)&&function(e,t,n,r,s,u,h,p){const _=Nn(t,n);let b,y=t.inputs;!p&&null!=y&&(b=y[r])?(Pg(e,n,b,r,s),es(t)&&function(e,t){const n=On(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),s=null!=h?h(s,t.value||"",r):s,Wt(u)?u.setProperty(_,r,s):cs(r)||(_.setProperty?_.setProperty(r,s):_[r]=s))}(yt(),Yt(),r,e,t,r[11],n,!1),Mh}function Ph(e,t,n,r,s){const h=s?"class":"style";Pg(e,n,t.inputs[h],h,r)}function xh(e,t,n,r){const s=ve(),u=yt(),h=20+e,p=s[11],_=s[h]=d(p,t,Ke.lFrame.currentNamespace),y=u.firstCreatePass?function(e,t,n,r,s,u,h){const p=t.consts,y=jl(t,e,2,s,zr(p,u));return lh(t,n,y,zr(p,h)),null!==y.attrs&&dd(y,y.attrs,!1),null!==y.mergedAttrs&&dd(y,y.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,y),y}(h,u,s,0,t,n,r):u.data[h];Un(y,!0);const b=y.mergedAttrs;null!==b&&sa(p,_,b);const S=y.classes;null!==S&&dn(p,_,S);const R=y.styles;null!==R&&dt(p,_,R),64!=(64&y.flags)&&C(u,s,_,y),0===Ke.lFrame.elementDepthCount&&Cn(_,s),Ke.lFrame.elementDepthCount++,ho(y)&&(ah(u,s,y),function(e,t,n){if(In(t)){const s=t.directiveEnd;for(let u=t.directiveStart;u<s;u++){const h=e.data[u];h.contentQueries&&h.contentQueries(1,n[u],u)}}}(u,y,s)),null!==r&&uh(s,y)}function Nh(){let e=en();Do()?Ke.lFrame.isParent=!1:(e=e.parent,Un(e,!1));const t=e;Ke.lFrame.elementDepthCount--;const n=yt();n.firstCreatePass&&(oa(n,e),In(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Ph(n,t,ve(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Ph(n,t,ve(),t.stylesWithoutHost,!1)}function bm(e,t,n,r){xh(e,t,n,r),Nh()}function Oh(e){return!!e&&"function"==typeof e.then}function Tm(e){return!!e&&"function"==typeof e.subscribe}const Sm=Tm;function Fh(e,t,n,r){const s=ve(),u=yt(),h=en();return function(e,t,n,r,s,u,h,p){const _=ho(r),b=e.firstCreatePass&&Ag(e),S=t[8],R=Sg(t);let k=!0;if(3&r.type||p){const K=Nn(r,t),Ie=p?p(K):K,he=R.length,We=p?tt=>p($t(tt[r.index])):r.index;if(Wt(n)){let tt=null;if(!p&&_&&(tt=function(e,t,n,r){const s=e.cleanup;if(null!=s)for(let u=0;u<s.length-1;u+=2){const h=s[u];if(h===n&&s[u+1]===r){const p=t[7],_=s[u+2];return p.length>_?p[_]:null}"string"==typeof h&&(u+=2)}return null}(e,t,s,r.index)),null!==tt)(tt.__ngLastListenerFn__||tt).__ngNextListenerFn__=u,tt.__ngLastListenerFn__=u,k=!1;else{u=kh(r,t,S,u,!1);const Ct=n.listen(Ie,s,u);R.push(u,Ct),b&&b.push(s,We,he,he+1)}}else u=kh(r,t,S,u,!0),Ie.addEventListener(s,u,h),R.push(u),b&&b.push(s,We,he,h)}else u=kh(r,t,S,u,!1);const H=r.outputs;let te;if(k&&null!==H&&(te=H[s])){const K=te.length;if(K)for(let Ie=0;Ie<K;Ie+=2){const Bn=t[te[Ie]][te[Ie+1]].subscribe(u),Si=R.length;R.push(u,Bn),b&&b.push(s,r.index,Si,-(Si+1))}}}(u,s,s[11],h,e,t,!!n,r),Fh}function Mm(e,t,n,r){try{return!1!==n(r)}catch(s){return Mg(e,s),!1}}function kh(e,t,n,r,s){return function u(h){if(h===Function)return r;const p=2&e.flags?On(e.index,t):t;0==(32&t[2])&&dh(p);let _=Mm(t,0,r,h),y=u.__ngNextListenerFn__;for(;y;)_=Mm(t,0,y,h)&&_,y=y.__ngNextListenerFn__;return s&&!1===_&&(h.preventDefault(),h.returnValue=!1),_}}function Pm(e=1){return function(e){return(Ke.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Ke.lFrame.contextLView))[8]}(e)}function n_(e,t=""){const n=ve(),r=yt(),s=e+20,u=r.firstCreatePass?jl(r,s,1,t,null):r.data[s],h=n[s]=function(e,t){return Wt(e)?e.createText(t):e.createTextNode(t)}(n[11],t);C(r,n,h,u),Un(u,!1)}function _d(e,t,n){const r=ve(),s=function(e,t,n,r){return dr(e,yr(),n)?t+ce(n)+r:ht}(r,e,t,n);return s!==ht&&Vs(r,cn(),s),_d}const Ou=void 0;var QC=["en",[["a","p"],["AM","PM"],Ou],[["AM","PM"],Ou,Ou],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ou,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ou,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ou,"{1} 'at' {0}",Ou],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){const n=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let rc={};function Bh(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=w_(t);if(n)return n;const r=t.split("-")[0];if(n=w_(r),n)return n;if("en"===r)return QC;throw new Error(`Missing locale data for the locale "${e}".`)}function b_(e){return Bh(e)[Ze.PluralCase]}function w_(e){return e in rc||(rc[e]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[e]),rc[e]}var Ze=(()=>((Ze=Ze||{})[Ze.LocaleId=0]="LocaleId",Ze[Ze.DayPeriodsFormat=1]="DayPeriodsFormat",Ze[Ze.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ze[Ze.DaysFormat=3]="DaysFormat",Ze[Ze.DaysStandalone=4]="DaysStandalone",Ze[Ze.MonthsFormat=5]="MonthsFormat",Ze[Ze.MonthsStandalone=6]="MonthsStandalone",Ze[Ze.Eras=7]="Eras",Ze[Ze.FirstDayOfWeek=8]="FirstDayOfWeek",Ze[Ze.WeekendRange=9]="WeekendRange",Ze[Ze.DateFormat=10]="DateFormat",Ze[Ze.TimeFormat=11]="TimeFormat",Ze[Ze.DateTimeFormat=12]="DateTimeFormat",Ze[Ze.NumberSymbols=13]="NumberSymbols",Ze[Ze.NumberFormats=14]="NumberFormats",Ze[Ze.CurrencyCode=15]="CurrencyCode",Ze[Ze.CurrencySymbol=16]="CurrencySymbol",Ze[Ze.CurrencyName=17]="CurrencyName",Ze[Ze.Currencies=18]="Currencies",Ze[Ze.Directionality=19]="Directionality",Ze[Ze.PluralCase=20]="PluralCase",Ze[Ze.ExtraData=21]="ExtraData",Ze))();const vd="en-US";let I_=vd;class q_{}const X_="ngComponent";class KD{resolveComponentFactory(t){throw function(e){const t=Error(`No component factory found for ${le(e)}. Did you add it to @NgModule.entryComponents?`);return t[X_]=e,t}(t)}}let oc=(()=>{class e{}return e.NULL=new KD,e})();function bd(...e){}function sc(e,t){return new Ko(Nn(e,t))}const XD=function(){return sc(en(),ve())};let Ko=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=XD,e})();class wd{}let JD=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>tb(),e})();const tb=function(){const e=ve(),n=On(en().index,e);return function(e){return e[11]}(Et(n)?n:e)};let Qh=(()=>{class e{}return e.\u0275prov=ze({token:e,providedIn:"root",factory:()=>null}),e})();class ev{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Yh=new ev("13.0.1"),ac={};function Id(e,t,n,r,s=!1){for(;null!==n;){const u=t[n.index];if(null!==u&&r.push($t(u)),qe(u))for(let p=10;p<u.length;p++){const _=u[p],y=_[1].firstChild;null!==y&&Id(_[1],_,y,r)}const h=n.type;if(8&h)Id(e,t,n.child,r);else if(32&h){const p=Ol(n,t);let _;for(;_=p();)r.push(_)}else if(16&h){const p=A(t,n);if(Array.isArray(p))r.push(...p);else{const _=Wo(t[16]);Id(_[1],_,p,r,!0)}}n=s?n.projectionNext:n.next}return r}class wf{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return Id(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(qe(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(we(t,r),_i(n,r))}this._attachedToViewContainer=!1}Oe(this._lView[1],this._lView)}onDestroy(t){!function(e,t,n,r){const s=Sg(t);null===n?s.push(r):(s.push(n),e.firstCreatePass&&Ag(e).push(r,s.length-1))}(this._lView[1],this._lView,null,t)}markForCheck(){dh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ph(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){ta(!0);try{ph(e,t,n)}finally{ta(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,ie(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class ib extends wf{constructor(t){super(t),this._view=t}detectChanges(){Tg(this._view)}checkNoChanges(){!function(e){ta(!0);try{Tg(e)}finally{ta(!1)}}(this._view)}get context(){return null}}class tv extends oc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=wn(t);return new Kh(n,this.ngModule)}}function nv(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const sb=new Kt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>xl});class Kh extends q_{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=t.selectors.map(sE).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return nv(this.componentDef.inputs)}get outputs(){return nv(this.componentDef.outputs)}create(t,n,r,s){const u=(s=s||this.ngModule)?function(e,t){return{get:(n,r,s)=>{const u=e.get(n,ac,s);return u!==ac||r===ac?u:t.get(n,r,s)}}}(t,s.injector):t,h=u.get(wd,_o),p=u.get(Qh,null),_=h.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",b=r?function(e,t,n){if(Wt(e))return e.selectRootElement(t,n===Be.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(_,r,this.componentDef.encapsulation):d(h.createRenderer(null,this.componentDef),y,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(y)),S=this.componentDef.onPush?576:528,R=function(e,t){return{components:[],scheduler:e||xl,clean:QE,playerHandler:t||null,flags:0}}(),k=cd(0,null,null,1,0,null,null,null,null,null),H=cf(null,k,R,S,null,null,h,_,p,u);let te,K;ki(H);try{const Ie=function(e,t,n,r,s,u){const h=n[1];n[20]=e;const _=jl(h,20,2,"#host",null),y=_.mergedAttrs=t.hostAttrs;null!==y&&(dd(_,y,!0),null!==e&&(sa(s,e,y),null!==_.classes&&dn(s,e,_.classes),null!==_.styles&&dt(s,e,_.styles)));const b=r.createRenderer(e,t),S=cf(n,pg(t),null,t.onPush?64:16,n[20],_,r,b,u||null,null);return h.firstCreatePass&&(Dr(Qr(_,n),h,t.type),Dg(h,_),bg(_,n.length,1)),fd(n,S),n[20]=S}(b,this.componentDef,H,h,_);if(b)if(r)sa(_,b,["ng-version",Yh.full]);else{const{attrs:he,classes:We}=function(e){const t=[],n=[];let r=1,s=2;for(;r<e.length;){let u=e[r];if("string"==typeof u)2===s?""!==u&&t.push(u,e[++r]):8===s&&n.push(u);else{if(!eo(s))break;s=u}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);he&&sa(_,b,he),We&&We.length>0&&dn(_,b,We.join(" "))}if(K=vo(k,20),void 0!==n){const he=K.projection=[];for(let We=0;We<this.ngContentSelectors.length;We++){const tt=n[We];he.push(null!=tt?Array.from(tt):null)}}te=function(e,t,n,r,s){const u=n[1],h=function(e,t,n){const r=en();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),wg(e,r,t,Ul(e,t,1,null),n));const s=ji(t,e,r.directiveStart,r);Cn(s,t);const u=Nn(r,t);return u&&Cn(u,t),s}(u,n,t);if(r.components.push(h),e[8]=h,s&&s.forEach(_=>_(h,t)),t.contentQueries){const _=en();t.contentQueries(1,h,_.directiveStart)}const p=en();return!u.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(hi(p.index),Eg(n[1],p,0,p.directiveStart,p.directiveEnd,t),Cg(t,h)),h}(Ie,this.componentDef,H,R,[E0]),ff(k,H,null)}finally{Er()}return new lb(this.componentType,te,sc(K,H),H,K)}}class lb extends class{}{constructor(t,n,r,s,u){super(),this.location=r,this._rootLView=s,this._tNode=u,this.instance=n,this.hostView=this.changeDetectorRef=new ib(s),this.componentType=t}get injector(){return new Mo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class Fu{}const uc=new Map;class iv extends Fu{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new tv(this);const r=Zt(t);this._bootstrapComponents=fr(r.bootstrap),this._r3Injector=Og(t,n,[{provide:Fu,useValue:this},{provide:oc,useValue:this.componentFactoryResolver}],le(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,n=an.THROW_IF_NOT_FOUND,r=Fe.Default){return t===an||t===Fu||t===df?this:this._r3Injector.get(t,n,r)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Zh extends class{}{constructor(t){super(),this.moduleType=t,null!==Zt(t)&&function(e){const t=new Set;!function n(r){const s=Zt(r,!0),u=s.id;null!==u&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${le(t)} vs ${le(t.name)}`)}(u,uc.get(u),r),uc.set(u,r));const h=fr(s.imports);for(const p of h)t.has(p)||(t.add(p),n(p))}(e)}(t)}create(t){return new iv(this.moduleType,t)}}function ov(e,t,n,r){return function(e,t,n,r,s,u){const h=t+n;return dr(e,h,s)?function(e,t,n){return e[t]=n}(e,h+1,u?r.call(u,s):r(s)):function(e,t){const n=e[t];return n===ht?void 0:n}(e,h+1)}(ve(),function(){const e=Ke.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}(),e,t,n,r)}function Xh(e){return t=>{setTimeout(e,void 0,t)}}const js=class extends D.x{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){var _,y,b;let s=t,u=n||(()=>null),h=r;if(t&&"object"==typeof t){const S=t;s=null==(_=S.next)?void 0:_.bind(S),u=null==(y=S.error)?void 0:y.bind(S),h=null==(b=S.complete)?void 0:b.bind(S)}this.__isAsync&&(u=Xh(u),s&&(s=Xh(s)),h&&(h=Xh(h)));const p=super.subscribe({next:s,error:u,complete:h});return t instanceof ne.w0&&t.add(p),p}};Symbol;const xb=function(){return e=en(),t=ve(),4&e.type?new Ob(t,e,sc(e,t)):null;var e,t};let Sf=(()=>{class e{}return e.__NG_ELEMENT_ID__=xb,e})();const Nb=Sf,Ob=class extends Nb{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(t){const n=this._declarationTContainer.tViews,r=cf(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const u=this._declarationLView[19];return null!==u&&(r[19]=u.createEmbeddedView(n)),ff(n,r,t),new wf(r)}};const Lb=function(){return function(e,t){let n;const r=t[e.index];if(qe(r))n=r;else{let s;if(8&e.type)s=$t(r);else{const u=t[11];s=u.createComment("");const h=Nn(e,t);Ft(u,gt(u,h),s,function(e,t){return Wt(e)?e.nextSibling(t):t.nextSibling}(u,h),!1)}t[e.index]=n=Ig(r,t,s,e),fd(t,n)}return new fv(n,e,t)}(en(),ve())};let Ad=(()=>{class e{}return e.__NG_ELEMENT_ID__=Lb,e})();const Bb=Ad,fv=class extends Bb{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return sc(this._hostTNode,this._hostLView)}get injector(){return new Mo(this._hostTNode,this._hostLView)}get parentInjector(){const t=Lr(this._hostTNode,this._hostLView);if(el(t)){const n=ds(t,this._hostLView),r=So(t);return new Mo(n[1].data[r+8],n)}return new Mo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=dv(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,r){const s=t.createEmbeddedView(n||{});return this.insert(s,r),s}createComponent(t,n,r,s,u){const h=t&&!("function"==typeof t);let p;if(h)p=n;else{const S=n||{};p=S.index,r=S.injector,s=S.projectableNodes,u=S.ngModuleRef}const _=h?t:new Kh(wn(t)),y=r||this.parentInjector;if(!u&&null==_.ngModule&&y){const S=y.get(Fu,null);S&&(u=S)}const b=_.create(y,s,void 0,u);return this.insert(b.hostView,p),b}insert(t,n){const r=t._lView,s=r[1];if(qe(r[3])){const b=this.indexOf(t);if(-1!==b)this.detach(b);else{const S=r[3],R=new fv(S,S[6],S[3]);R.detach(R.indexOf(t))}}const u=this._adjustIndex(n),h=this._lContainer;!function(e,t,n,r){const s=10+r,u=n.length;r>0&&(n[s-1][4]=t),r<u-10?(t[4]=n[s],ys(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const h=t[17];null!==h&&n!==h&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(h,t);const p=t[19];null!==p&&p.insertView(e),t[2]|=128}(s,r,h,u);const p=P(u,h),_=r[11],y=gt(_,h[7]);return null!==y&&function(e,t,n,r,s,u){r[0]=s,r[6]=t,ie(e,r,n,1,s,u)}(s,h[6],_,r,y,p),t.attachToViewContainerRef(),ys(Jh(h),u,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=dv(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=we(this._lContainer,n);r&&(_i(Jh(this._lContainer),n),Oe(r[1],r))}detach(t){const n=this._adjustIndex(t,-1),r=we(this._lContainer,n);return r&&null!=_i(Jh(this._lContainer),n)?new wf(r):null}_adjustIndex(t,n=0){return null==t?this.length+n:t}};function dv(e){return e[8]}function Jh(e){return e[8]||(e[8]=[])}const cp=new Kt("Application Initializer");let cc=(()=>{class e{constructor(n){this.appInits=n,this.resolve=bd,this.reject=bd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,s)=>{this.resolve=r,this.reject=s})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let s=0;s<this.appInits.length;s++){const u=this.appInits[s]();if(Oh(u))n.push(u);else if(Sm(u)){const h=new Promise((p,_)=>{u.subscribe({complete:p,error:_})});n.push(h)}}Promise.all(n).then(()=>{r()}).catch(s=>{this.reject(s)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(on(cp,8))},e.\u0275prov=ze({token:e,factory:e.\u0275fac}),e})();const kv=new Kt("AppId"),Iw={provide:kv,useFactory:function(){return`${fp()}${fp()}${fp()}`},deps:[]};function fp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Lv=new Kt("Platform Initializer"),Vv=new Kt("Platform ID"),Tw=new Kt("appBootstrapListener");let Bv=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:e.\u0275fac}),e})();const Pd=new Kt("LocaleId"),jv=new Kt("DefaultCurrencyCode");class Aw{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}const dp=function(e){return new Zh(e)},Rw=dp,Mw=function(e){return Promise.resolve(dp(e))},Hv=function(e){const t=dp(e),r=fr(Zt(e).declarations).reduce((s,u)=>{const h=wn(u);return h&&s.push(new Kh(h)),s},[]);return new Aw(t,r)},Pw=Hv,xw=function(e){return Promise.resolve(Hv(e))};let Wv=(()=>{class e{constructor(){this.compileModuleSync=Rw,this.compileModuleAsync=Mw,this.compileModuleAndAllComponentsSync=Pw,this.compileModuleAndAllComponentsAsync=xw}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:e.\u0275fac}),e})();const Fw=(()=>Promise.resolve(0))();function hp(e){"undefined"==typeof Zone?Fw.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class si{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new js(!1),this.onMicrotaskEmpty=new js(!1),this.onStable=new js(!1),this.onError=new js(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&n,s.shouldCoalesceRunChangeDetection=r,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function(){let e=Nt.requestAnimationFrame,t=Nt.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Nt,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,gp(e),e.isCheckStableRunning=!0,pp(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),gp(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,s,u,h,p)=>{try{return $v(e),n.invokeTask(s,u,h,p)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===u.type||e.shouldCoalesceRunChangeDetection)&&t(),Gv(e)}},onInvoke:(n,r,s,u,h,p,_)=>{try{return $v(e),n.invoke(s,u,h,p,_)}finally{e.shouldCoalesceRunChangeDetection&&t(),Gv(e)}},onHasTask:(n,r,s,u)=>{n.hasTask(s,u),r===s&&("microTask"==u.change?(e._hasPendingMicrotasks=u.microTask,gp(e),pp(e)):"macroTask"==u.change&&(e.hasPendingMacrotasks=u.macroTask))},onHandleError:(n,r,s,u)=>(n.handleError(s,u),e.runOutsideAngular(()=>e.onError.emit(u)),!1)})}(s)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!si.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(si.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,s){const u=this._inner,h=u.scheduleEventTask("NgZoneEvent: "+s,t,Lw,bd,bd);try{return u.runTask(h,n,r)}finally{u.cancelTask(h)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const Lw={};function pp(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function gp(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function $v(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Gv(e){e._nesting--,pp(e)}class jw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new js,this.onMicrotaskEmpty=new js,this.onStable=new js,this.onError=new js}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,s){return t.apply(n,r)}}let zv=(()=>{class e{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{si.assertNotInAngularZone(),hp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hp(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,s){let u=-1;r&&r>0&&(u=setTimeout(()=>{this._callbacks=this._callbacks.filter(h=>h.timeoutId!==u),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:u,updateCb:s})}whenStable(n,r,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,r,s){return[]}}return e.\u0275fac=function(n){return new(n||e)(on(si))},e.\u0275prov=ze({token:e,factory:e.\u0275fac}),e})(),Qv=(()=>{class e{constructor(){this._applications=new Map,mp.addToWindow(this)}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return mp.findTestabilityInTree(this,n,r)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ze({token:e,factory:e.\u0275fac}),e})();class Uw{addToWindow(t){}findTestabilityInTree(t,n,r){return null}}function Hw(e){mp=e}let mp=new Uw,Yv=!0,Kv=!1;function _p(){return Kv=!0,Yv}function Ww(){if(Kv)throw new Error("Cannot enable prod mode after platform setup.");Yv=!1}let oo;const qv=new Kt("AllowMultipleToken");class qw{constructor(t,n){this.name=t,this.token=n}}function Zv(e,t,n=[]){const r=`Platform: ${t}`,s=new Kt(r);return(u=[])=>{let h=Xv();if(!h||h.injector.get(qv,!1))if(e)e(n.concat(u).concat({provide:s,useValue:!0}));else{const p=n.concat(u).concat({provide:s,useValue:!0},{provide:hf,useValue:"platform"});!function(e){if(oo&&!oo.destroyed&&!oo.injector.get(qv,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");oo=e.get(Jv);const t=e.get(Lv,null);t&&t.forEach(n=>n())}(an.create({providers:p,name:r}))}return function(e){const t=Xv();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(s)}}function Xv(){return oo&&!oo.destroyed?oo:null}let Jv=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const p=function(e,t){let n;return n="noop"===e?new jw:("zone.js"===e?void 0:e)||new si({enableLongStackTrace:_p(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),_=[{provide:si,useValue:p}];return p.run(()=>{const y=an.create({providers:_,parent:this.injector,name:n.moduleType.name}),b=n.create(y),S=b.injector.get(Uo,null);if(!S)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return p.runOutsideAngular(()=>{const R=p.onError.subscribe({next:k=>{S.handleError(k)}});b.onDestroy(()=>{vp(this._modules,b),R.unsubscribe()})}),function(e,t,n){try{const r=n();return Oh(r)?r.catch(s=>{throw t.runOutsideAngular(()=>e.handleError(s)),s}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(S,p,()=>{const R=b.injector.get(cc);return R.runInitializers(),R.donePromise.then(()=>(function(e){ye(e,"Expected localeId to be defined"),"string"==typeof e&&(I_=e.toLowerCase().replace(/_/g,"-"))}(b.injector.get(Pd,vd)||vd),this._moduleDoBootstrap(b),b))})})}bootstrapModule(n,r=[]){const s=ey({},r);return function(e,t,n){const r=new Zh(n);return Promise.resolve(r)}(0,0,n).then(u=>this.bootstrapModuleFactory(u,s))}_moduleDoBootstrap(n){const r=n.injector.get(Rf);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(s=>r.bootstrap(s));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${le(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(on(an))},e.\u0275prov=ze({token:e,factory:e.\u0275fac}),e})();function ey(e,t){return Array.isArray(t)?t.reduce(ey,e):qo(qo({},e),t)}let Rf=(()=>{class e{constructor(n,r,s,u,h){this._zone=n,this._injector=r,this._exceptionHandler=s,this._componentFactoryResolver=u,this._initStatus=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new I.y(y=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{y.next(this._stable),y.complete()})}),_=new I.y(y=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{si.assertNotInAngularZone(),hp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,y.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{si.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{y.next(!1)}))});return()=>{b.unsubscribe(),S.unsubscribe()}});this.isStable=(0,G.T)(p,_.pipe((0,pe.B)()))}bootstrap(n,r){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let s;s=n instanceof q_?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(s.componentType);const u=function(e){return e.isBoundToModule}(s)?void 0:this._injector.get(Fu),p=s.create(an.NULL,[],r||s.selector,u),_=p.location.nativeElement,y=p.injector.get(zv,null),b=y&&p.injector.get(Qv);return y&&b&&b.registerApplication(_,y),p.onDestroy(()=>{this.detachView(p.hostView),vp(this.components,p),b&&b.unregisterApplication(_)}),this._loadComponent(p),p}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;vp(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(Tw,[]).concat(this._bootstrapListeners).forEach(s=>s(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(n){return new(n||e)(on(si),on(an),on(Uo),on(oc),on(cc))},e.\u0275prov=ze({token:e,factory:e.\u0275fac}),e})();function vp(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const rI=function(e){return function(e,t,n){if(es(e)&&!n){const r=On(e.index,t);return new wf(r,r)}return 47&e.type?new wf(t[16],t):null}(en(),ve(),16==(16&e))};let iI=(()=>{class e{}return e.__NG_ELEMENT_ID__=rI,e})();const pI=function(e){return null};class ay{constructor(){}supports(t){return mf(t)}create(t){return new _I(t)}}const mI=(e,t)=>t;class _I{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||mI}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,s=0,u=null;for(;n||r;){const h=!r||n&&n.currentIndex<ly(r,s,u)?n:r,p=ly(h,s,u),_=h.currentIndex;if(h===r)s--,r=r._nextRemoved;else if(n=n._next,null==h.previousIndex)s++;else{u||(u=[]);const y=p-s,b=_-s;if(y!=b){for(let R=0;R<y;R++){const k=R<u.length?u[R]:u[R]=0,H=k+R;b<=H&&H<y&&(u[R]=k+1)}u[h.previousIndex]=b-y}}p!==_&&t(h,p,_)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!mf(t))throw new Error(`Error trying to diff '${le(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let s,u,h,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let p=0;p<this.length;p++)u=t[p],h=this._trackByFn(p,u),null!==n&&Object.is(n.trackById,h)?(r&&(n=this._verifyReinsertion(n,u,h,p)),Object.is(n.item,u)||this._addIdentityChange(n,u)):(n=this._mismatch(n,u,h,p),r=!0),n=n._next}else s=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Gl()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,p=>{h=this._trackByFn(s,p),null!==n&&Object.is(n.trackById,h)?(r&&(n=this._verifyReinsertion(n,p,h,s)),Object.is(n.item,p)||this._addIdentityChange(n,p)):(n=this._mismatch(n,p,h,s),r=!0),n=n._next,s++}),this.length=s;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,s){let u;return null===t?u=this._itTail:(u=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,u,s)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,s))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,u,s)):t=this._addAfter(new vI(n,r),u,s),t}_verifyReinsertion(t,n,r,s){let u=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==u?t=this._reinsertAfter(u,t._prev,s):t.currentIndex!=s&&(t.currentIndex=s,this._addToMoves(t,s)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const s=t._prevRemoved,u=t._nextRemoved;return null===s?this._removalsHead=u:s._nextRemoved=u,null===u?this._removalsTail=s:u._prevRemoved=s,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const s=null===n?this._itHead:n._next;return t._next=s,t._prev=n,null===s?this._itTail=t:s._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new uy),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uy),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class vI{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class yI{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class uy{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new yI,this.map.set(n,r)),r.add(t)}get(t,n){const s=this.map.get(t);return s?s.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ly(e,t,n){const r=e.previousIndex;if(null===r)return r;let s=0;return n&&r<n.length&&(s=n[r]),r+t+s}class cy{constructor(){}supports(t){return t instanceof Map||wh(t)}create(){return new EI}}class EI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||wh(t)))throw new Error(`Error trying to diff '${le(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,s)=>{if(n&&n.key===s)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const u=this._getOrCreateRecordForKey(s,r);n=this._insertBeforeOrAppend(n,u)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const r=t._prev;return n._next=t,n._prev=r,t._prev=n,r&&(r._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const s=this._records.get(t);this._maybeAddToChanges(s,n);const u=s._prev,h=s._next;return u&&(u._next=h),h&&(h._prev=u),s._next=null,s._prev=null,s}const r=new CI(t);return this._records.set(t,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(r=>n(t[r],r))}}class CI{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fy(){return new Fd([new ay])}let Fd=(()=>{class e{constructor(n){this.factories=n}static create(n,r){if(null!=r){const s=r.factories.slice();n=n.concat(s)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||fy()),deps:[[e,new zi,new Rr]]}}find(n){const r=this.factories.find(s=>s.supports(n));if(null!=r)return r;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(e){return e.name||typeof e}(n)}'`)}}return e.\u0275prov=ze({token:e,providedIn:"root",factory:fy}),e})();function dy(){return new kd([new cy])}let kd=(()=>{class e{constructor(n){this.factories=n}static create(n,r){if(r){const s=r.factories.slice();n=n.concat(s)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||dy()),deps:[[e,new zi,new Rr]]}}find(n){const r=this.factories.find(s=>s.supports(n));if(r)return r;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return e.\u0275prov=ze({token:e,providedIn:"root",factory:dy}),e})();const bI=[new cy],II=new Fd([new ay]),TI=new kd(bI),SI=Zv(null,"core",[{provide:Vv,useValue:"unknown"},{provide:Jv,deps:[an]},{provide:Qv,deps:[]},{provide:Bv,deps:[]}]),xI=[{provide:Rf,useClass:Rf,deps:[si,an,Uo,oc,cc]},{provide:sb,deps:[si],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(n){t.push(n)}}},{provide:cc,useClass:cc,deps:[[new Rr,cp]]},{provide:Wv,useClass:Wv,deps:[]},Iw,{provide:Fd,useFactory:function(){return II},deps:[]},{provide:kd,useFactory:function(){return TI},deps:[]},{provide:Pd,useFactory:function(e){return e||"undefined"!=typeof $localize&&$localize.locale||vd},deps:[[new ur(Pd),new Rr,new zi]]},{provide:jv,useValue:"USD"}];let OI=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(on(Rf))},e.\u0275mod=ui({type:e}),e.\u0275inj=nt({providers:xI}),e})()}},ke=>{ke(ke.s=7742)}]);